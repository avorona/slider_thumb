/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// identity function for calling harmony imports with the correct context
/******/ 	__webpack_require__.i = function(value) { return value; };
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "js/";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 2);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n// send request\n// initialize slider\n// inititalize thumbnails\n// add navigation\n// add loader\n// check for reusable\n// +bonus: add smooth fade in/ fade out \n// +bonus create buttons on the fly\n\n\n// При загрузке страницы:\n\n// 1.ajax-запрос на картинки \n// 2.принять запрос, вырезать первые пять [0...5]\n// 3. создать оболочку и список для элементов галлереи\n// 4. Создать пять элементов галлереи\n// 5. создать кнопки управления галлерей\n// 6. создать миниатюры для этих пяти картинок\n\n\n// При нажатии на кнопку даллеЖ\n\n\n// 1. вырезать из запроса следующие пять картинок [5...10]\n// 2. создать следующие пять элементов галлереи\n// 3. создать миниатюры для этих пяти картинок\n\n// Ограничения:\n\n// --когда достигнут предел картинок, остановиться и ничего не создавать\n// --когда грузяться следующие пять картинок, показать прелоадер\n\n\n// фичи:\n\n// проклацывание по миниатюрам больших фото\n// увеличенные фото на весь экран при нажатии на большое фото\n\n\nvar Gallery = function () {\n  function Gallery(settings) {\n    _classCallCheck(this, Gallery);\n\n    this.settings = settings;\n    this.id = 0;\n    this.dataAmount = settings.galleryAmount;\n    this.startOfDataSet = 0;\n    this.numberOfDataItems = 5;\n    this.portionOfData = [];\n    this.data = [];\n    this.galleryWrapper = settings.container;\n    this.gallery = settings.gallery;\n    // this.galleryList;\n    this.galleryItemToSlide = settings.galleryItemSelector;\n    this.prevSlideBtn = settings.prevSlide || 'js-gallery-prev';\n    this.nextSlideBtn = settings.nextSlide || 'js-gallery-next';\n    this.currentSlide = 0 || settings.initialSlide;\n    this.currentIndex = 0;\n    this.thumbsHeight = 100;\n    this.thumbsItemWidth = 1.15 * this.thumbsHeight;\n    this.thumbsWidth = 0;\n    this.thumbsListWidth = 0;\n    this.thumbTriggers = [];\n    this.thumbsListPosition = 0;\n  }\n\n  _createClass(Gallery, [{\n    key: 'initialize',\n    value: function initialize() {\n      this.getData(0);\n    }\n  }, {\n    key: 'createCORSRequest',\n    value: function createCORSRequest(method, url) {\n\n      var xhr = new XMLHttpRequest();\n      if ('withCredentials' in xhr) {\n\n        // Check if the XMLHttpRequest object has a \"withCredentials\" property.\n        // \"withCredentials\" only exists on XMLHTTPRequest2 objects.\n        xhr.open(method, url, true);\n      } else if (typeof XDomainRequest != 'undefined') {\n\n        // Otherwise, check if XDomainRequest.\n        // XDomainRequest only exists in IE, and is IE's way of making CORS requests.\n        xhr = new XDomainRequest();\n        xhr.open(method, url);\n      } else {\n\n        // Otherwise, CORS is not supported by the browser.\n        xhr = null;\n      }\n      // console.log(xhr);\n      return xhr;\n    }\n  }, {\n    key: 'getData',\n    value: function getData() {\n\n      var self = this;\n\n      var url = 'images.json';\n\n      var xhr = self.createCORSRequest('GET', url);\n\n      if (!xhr) {\n        throw new Error('CORS not supported');\n      }\n\n      // Response handlers.\n      xhr.onload = function () {\n        var responseText = xhr.responseText;\n\n        self.handleResponse(responseText);\n        // console.log(parsedJSON);\n\n      };\n\n      xhr.onerror = function () {\n\n        console.log('Woops, there was an error making the request.');\n      };\n\n      xhr.send();\n    }\n  }, {\n    key: 'handleResponse',\n    value: function handleResponse(response) {\n      var self = this;\n\n      self.response = response;\n\n      self.initiateData(response);\n\n      self.showData();\n    }\n  }, {\n    key: 'showData',\n    value: function showData() {\n\n      var self = this;\n\n      var galleryItems = self.portionOfData;\n\n      var galleryContainer = [].slice.call(document.querySelectorAll(this.galleryWrapper));\n\n      galleryContainer.forEach(function (el) {\n\n        self.fillGallery(el, galleryItems);\n\n        self.addThumbs(el, galleryItems);\n      });\n    }\n  }, {\n    key: 'initiateData',\n    value: function initiateData(imagesString) {\n\n      var self = this;\n\n      // console.log(secondary)\n\n\n      var items = JSON.parse(imagesString);\n\n      var limittedArray = items.slice(0, this.dataAmount);\n\n      // console.log(limittedArray);\n\n\n      limittedArray.map(function (el) {\n\n        self.data.push(el);\n      });\n\n      self.sliceDataOnPortions();\n    }\n  }, {\n    key: 'sliceDataOnPortions',\n    value: function sliceDataOnPortions(imageItems, secondary) {\n\n      var self = this;\n      var items = self.data;\n\n      var step = 5;\n\n      if (secondary) {\n\n        if (this.startOfDataSet < items.length - step) {\n          this.startOfDataSet += secondary;\n          this.numberOfDataItems = this.startOfDataSet + step;\n\n          var portionArray = items.slice(this.startOfDataSet, this.numberOfDataItems);\n\n          portionArray.map(function (el) {\n\n            self.portionOfData.push(el);\n          });\n        } else {\n\n          self.portionOfData = 0;\n        }\n      } else {\n        this.numberOfDataItems = this.startOfDataSet + step;\n        var _portionArray = items.slice(this.startOfDataSet, this.numberOfDataItems);\n\n        _portionArray.map(function (el) {\n\n          self.portionOfData.push(el);\n        });\n      }\n\n      // // if(secondary) { items=self.portionOfData; }\n      // console.log(this.startOfDataSet, this.numberOfDataItems);\n      // console.log(items);\n\n\n      console.log(self.portionOfData);\n    }\n  }, {\n    key: 'fillGallery',\n    value: function fillGallery(el, data) {\n\n      var galleryId = this.id;\n      galleryId++;\n\n      var items = data;\n      var itemsAmount = items.length;\n\n      var galleryContainer = el;\n      var galleryMinHeight = el.offsetHeight;\n\n      // console.log(el,galleryMinHeight);\n\n      var gallery = document.createElement('div');\n\n      gallery.classList.add('gallery', 'js-gallery');\n      gallery.style.minHeight = galleryMinHeight - this.thumbsHeight + 'px';\n\n      galleryContainer.appendChild(gallery);\n\n      this.thumbsWidth = gallery.offsetWidth;\n\n      var galleryList = document.createElement('ul');\n\n      galleryList.classList.add('gallery__list', 'js-gallery-list');\n      galleryList.style.minHeight = galleryMinHeight - this.thumbsHeight + 'px';\n\n      self.galleryList = galleryList;\n\n      this.addItemsToGallery(galleryList, items);\n\n      // this.addBtnToGallery(galleryContainer);\n\n      this.thumbsListWidth = this.thumbsItemWidth * (itemsAmount + 1);\n\n      // console.log(galleryList);\n\n      gallery.appendChild(galleryList);\n\n      this.navigation(galleryContainer, galleryList);\n    }\n  }, {\n    key: 'addItemsToGallery',\n    value: function addItemsToGallery(list, items) {\n\n      var galleryList = list;\n      var data = items;\n      var dataLength = data.length;\n      var galleryMaxWidth = this.thumbsWidth;\n\n      for (var j = 0; j < dataLength; j++) {\n\n        var galleryItem = document.createElement('li');\n        galleryItem.classList.add('gallery__item', 'js-gallery-item');\n\n        var galleryItemID = 'slide' + data[j].id;\n        galleryItem.setAttribute('id', galleryItemID);\n\n        galleryItem.style.maxWidth = galleryMaxWidth + 'px';\n\n        galleryItem.innerHTML = '<img src=\"' + data[j].url + '\" class=\"gallery__img\"> ';\n\n        galleryList.appendChild(galleryItem);\n      }\n    }\n  }, {\n    key: 'navigation',\n    value: function navigation(galleryContainer, galleryList) {\n\n      var self = this;\n\n      var thisGalleryWrapper = galleryContainer;\n      var thisGalleryList = galleryList;\n      var prevBtn = void 0,\n          nextBtn = void 0;\n\n      var thisGalleryChildren = [].slice.call(thisGalleryWrapper.children);\n\n      // console.log(thisGalleryChildren);\n\n\n      if (self.prevSlideBtn === 'js-gallery-prev' && self.nextSlideBtn === 'js-gallery-next') {\n\n        thisGalleryWrapper.classList.add('add-controllers');\n\n        prevBtn = document.createElement('div');\n        prevBtn.classList.add('control-btn', 'control-btn__left', 'js-gallery-prev');\n\n        prevBtn.innerHTML = '<button class=\"icon-btn icon-btn_left\"></button>';\n\n        nextBtn = document.createElement('div');\n        nextBtn.classList.add('control-btn', 'control-btn__right', 'js-gallery-next');\n\n        nextBtn.innerHTML = '<button class=\"icon-btn icon-btn_right\"></button>';\n\n        thisGalleryWrapper.appendChild(prevBtn);\n        thisGalleryWrapper.appendChild(nextBtn);\n      } else {\n\n        nextBtn = thisGalleryChildren.filter(function (el) {\n\n          if (el.classList.contains(self.nextSlideBtn)) {\n            return el;\n          }\n        });\n\n        // console.log(nextSlideButton);\n\n\n        prevBtn = thisGalleryChildren.filter(function (el) {\n\n          if (el.classList.contains(self.prevSlideBtn)) {\n            return el;\n          }\n        });\n      }\n\n      // console.log(prevSlideButton);\n\n      var gallery = thisGalleryChildren.filter(function (el) {\n\n        if (el.classList.contains(self.gallery)) {\n          return el;\n        }\n      });\n\n      var slidesNodeList = thisGalleryList.childNodes;\n      // console.log(thisGalleryList);\n\n      var slides = [].slice.call(slidesNodeList);\n\n      var firstSlides = slides.filter(function (el) {\n\n        if (el.getAttribute('id') === 'slide1') return el;\n      });\n\n      // console.log(firstSlides);\n\n      firstSlides.forEach(function (el) {\n\n        el.classList.add('is-visible');\n      });\n\n      this.nextSlide(slides, nextBtn, thisGalleryList);\n\n      this.prevSlide(slides, prevBtn, thisGalleryList);\n    }\n  }, {\n    key: 'nextSlide',\n    value: function nextSlide(allSlides, nextBtn, galleryList) {\n      var self = this;\n\n      var nextSlideBtn = nextBtn;\n      var slides = allSlides;\n\n      var currentSlide = slides.filter(function (el) {\n\n        if (el.classList.contains('is-visible')) {\n          return el;\n        }\n      });\n\n      currentSlide.forEach(function (element, index, array) {\n\n        self.currentIndex = slides.indexOf(array[index]);\n\n        // console.log(slides,currentSlide,self.currentIndex);\n\n\n        nextSlideBtn.forEach(function (e) {\n\n          // console.log(slides,currentSlide);\n\n          e.addEventListener('click', function (event) {\n            var items = self.portionOfData;\n            var itemsLength = items.length;\n            var list = galleryList;\n\n            // self.startOfDataSet += 5;\n\n            self.sliceDataOnPortions(self.portionOfData, 5);\n            self.addItemsToGallery(list, items, itemsLength);\n\n            slides[self.currentIndex].classList.toggle('is-visible');\n\n            self.currentIndex = (self.currentIndex + 1) % slides.length;\n\n            slides[self.currentIndex].classList.toggle('is-visible');\n\n            // console.log(self.currentIndex);\n            self.changeThumbnails();\n          });\n        });\n      });\n    }\n  }, {\n    key: 'prevSlide',\n    value: function prevSlide(allSlides, prevBtn, galleryList) {\n\n      var self = this;\n      var slides = allSlides;\n      var lastSlide = slides.length - 1;\n\n      var prevSlideBtn = prevBtn;\n\n      var currentSlider = slides.filter(function (el) {\n\n        if (el.classList.contains('is-visible')) {\n          return el;\n        }\n      });\n\n      currentSlider.forEach(function (element, index, array) {\n\n        self.currentIndex = slides.indexOf(array[index]);\n\n        prevSlideBtn.forEach(function (el) {\n\n          el.addEventListener('click', function (event) {\n\n            // console.log(slides);\n\n            slides[self.currentIndex].classList.toggle('is-visible');\n\n            if (self.currentIndex <= 0) {\n\n              self.currentIndex = lastSlide;\n            } else if (self.currentIndex > 0 && self.currentIndex <= lastSlide) {\n\n              self.currentIndex--;\n            }\n\n            slides[self.currentIndex].classList.toggle('is-visible');\n\n            console.log(self.currentIndex);\n            self.changeThumbnails();\n          });\n        });\n      });\n    }\n  }, {\n    key: 'addThumbs',\n    value: function addThumbs(galleryContainer, galleryItems) {\n\n      var self = this;\n      var data = galleryItems;\n      var container = galleryContainer;\n\n      var thumbsUrl = data.map(function (el) {\n\n        return el.thumbnailUrl;\n      });\n\n      var thumbsHTML = document.createElement('div');\n\n      thumbsHTML.style.minHeight = self.thumbsHeight + 'px';\n      thumbsHTML.classList.add('g-thumbnails');\n\n      var thumbsHTMLList = document.createElement('ul');\n      var thumbsHTMLListWidth = this.thumbsListWidth;\n      thumbsHTMLList.style.width = thumbsHTMLListWidth + 'px';\n\n      var thumbsHTMLListHeight = self.thumbsHeight - 10;\n      thumbsHTMLList.style.height = thumbsHTMLListHeight + 'px';\n\n      thumbsHTMLList.classList.add('g-thumbnails__list');\n\n      this.thumbsListPosition = self.currentIndex * self.thumbsItemWidth + 5;\n\n      for (var i = 0; i < thumbsUrl.length; i++) {\n\n        var thumbsHTMLItem = document.createElement('li');\n\n        var thumbsHTMLItemWidth = this.thumbsItemWidth;\n        thumbsHTMLItem.style.width = thumbsHTMLItemWidth + 'px';\n        thumbsHTMLItem.style.height = thumbsHTMLListHeight + 'px';\n        var thumbsHTMLItemPosition = self.currentIndex * thumbsHTMLItemWidth;\n\n        thumbsHTMLItem.classList.add('g-thumbnails__item');\n\n        var thumbsHTMLItemWrap = document.createElement('div');\n        thumbsHTMLItemWrap.setAttribute('data-thumb', i);\n        thumbsHTMLItemWrap.classList.add('g-thumbnails__item-wrap', 'js-thumb-slide');\n\n        self.thumbTriggers.push(thumbsHTMLItemWrap);\n\n        thumbsHTMLItemWrap.innerHTML = '<img src=\"' + thumbsUrl[i] + '\" class=\"g-thumbnails__img\"' + ' style=\"max-width: 100%;\">';\n\n        thumbsHTMLItem.appendChild(thumbsHTMLItemWrap);\n\n        thumbsHTMLList.appendChild(thumbsHTMLItem);\n      }\n\n      // console.log(self.thumbTriggers);\n\n      thumbsHTML.appendChild(thumbsHTMLList);\n\n      // console.log(container);\n      container.appendChild(thumbsHTML);\n\n      this.moveThumbnails(thumbsHTMLList, self.currentIndex);\n\n      this.toggleThumbs();\n    }\n  }, {\n    key: 'toggleThumbs',\n    value: function toggleThumbs() {\n\n      var self = this;\n\n      var thumbTrigger = self.thumbTriggers;\n\n      // console.log(thumbTriggersList);\n\n      thumbTrigger.forEach(function (el) {\n\n        el.addEventListener('click', function (event) {\n\n          var triggerSiblingSlides = el.closest('.g-thumbnails').previousSibling.childNodes;\n\n          // console.log(triggerSiblingSlides);\n\n          var slides = triggerSiblingSlides[0].childNodes;\n\n          var indexToTrigger = +event.currentTarget.getAttribute('data-thumb');\n\n          slides[self.currentIndex].classList.toggle('is-visible');\n\n          self.currentIndex = indexToTrigger;\n\n          self.changeThumbnails();\n\n          slides[self.currentIndex].classList.toggle('is-visible');\n\n          // console.log(self.currentIndex);\n        });\n      });\n    }\n  }, {\n    key: 'changeThumbnails',\n    value: function changeThumbnails(thumbs) {\n\n      var self = this;\n\n      var thumbTrigger = self.thumbTriggers;\n      var index = self.currentIndex;\n\n      var thumbTriggersList = thumbTrigger[0].closest('.g-thumbnails__list');\n\n      self.moveThumbnails(thumbTriggersList, self.currentIndex);\n\n      thumbTrigger.forEach(function (el) {\n\n        el.classList.remove('is-active');\n\n        var thumbDataAttr = +el.getAttribute('data-thumb');\n\n        // console.log(thumbDataAttr);\n\n        if (thumbDataAttr === index) {\n\n          el.classList.toggle('is-active');\n        }\n      });\n    }\n  }, {\n    key: 'moveThumbnails',\n    value: function moveThumbnails(thumbs, index) {\n\n      var self = this;\n\n      var left = index * self.thumbsItemWidth + 5;\n\n      var totalWidth = thumbs.offsetWidth;\n      var visibleWidth = self.thumbsWidth;\n      var stopPoint = totalWidth - visibleWidth;\n\n      // console.log(left,totalWidth,visibleWidth,stopPoint);\n\n      if (left >= stopPoint) {\n\n        left = stopPoint;\n      }\n\n      var positionLeft = 'calc( -' + left + 'px' + ' + 15px)';\n\n      thumbs.style.left = positionLeft;\n    }\n  }, {\n    key: 'addLoader',\n    value: function addLoader() {}\n  }, {\n    key: 'fullScreenMode',\n    value: function fullScreenMode() {}\n  }]);\n\n  return Gallery;\n}();\n\nexports.default = Gallery;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvanMvZ2FsbGVyeS5qcz9iY2ZjIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNlbmQgcmVxdWVzdFxuLy8gaW5pdGlhbGl6ZSBzbGlkZXJcbi8vIGluaXRpdGFsaXplIHRodW1ibmFpbHNcbi8vIGFkZCBuYXZpZ2F0aW9uXG4vLyBhZGQgbG9hZGVyXG4vLyBjaGVjayBmb3IgcmV1c2FibGVcbi8vICtib251czogYWRkIHNtb290aCBmYWRlIGluLyBmYWRlIG91dCBcbi8vICtib251cyBjcmVhdGUgYnV0dG9ucyBvbiB0aGUgZmx5XG5cblxuXG5cblxuXG5cblxuXG5cbi8vINCf0YDQuCDQt9Cw0LPRgNGD0LfQutC1INGB0YLRgNCw0L3QuNGG0Ys6XG5cbi8vIDEuYWpheC3Qt9Cw0L/RgNC+0YEg0L3QsCDQutCw0YDRgtC40L3QutC4IFxuLy8gMi7Qv9GA0LjQvdGP0YLRjCDQt9Cw0L/RgNC+0YEsINCy0YvRgNC10LfQsNGC0Ywg0L/QtdGA0LLRi9C1INC/0Y/RgtGMIFswLi4uNV1cbi8vIDMuINGB0L7Qt9C00LDRgtGMINC+0LHQvtC70L7Rh9C60YMg0Lgg0YHQv9C40YHQvtC6INC00LvRjyDRjdC70LXQvNC10L3RgtC+0LIg0LPQsNC70LvQtdGA0LXQuFxuLy8gNC4g0KHQvtC30LTQsNGC0Ywg0L/Rj9GC0Ywg0Y3Qu9C10LzQtdC90YLQvtCyINCz0LDQu9C70LXRgNC10Lhcbi8vIDUuINGB0L7Qt9C00LDRgtGMINC60L3QvtC/0LrQuCDRg9C/0YDQsNCy0LvQtdC90LjRjyDQs9Cw0LvQu9C10YDQtdC5XG4vLyA2LiDRgdC+0LfQtNCw0YLRjCDQvNC40L3QuNCw0YLRjtGA0Ysg0LTQu9GPINGN0YLQuNGFINC/0Y/RgtC4INC60LDRgNGC0LjQvdC+0LpcblxuXG5cbi8vINCf0YDQuCDQvdCw0LbQsNGC0LjQuCDQvdCwINC60L3QvtC/0LrRgyDQtNCw0LvQu9C10JZcblxuXG4vLyAxLiDQstGL0YDQtdC30LDRgtGMINC40Lcg0LfQsNC/0YDQvtGB0LAg0YHQu9C10LTRg9GO0YnQuNC1INC/0Y/RgtGMINC60LDRgNGC0LjQvdC+0LogWzUuLi4xMF1cbi8vIDIuINGB0L7Qt9C00LDRgtGMINGB0LvQtdC00YPRjtGJ0LjQtSDQv9GP0YLRjCDRjdC70LXQvNC10L3RgtC+0LIg0LPQsNC70LvQtdGA0LXQuFxuLy8gMy4g0YHQvtC30LTQsNGC0Ywg0LzQuNC90LjQsNGC0Y7RgNGLINC00LvRjyDRjdGC0LjRhSDQv9GP0YLQuCDQutCw0YDRgtC40L3QvtC6XG5cbi8vINCe0LPRgNCw0L3QuNGH0LXQvdC40Y86XG5cbi8vIC0t0LrQvtCz0LTQsCDQtNC+0YHRgtC40LPQvdGD0YIg0L/RgNC10LTQtdC7INC60LDRgNGC0LjQvdC+0LosINC+0YHRgtCw0L3QvtCy0LjRgtGM0YHRjyDQuCDQvdC40YfQtdCz0L4g0L3QtSDRgdC+0LfQtNCw0LLQsNGC0Yxcbi8vIC0t0LrQvtCz0LTQsCDQs9GA0YPQt9GP0YLRjNGB0Y8g0YHQu9C10LTRg9GO0YnQuNC1INC/0Y/RgtGMINC60LDRgNGC0LjQvdC+0LosINC/0L7QutCw0LfQsNGC0Ywg0L/RgNC10LvQvtCw0LTQtdGAXG5cblxuLy8g0YTQuNGH0Lg6XG5cbi8vINC/0YDQvtC60LvQsNGG0YvQstCw0L3QuNC1INC/0L4g0LzQuNC90LjQsNGC0Y7RgNCw0Lwg0LHQvtC70YzRiNC40YUg0YTQvtGC0L5cbi8vINGD0LLQtdC70LjRh9C10L3QvdGL0LUg0YTQvtGC0L4g0L3QsCDQstC10YHRjCDRjdC60YDQsNC9INC/0YDQuCDQvdCw0LbQsNGC0LjQuCDQvdCwINCx0L7Qu9GM0YjQvtC1INGE0L7RgtC+XG5cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FsbGVyeSB7XG5cbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MpIHtcblxuICAgIHRoaXMuc2V0dGluZ3MgPSBzZXR0aW5ncztcbiAgICB0aGlzLmlkID0gMDtcbiAgICB0aGlzLmRhdGFBbW91bnQgPSBzZXR0aW5ncy5nYWxsZXJ5QW1vdW50O1xuICAgIHRoaXMuc3RhcnRPZkRhdGFTZXQgPSAwO1xuICAgIHRoaXMubnVtYmVyT2ZEYXRhSXRlbXMgPSA1O1xuICAgIHRoaXMucG9ydGlvbk9mRGF0YSA9IFtdO1xuICAgIHRoaXMuZGF0YSA9IFtdO1xuICAgIHRoaXMuZ2FsbGVyeVdyYXBwZXIgPSBzZXR0aW5ncy5jb250YWluZXI7XG4gICAgdGhpcy5nYWxsZXJ5ID0gc2V0dGluZ3MuZ2FsbGVyeTtcbiAgICAvLyB0aGlzLmdhbGxlcnlMaXN0O1xuICAgIHRoaXMuZ2FsbGVyeUl0ZW1Ub1NsaWRlID0gc2V0dGluZ3MuZ2FsbGVyeUl0ZW1TZWxlY3RvcjtcbiAgICB0aGlzLnByZXZTbGlkZUJ0biA9IHNldHRpbmdzLnByZXZTbGlkZSB8fCAnanMtZ2FsbGVyeS1wcmV2JztcbiAgICB0aGlzLm5leHRTbGlkZUJ0biA9IHNldHRpbmdzLm5leHRTbGlkZSB8fCAnanMtZ2FsbGVyeS1uZXh0JztcbiAgICB0aGlzLmN1cnJlbnRTbGlkZSA9IDAgfHwgc2V0dGluZ3MuaW5pdGlhbFNsaWRlO1xuICAgIHRoaXMuY3VycmVudEluZGV4ID0gMDtcbiAgICB0aGlzLnRodW1ic0hlaWdodCA9IDEwMDtcbiAgICB0aGlzLnRodW1ic0l0ZW1XaWR0aCA9IDEuMTUgKiB0aGlzLnRodW1ic0hlaWdodDtcbiAgICB0aGlzLnRodW1ic1dpZHRoID0gMDtcbiAgICB0aGlzLnRodW1ic0xpc3RXaWR0aCA9IDA7XG4gICAgdGhpcy50aHVtYlRyaWdnZXJzID0gW107XG4gICAgdGhpcy50aHVtYnNMaXN0UG9zaXRpb24gPSAwO1xuXG4gIH1cblxuICBpbml0aWFsaXplKCkge1xuICAgIHRoaXMuZ2V0RGF0YSgwKTtcblxuICB9XG5cblxuICBjcmVhdGVDT1JTUmVxdWVzdChtZXRob2QsIHVybCkge1xuXG5cblxuICAgIGxldCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICBpZiAoJ3dpdGhDcmVkZW50aWFscycgaW4geGhyKSB7XG5cbiAgICAgIC8vIENoZWNrIGlmIHRoZSBYTUxIdHRwUmVxdWVzdCBvYmplY3QgaGFzIGEgXCJ3aXRoQ3JlZGVudGlhbHNcIiBwcm9wZXJ0eS5cbiAgICAgIC8vIFwid2l0aENyZWRlbnRpYWxzXCIgb25seSBleGlzdHMgb24gWE1MSFRUUFJlcXVlc3QyIG9iamVjdHMuXG4gICAgICB4aHIub3BlbihtZXRob2QsIHVybCwgdHJ1ZSk7XG5cbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBYRG9tYWluUmVxdWVzdCAhPSAndW5kZWZpbmVkJykge1xuXG4gICAgICAvLyBPdGhlcndpc2UsIGNoZWNrIGlmIFhEb21haW5SZXF1ZXN0LlxuICAgICAgLy8gWERvbWFpblJlcXVlc3Qgb25seSBleGlzdHMgaW4gSUUsIGFuZCBpcyBJRSdzIHdheSBvZiBtYWtpbmcgQ09SUyByZXF1ZXN0cy5cbiAgICAgIHhociA9IG5ldyBYRG9tYWluUmVxdWVzdCgpO1xuICAgICAgeGhyLm9wZW4obWV0aG9kLCB1cmwpO1xuXG4gICAgfSBlbHNlIHtcblxuICAgICAgLy8gT3RoZXJ3aXNlLCBDT1JTIGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhlIGJyb3dzZXIuXG4gICAgICB4aHIgPSBudWxsO1xuXG4gICAgfVxuICAgIC8vIGNvbnNvbGUubG9nKHhocik7XG4gICAgcmV0dXJuIHhocjtcblxuXG4gIH1cblxuICBnZXREYXRhKCkge1xuXG4gICAgbGV0IHNlbGYgPSB0aGlzO1xuXG4gICAgbGV0IHVybCA9ICdpbWFnZXMuanNvbic7XG5cbiAgICBsZXQgeGhyID0gc2VsZi5jcmVhdGVDT1JTUmVxdWVzdCgnR0VUJywgdXJsKTtcblxuICAgIGlmICgheGhyKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NPUlMgbm90IHN1cHBvcnRlZCcpO1xuICAgIH1cblxuICAgIC8vIFJlc3BvbnNlIGhhbmRsZXJzLlxuICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgIGxldCByZXNwb25zZVRleHQgPSB4aHIucmVzcG9uc2VUZXh0O1xuXG4gICAgICBzZWxmLmhhbmRsZVJlc3BvbnNlKHJlc3BvbnNlVGV4dCk7XG4gICAgICAvLyBjb25zb2xlLmxvZyhwYXJzZWRKU09OKTtcblxuXG4gICAgfTtcblxuICAgIHhoci5vbmVycm9yID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgIGNvbnNvbGUubG9nKCdXb29wcywgdGhlcmUgd2FzIGFuIGVycm9yIG1ha2luZyB0aGUgcmVxdWVzdC4nKTtcbiAgICB9O1xuXG4gICAgeGhyLnNlbmQoKTtcblxuICB9XG5cbiAgaGFuZGxlUmVzcG9uc2UocmVzcG9uc2UpIHtcbiAgICBsZXQgc2VsZiA9IHRoaXM7XG5cblxuICAgIHNlbGYucmVzcG9uc2UgPSByZXNwb25zZTtcblxuICAgIHNlbGYuaW5pdGlhdGVEYXRhKHJlc3BvbnNlKTtcblxuICAgIHNlbGYuc2hvd0RhdGEoKTtcbiAgfVxuXG5cbiAgc2hvd0RhdGEoKSB7XG5cbiAgICBsZXQgc2VsZiA9IHRoaXM7XG5cbiAgICBsZXQgZ2FsbGVyeUl0ZW1zID0gc2VsZi5wb3J0aW9uT2ZEYXRhO1xuXG4gICAgbGV0IGdhbGxlcnlDb250YWluZXIgPSBbXS5zbGljZS5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5nYWxsZXJ5V3JhcHBlcikpO1xuXG5cbiAgICBnYWxsZXJ5Q29udGFpbmVyLmZvckVhY2goZnVuY3Rpb24oZWwpIHtcblxuXG4gICAgICBzZWxmLmZpbGxHYWxsZXJ5KGVsLCBnYWxsZXJ5SXRlbXMpO1xuXG4gICAgICBzZWxmLmFkZFRodW1icyhlbCwgZ2FsbGVyeUl0ZW1zKTtcblxuXG4gICAgfSk7XG5cbiAgfVxuXG4gIGluaXRpYXRlRGF0YShpbWFnZXNTdHJpbmcpIHtcblxuICAgIGxldCBzZWxmID0gdGhpcztcblxuXG4gICAgLy8gY29uc29sZS5sb2coc2Vjb25kYXJ5KVxuXG5cbiAgICB2YXIgaXRlbXMgPSBKU09OLnBhcnNlKGltYWdlc1N0cmluZyk7XG5cblxuICAgIGxldCBsaW1pdHRlZEFycmF5ID0gaXRlbXMuc2xpY2UoMCwgdGhpcy5kYXRhQW1vdW50KTtcblxuICAgIC8vIGNvbnNvbGUubG9nKGxpbWl0dGVkQXJyYXkpO1xuXG5cbiAgICBsaW1pdHRlZEFycmF5Lm1hcChmdW5jdGlvbihlbCkge1xuXG4gICAgICBzZWxmLmRhdGEucHVzaChlbCk7XG5cbiAgICB9KTtcblxuXG4gICAgc2VsZi5zbGljZURhdGFPblBvcnRpb25zKCk7XG5cblxuXG4gIH1cblxuXG4gIHNsaWNlRGF0YU9uUG9ydGlvbnMoaW1hZ2VJdGVtcywgc2Vjb25kYXJ5KSB7XG5cbiAgICBsZXQgc2VsZiA9IHRoaXM7XG4gICAgbGV0IGl0ZW1zID0gc2VsZi5kYXRhO1xuXG4gICAgbGV0IHN0ZXAgPSA1O1xuXG4gICAgaWYgKHNlY29uZGFyeSkge1xuXG4gICAgICBpZiAodGhpcy5zdGFydE9mRGF0YVNldCA8IGl0ZW1zLmxlbmd0aCAtIHN0ZXApIHtcbiAgICAgICAgdGhpcy5zdGFydE9mRGF0YVNldCArPSBzZWNvbmRhcnk7XG4gICAgICAgIHRoaXMubnVtYmVyT2ZEYXRhSXRlbXMgPSB0aGlzLnN0YXJ0T2ZEYXRhU2V0ICsgc3RlcDtcblxuICAgICAgICBsZXQgcG9ydGlvbkFycmF5ID0gaXRlbXMuc2xpY2UodGhpcy5zdGFydE9mRGF0YVNldCwgdGhpcy5udW1iZXJPZkRhdGFJdGVtcyk7XG5cbiAgICBcbiAgICAgICAgcG9ydGlvbkFycmF5Lm1hcChmdW5jdGlvbihlbCkge1xuXG4gICAgICAgICAgc2VsZi5wb3J0aW9uT2ZEYXRhLnB1c2goZWwpO1xuXG4gICAgICAgIH0pO1xuXG4gICAgICB9IGVsc2Uge1xuXG4gICAgICAgIHNlbGYucG9ydGlvbk9mRGF0YSA9IDA7XG5cblxuICAgICAgfVxuXG5cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5udW1iZXJPZkRhdGFJdGVtcyA9IHRoaXMuc3RhcnRPZkRhdGFTZXQgKyBzdGVwO1xuICAgICAgbGV0IHBvcnRpb25BcnJheSA9IGl0ZW1zLnNsaWNlKHRoaXMuc3RhcnRPZkRhdGFTZXQsIHRoaXMubnVtYmVyT2ZEYXRhSXRlbXMpO1xuXG4gICAgIFxuXG4gICAgICBwb3J0aW9uQXJyYXkubWFwKGZ1bmN0aW9uKGVsKSB7XG5cbiAgICAgICAgc2VsZi5wb3J0aW9uT2ZEYXRhLnB1c2goZWwpO1xuXG4gICAgICB9KTtcbiAgICAgIFxuICAgIH1cblxuXG4gICAgLy8gLy8gaWYoc2Vjb25kYXJ5KSB7IGl0ZW1zPXNlbGYucG9ydGlvbk9mRGF0YTsgfVxuICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuc3RhcnRPZkRhdGFTZXQsIHRoaXMubnVtYmVyT2ZEYXRhSXRlbXMpO1xuICAgIC8vIGNvbnNvbGUubG9nKGl0ZW1zKTtcblxuXG4gICAgY29uc29sZS5sb2coc2VsZi5wb3J0aW9uT2ZEYXRhKTtcblxuXG4gIH1cblxuICBmaWxsR2FsbGVyeShlbCwgZGF0YSkge1xuXG4gICAgbGV0IGdhbGxlcnlJZCA9IHRoaXMuaWQ7XG4gICAgZ2FsbGVyeUlkKys7XG5cbiAgICBsZXQgaXRlbXMgPSBkYXRhO1xuICAgIGxldCBpdGVtc0Ftb3VudCA9IGl0ZW1zLmxlbmd0aDtcblxuICAgIGxldCBnYWxsZXJ5Q29udGFpbmVyID0gZWw7XG4gICAgbGV0IGdhbGxlcnlNaW5IZWlnaHQgPSBlbC5vZmZzZXRIZWlnaHQ7XG5cbiAgICAvLyBjb25zb2xlLmxvZyhlbCxnYWxsZXJ5TWluSGVpZ2h0KTtcblxuICAgIGxldCBnYWxsZXJ5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgICBnYWxsZXJ5LmNsYXNzTGlzdC5hZGQoJ2dhbGxlcnknLCAnanMtZ2FsbGVyeScpO1xuICAgIGdhbGxlcnkuc3R5bGUubWluSGVpZ2h0ID0gKGdhbGxlcnlNaW5IZWlnaHQgLSB0aGlzLnRodW1ic0hlaWdodCkgKyAncHgnO1xuXG5cblxuICAgIGdhbGxlcnlDb250YWluZXIuYXBwZW5kQ2hpbGQoZ2FsbGVyeSk7XG5cblxuICAgIHRoaXMudGh1bWJzV2lkdGggPSBnYWxsZXJ5Lm9mZnNldFdpZHRoO1xuXG5cbiAgICBsZXQgZ2FsbGVyeUxpc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpO1xuXG4gICAgZ2FsbGVyeUxpc3QuY2xhc3NMaXN0LmFkZCgnZ2FsbGVyeV9fbGlzdCcsICdqcy1nYWxsZXJ5LWxpc3QnKTtcbiAgICBnYWxsZXJ5TGlzdC5zdHlsZS5taW5IZWlnaHQgPSAoZ2FsbGVyeU1pbkhlaWdodCAtIHRoaXMudGh1bWJzSGVpZ2h0KSArICdweCc7XG5cbiAgICBzZWxmLmdhbGxlcnlMaXN0ID0gZ2FsbGVyeUxpc3Q7XG5cbiAgICB0aGlzLmFkZEl0ZW1zVG9HYWxsZXJ5KGdhbGxlcnlMaXN0LCBpdGVtcyk7XG5cbiAgICAvLyB0aGlzLmFkZEJ0blRvR2FsbGVyeShnYWxsZXJ5Q29udGFpbmVyKTtcblxuICAgIHRoaXMudGh1bWJzTGlzdFdpZHRoID0gdGhpcy50aHVtYnNJdGVtV2lkdGggKiAoaXRlbXNBbW91bnQgKyAxKTtcblxuXG4gICAgLy8gY29uc29sZS5sb2coZ2FsbGVyeUxpc3QpO1xuXG4gICAgZ2FsbGVyeS5hcHBlbmRDaGlsZChnYWxsZXJ5TGlzdCk7XG5cbiAgICB0aGlzLm5hdmlnYXRpb24oZ2FsbGVyeUNvbnRhaW5lciwgZ2FsbGVyeUxpc3QpO1xuXG4gIH1cblxuXG5cblxuICBhZGRJdGVtc1RvR2FsbGVyeShsaXN0LCBpdGVtcykge1xuXG4gICAgbGV0IGdhbGxlcnlMaXN0ID0gbGlzdDtcbiAgICBsZXQgZGF0YSA9IGl0ZW1zO1xuICAgIGxldCBkYXRhTGVuZ3RoID0gZGF0YS5sZW5ndGg7XG4gICAgbGV0IGdhbGxlcnlNYXhXaWR0aCA9IHRoaXMudGh1bWJzV2lkdGg7XG5cblxuICBcbiAgICBmb3IgKGxldCBqID0gMDsgaiA8IGRhdGFMZW5ndGg7IGorKykge1xuXG4gICAgICBsZXQgZ2FsbGVyeUl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICAgICAgZ2FsbGVyeUl0ZW0uY2xhc3NMaXN0LmFkZCgnZ2FsbGVyeV9faXRlbScsICdqcy1nYWxsZXJ5LWl0ZW0nKTtcblxuICAgICAgbGV0IGdhbGxlcnlJdGVtSUQgPSAnc2xpZGUnICsgZGF0YVtqXS5pZDtcbiAgICAgIGdhbGxlcnlJdGVtLnNldEF0dHJpYnV0ZSgnaWQnLCBnYWxsZXJ5SXRlbUlEKTtcblxuICAgICAgZ2FsbGVyeUl0ZW0uc3R5bGUubWF4V2lkdGggPSBnYWxsZXJ5TWF4V2lkdGggKyAncHgnO1xuXG4gICAgICBnYWxsZXJ5SXRlbS5pbm5lckhUTUwgPSAnPGltZyBzcmM9XCInICsgZGF0YVtqXS51cmwgKyAnXCIgY2xhc3M9XCJnYWxsZXJ5X19pbWdcIj4gJztcblxuICAgICAgZ2FsbGVyeUxpc3QuYXBwZW5kQ2hpbGQoZ2FsbGVyeUl0ZW0pO1xuXG4gICAgfVxuXG5cbiAgfVxuXG5cblxuXG5cblxuXG4gIG5hdmlnYXRpb24oZ2FsbGVyeUNvbnRhaW5lciwgZ2FsbGVyeUxpc3QpIHtcblxuXG4gICAgbGV0IHNlbGYgPSB0aGlzO1xuXG5cblxuICAgIGxldCB0aGlzR2FsbGVyeVdyYXBwZXIgPSBnYWxsZXJ5Q29udGFpbmVyO1xuICAgIGxldCB0aGlzR2FsbGVyeUxpc3QgPSBnYWxsZXJ5TGlzdDtcbiAgICBsZXQgcHJldkJ0biwgbmV4dEJ0bjtcblxuICAgIGxldCB0aGlzR2FsbGVyeUNoaWxkcmVuID0gW10uc2xpY2UuY2FsbCh0aGlzR2FsbGVyeVdyYXBwZXIuY2hpbGRyZW4pO1xuXG4gICAgLy8gY29uc29sZS5sb2codGhpc0dhbGxlcnlDaGlsZHJlbik7XG5cblxuICAgIGlmICgoc2VsZi5wcmV2U2xpZGVCdG4gPT09ICdqcy1nYWxsZXJ5LXByZXYnKSAmJiAoc2VsZi5uZXh0U2xpZGVCdG4gPT09ICdqcy1nYWxsZXJ5LW5leHQnKSkge1xuXG4gICAgICB0aGlzR2FsbGVyeVdyYXBwZXIuY2xhc3NMaXN0LmFkZCgnYWRkLWNvbnRyb2xsZXJzJyk7XG5cbiAgICAgIHByZXZCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIHByZXZCdG4uY2xhc3NMaXN0LmFkZCgnY29udHJvbC1idG4nLCAnY29udHJvbC1idG5fX2xlZnQnLCAnanMtZ2FsbGVyeS1wcmV2Jyk7XG5cbiAgICAgIHByZXZCdG4uaW5uZXJIVE1MID0gJzxidXR0b24gY2xhc3M9XCJpY29uLWJ0biBpY29uLWJ0bl9sZWZ0XCI+PC9idXR0b24+JztcblxuXG4gICAgICBuZXh0QnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICBuZXh0QnRuLmNsYXNzTGlzdC5hZGQoJ2NvbnRyb2wtYnRuJywgJ2NvbnRyb2wtYnRuX19yaWdodCcsICdqcy1nYWxsZXJ5LW5leHQnKTtcblxuICAgICAgbmV4dEJ0bi5pbm5lckhUTUwgPSAnPGJ1dHRvbiBjbGFzcz1cImljb24tYnRuIGljb24tYnRuX3JpZ2h0XCI+PC9idXR0b24+JztcblxuXG4gICAgICB0aGlzR2FsbGVyeVdyYXBwZXIuYXBwZW5kQ2hpbGQocHJldkJ0bik7XG4gICAgICB0aGlzR2FsbGVyeVdyYXBwZXIuYXBwZW5kQ2hpbGQobmV4dEJ0bik7XG5cbiAgICB9IGVsc2Uge1xuXG4gICAgICBuZXh0QnRuID0gdGhpc0dhbGxlcnlDaGlsZHJlbi5maWx0ZXIoZnVuY3Rpb24oZWwpIHtcblxuICAgICAgICBpZiAoZWwuY2xhc3NMaXN0LmNvbnRhaW5zKHNlbGYubmV4dFNsaWRlQnRuKSkgeyByZXR1cm4gZWw7IH1cblxuICAgICAgfSk7XG5cblxuICAgICAgLy8gY29uc29sZS5sb2cobmV4dFNsaWRlQnV0dG9uKTtcblxuXG4gICAgICBwcmV2QnRuID0gdGhpc0dhbGxlcnlDaGlsZHJlbi5maWx0ZXIoZnVuY3Rpb24oZWwpIHtcblxuICAgICAgICBpZiAoZWwuY2xhc3NMaXN0LmNvbnRhaW5zKHNlbGYucHJldlNsaWRlQnRuKSkgeyByZXR1cm4gZWw7IH1cblxuICAgICAgfSk7XG5cblxuICAgIH1cblxuICAgIC8vIGNvbnNvbGUubG9nKHByZXZTbGlkZUJ1dHRvbik7XG5cbiAgICBsZXQgZ2FsbGVyeSA9IHRoaXNHYWxsZXJ5Q2hpbGRyZW4uZmlsdGVyKGZ1bmN0aW9uKGVsKSB7XG5cbiAgICAgIGlmIChlbC5jbGFzc0xpc3QuY29udGFpbnMoc2VsZi5nYWxsZXJ5KSkgeyByZXR1cm4gZWw7IH1cblxuICAgIH0pO1xuXG4gICAgbGV0IHNsaWRlc05vZGVMaXN0ID0gdGhpc0dhbGxlcnlMaXN0LmNoaWxkTm9kZXM7XG4gICAgLy8gY29uc29sZS5sb2codGhpc0dhbGxlcnlMaXN0KTtcblxuICAgIGxldCBzbGlkZXMgPSBbXS5zbGljZS5jYWxsKHNsaWRlc05vZGVMaXN0KTtcblxuXG4gICAgbGV0IGZpcnN0U2xpZGVzID0gc2xpZGVzLmZpbHRlcihmdW5jdGlvbihlbCkge1xuXG4gICAgICBpZiAoZWwuZ2V0QXR0cmlidXRlKCdpZCcpID09PSAnc2xpZGUxJykgcmV0dXJuIGVsO1xuXG4gICAgfSk7XG5cblxuICAgIC8vIGNvbnNvbGUubG9nKGZpcnN0U2xpZGVzKTtcblxuICAgIGZpcnN0U2xpZGVzLmZvckVhY2goZnVuY3Rpb24oZWwpIHtcblxuICAgICAgZWwuY2xhc3NMaXN0LmFkZCgnaXMtdmlzaWJsZScpO1xuXG4gICAgfSk7XG5cblxuICAgIHRoaXMubmV4dFNsaWRlKHNsaWRlcywgbmV4dEJ0biwgdGhpc0dhbGxlcnlMaXN0KTtcblxuICAgIHRoaXMucHJldlNsaWRlKHNsaWRlcywgcHJldkJ0biwgdGhpc0dhbGxlcnlMaXN0KTtcblxuICB9XG5cblxuXG4gIG5leHRTbGlkZShhbGxTbGlkZXMsIG5leHRCdG4sIGdhbGxlcnlMaXN0KSB7XG4gICAgbGV0IHNlbGYgPSB0aGlzO1xuICBcbiAgICBsZXQgbmV4dFNsaWRlQnRuID0gbmV4dEJ0bjtcbiAgICBsZXQgc2xpZGVzID0gYWxsU2xpZGVzO1xuXG5cbiAgICBsZXQgY3VycmVudFNsaWRlID0gc2xpZGVzLmZpbHRlcihmdW5jdGlvbihlbCkge1xuXG4gICAgICBpZiAoZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdpcy12aXNpYmxlJykpIHsgcmV0dXJuIGVsOyB9XG5cbiAgICB9KTtcblxuICAgIGN1cnJlbnRTbGlkZS5mb3JFYWNoKGZ1bmN0aW9uKGVsZW1lbnQsIGluZGV4LCBhcnJheSkge1xuXG5cbiAgICAgIHNlbGYuY3VycmVudEluZGV4ID0gc2xpZGVzLmluZGV4T2YoYXJyYXlbaW5kZXhdKTtcblxuICAgICAgLy8gY29uc29sZS5sb2coc2xpZGVzLGN1cnJlbnRTbGlkZSxzZWxmLmN1cnJlbnRJbmRleCk7XG5cblxuICAgICAgbmV4dFNsaWRlQnRuLmZvckVhY2goZnVuY3Rpb24oZSkge1xuXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHNsaWRlcyxjdXJyZW50U2xpZGUpO1xuXG4gICAgICAgIGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgIGxldCBpdGVtcyA9IHNlbGYucG9ydGlvbk9mRGF0YTtcbiAgICAgICAgICBsZXQgaXRlbXNMZW5ndGggPSBpdGVtcy5sZW5ndGg7XG4gICAgICAgICAgbGV0IGxpc3QgPSBnYWxsZXJ5TGlzdDtcblxuICAgICAgICAgIC8vIHNlbGYuc3RhcnRPZkRhdGFTZXQgKz0gNTtcblxuICAgICAgICAgIHNlbGYuc2xpY2VEYXRhT25Qb3J0aW9ucyhzZWxmLnBvcnRpb25PZkRhdGEsIDUpO1xuICAgICAgICAgIHNlbGYuYWRkSXRlbXNUb0dhbGxlcnkobGlzdCwgaXRlbXMsIGl0ZW1zTGVuZ3RoKTtcblxuXG5cbiAgICAgICAgICBzbGlkZXNbc2VsZi5jdXJyZW50SW5kZXhdLmNsYXNzTGlzdC50b2dnbGUoJ2lzLXZpc2libGUnKTtcblxuICAgICAgICAgIHNlbGYuY3VycmVudEluZGV4ID0gKHNlbGYuY3VycmVudEluZGV4ICsgMSkgJSBzbGlkZXMubGVuZ3RoO1xuXG4gICAgICAgICAgc2xpZGVzW3NlbGYuY3VycmVudEluZGV4XS5jbGFzc0xpc3QudG9nZ2xlKCdpcy12aXNpYmxlJyk7XG5cbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhzZWxmLmN1cnJlbnRJbmRleCk7XG4gICAgICAgICAgc2VsZi5jaGFuZ2VUaHVtYm5haWxzKCk7XG4gICAgICAgIH0pO1xuXG5cblxuICAgICAgfSk7XG5cblxuICAgIH0pO1xuICB9XG5cbiAgcHJldlNsaWRlKGFsbFNsaWRlcywgcHJldkJ0biwgZ2FsbGVyeUxpc3QpIHtcblxuICAgIGxldCBzZWxmID0gdGhpcztcbiAgICBsZXQgc2xpZGVzID0gYWxsU2xpZGVzO1xuICAgIGxldCBsYXN0U2xpZGUgPSBzbGlkZXMubGVuZ3RoIC0gMTtcblxuICAgIGxldCBwcmV2U2xpZGVCdG4gPSBwcmV2QnRuO1xuXG5cbiAgICBsZXQgY3VycmVudFNsaWRlciA9IHNsaWRlcy5maWx0ZXIoZnVuY3Rpb24oZWwpIHtcblxuICAgICAgaWYgKGVsLmNsYXNzTGlzdC5jb250YWlucygnaXMtdmlzaWJsZScpKSB7IHJldHVybiBlbDsgfVxuXG4gICAgfSk7XG5cblxuXG4gICAgY3VycmVudFNsaWRlci5mb3JFYWNoKGZ1bmN0aW9uKGVsZW1lbnQsIGluZGV4LCBhcnJheSkge1xuXG5cbiAgICAgIHNlbGYuY3VycmVudEluZGV4ID0gc2xpZGVzLmluZGV4T2YoYXJyYXlbaW5kZXhdKTtcblxuXG4gICAgICBwcmV2U2xpZGVCdG4uZm9yRWFjaChmdW5jdGlvbihlbCkge1xuXG5cbiAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuXG4gICAgICAgICAgLy8gY29uc29sZS5sb2coc2xpZGVzKTtcblxuICAgICAgICAgIHNsaWRlc1tzZWxmLmN1cnJlbnRJbmRleF0uY2xhc3NMaXN0LnRvZ2dsZSgnaXMtdmlzaWJsZScpO1xuXG4gICAgICAgICAgaWYgKHNlbGYuY3VycmVudEluZGV4IDw9IDApIHtcblxuXG4gICAgICAgICAgICBzZWxmLmN1cnJlbnRJbmRleCA9IGxhc3RTbGlkZTtcblxuXG4gICAgICAgICAgfSBlbHNlIGlmICgoc2VsZi5jdXJyZW50SW5kZXggPiAwKSAmJiAoc2VsZi5jdXJyZW50SW5kZXggPD0gbGFzdFNsaWRlKSkge1xuXG5cbiAgICAgICAgICAgIHNlbGYuY3VycmVudEluZGV4LS07XG5cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBzbGlkZXNbc2VsZi5jdXJyZW50SW5kZXhdLmNsYXNzTGlzdC50b2dnbGUoJ2lzLXZpc2libGUnKTtcblxuXG4gICAgICAgICAgY29uc29sZS5sb2coc2VsZi5jdXJyZW50SW5kZXgpO1xuICAgICAgICAgIHNlbGYuY2hhbmdlVGh1bWJuYWlscygpO1xuICAgICAgICB9KTtcblxuICAgICAgfSk7XG5cbiAgICB9KTtcbiAgfVxuXG4gIGFkZFRodW1icyhnYWxsZXJ5Q29udGFpbmVyLCBnYWxsZXJ5SXRlbXMpIHtcblxuICAgIGxldCBzZWxmID0gdGhpcztcbiAgICBsZXQgZGF0YSA9IGdhbGxlcnlJdGVtcztcbiAgICBsZXQgY29udGFpbmVyID0gZ2FsbGVyeUNvbnRhaW5lcjtcblxuXG4gICAgbGV0IHRodW1ic1VybCA9IGRhdGEubWFwKGZ1bmN0aW9uKGVsKSB7XG5cbiAgICAgIHJldHVybiBlbC50aHVtYm5haWxVcmw7XG5cbiAgICB9KTtcblxuXG4gICAgbGV0IHRodW1ic0hUTUwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICAgIHRodW1ic0hUTUwuc3R5bGUubWluSGVpZ2h0ID0gc2VsZi50aHVtYnNIZWlnaHQgKyAncHgnO1xuICAgIHRodW1ic0hUTUwuY2xhc3NMaXN0LmFkZCgnZy10aHVtYm5haWxzJyk7XG5cblxuXG4gICAgbGV0IHRodW1ic0hUTUxMaXN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKTtcbiAgICBsZXQgdGh1bWJzSFRNTExpc3RXaWR0aCA9ICh0aGlzLnRodW1ic0xpc3RXaWR0aCk7XG4gICAgdGh1bWJzSFRNTExpc3Quc3R5bGUud2lkdGggPSB0aHVtYnNIVE1MTGlzdFdpZHRoICsgJ3B4JztcblxuICAgIGxldCB0aHVtYnNIVE1MTGlzdEhlaWdodCA9IChzZWxmLnRodW1ic0hlaWdodCAtIDEwKTtcbiAgICB0aHVtYnNIVE1MTGlzdC5zdHlsZS5oZWlnaHQgPSB0aHVtYnNIVE1MTGlzdEhlaWdodCArICdweCc7XG5cbiAgICB0aHVtYnNIVE1MTGlzdC5jbGFzc0xpc3QuYWRkKCdnLXRodW1ibmFpbHNfX2xpc3QnKTtcblxuXG4gICAgdGhpcy50aHVtYnNMaXN0UG9zaXRpb24gPSBzZWxmLmN1cnJlbnRJbmRleCAqIHNlbGYudGh1bWJzSXRlbVdpZHRoICsgNTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGh1bWJzVXJsLmxlbmd0aDsgaSsrKSB7XG5cbiAgICAgIGxldCB0aHVtYnNIVE1MSXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG5cbiAgICAgIGxldCB0aHVtYnNIVE1MSXRlbVdpZHRoID0gKHRoaXMudGh1bWJzSXRlbVdpZHRoKTtcbiAgICAgIHRodW1ic0hUTUxJdGVtLnN0eWxlLndpZHRoID0gdGh1bWJzSFRNTEl0ZW1XaWR0aCArICdweCc7XG4gICAgICB0aHVtYnNIVE1MSXRlbS5zdHlsZS5oZWlnaHQgPSB0aHVtYnNIVE1MTGlzdEhlaWdodCArICdweCc7XG4gICAgICBsZXQgdGh1bWJzSFRNTEl0ZW1Qb3NpdGlvbiA9IHNlbGYuY3VycmVudEluZGV4ICogdGh1bWJzSFRNTEl0ZW1XaWR0aDtcblxuICAgICAgdGh1bWJzSFRNTEl0ZW0uY2xhc3NMaXN0LmFkZCgnZy10aHVtYm5haWxzX19pdGVtJyk7XG5cblxuICAgICAgbGV0IHRodW1ic0hUTUxJdGVtV3JhcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgdGh1bWJzSFRNTEl0ZW1XcmFwLnNldEF0dHJpYnV0ZSgnZGF0YS10aHVtYicsIGkpO1xuICAgICAgdGh1bWJzSFRNTEl0ZW1XcmFwLmNsYXNzTGlzdC5hZGQoJ2ctdGh1bWJuYWlsc19faXRlbS13cmFwJywgJ2pzLXRodW1iLXNsaWRlJyk7XG5cblxuXG4gICAgICBzZWxmLnRodW1iVHJpZ2dlcnMucHVzaCh0aHVtYnNIVE1MSXRlbVdyYXApO1xuXG4gICAgICB0aHVtYnNIVE1MSXRlbVdyYXAuaW5uZXJIVE1MID0gJzxpbWcgc3JjPVwiJyArIHRodW1ic1VybFtpXSArICdcIiBjbGFzcz1cImctdGh1bWJuYWlsc19faW1nXCInICtcbiAgICAgICAgJyBzdHlsZT1cIm1heC13aWR0aDogMTAwJTtcIj4nO1xuXG5cbiAgICAgIHRodW1ic0hUTUxJdGVtLmFwcGVuZENoaWxkKHRodW1ic0hUTUxJdGVtV3JhcCk7XG5cbiAgICAgIHRodW1ic0hUTUxMaXN0LmFwcGVuZENoaWxkKHRodW1ic0hUTUxJdGVtKTtcblxuICAgIH1cblxuICAgIC8vIGNvbnNvbGUubG9nKHNlbGYudGh1bWJUcmlnZ2Vycyk7XG5cbiAgICB0aHVtYnNIVE1MLmFwcGVuZENoaWxkKHRodW1ic0hUTUxMaXN0KTtcblxuICAgIC8vIGNvbnNvbGUubG9nKGNvbnRhaW5lcik7XG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHRodW1ic0hUTUwpO1xuXG4gICAgdGhpcy5tb3ZlVGh1bWJuYWlscyh0aHVtYnNIVE1MTGlzdCwgc2VsZi5jdXJyZW50SW5kZXgpO1xuXG4gICAgdGhpcy50b2dnbGVUaHVtYnMoKTtcbiAgfVxuXG4gIHRvZ2dsZVRodW1icygpIHtcblxuXG4gICAgbGV0IHNlbGYgPSB0aGlzO1xuXG4gICAgbGV0IHRodW1iVHJpZ2dlciA9IHNlbGYudGh1bWJUcmlnZ2VycztcblxuICAgIC8vIGNvbnNvbGUubG9nKHRodW1iVHJpZ2dlcnNMaXN0KTtcblxuICAgIHRodW1iVHJpZ2dlci5mb3JFYWNoKGZ1bmN0aW9uKGVsKSB7XG5cblxuICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuXG5cbiAgICAgICAgbGV0IHRyaWdnZXJTaWJsaW5nU2xpZGVzID0gZWwuY2xvc2VzdCgnLmctdGh1bWJuYWlscycpLnByZXZpb3VzU2libGluZy5jaGlsZE5vZGVzO1xuXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHRyaWdnZXJTaWJsaW5nU2xpZGVzKTtcblxuICAgICAgICBsZXQgc2xpZGVzID0gdHJpZ2dlclNpYmxpbmdTbGlkZXNbMF0uY2hpbGROb2RlcztcblxuICAgICAgICBsZXQgaW5kZXhUb1RyaWdnZXIgPSArZXZlbnQuY3VycmVudFRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdGh1bWInKTtcblxuICAgICAgICBzbGlkZXNbc2VsZi5jdXJyZW50SW5kZXhdLmNsYXNzTGlzdC50b2dnbGUoJ2lzLXZpc2libGUnKTtcblxuICAgICAgICBzZWxmLmN1cnJlbnRJbmRleCA9IGluZGV4VG9UcmlnZ2VyO1xuXG5cbiAgICAgICAgc2VsZi5jaGFuZ2VUaHVtYm5haWxzKCk7XG5cblxuICAgICAgICBzbGlkZXNbc2VsZi5jdXJyZW50SW5kZXhdLmNsYXNzTGlzdC50b2dnbGUoJ2lzLXZpc2libGUnKTtcblxuXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHNlbGYuY3VycmVudEluZGV4KTtcblxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgfVxuXG5cbiAgY2hhbmdlVGh1bWJuYWlscyh0aHVtYnMpIHtcblxuICAgIGxldCBzZWxmID0gdGhpcztcblxuICAgIGxldCB0aHVtYlRyaWdnZXIgPSBzZWxmLnRodW1iVHJpZ2dlcnM7XG4gICAgbGV0IGluZGV4ID0gc2VsZi5jdXJyZW50SW5kZXg7XG5cbiAgICBsZXQgdGh1bWJUcmlnZ2Vyc0xpc3QgPSB0aHVtYlRyaWdnZXJbMF0uY2xvc2VzdCgnLmctdGh1bWJuYWlsc19fbGlzdCcpO1xuXG4gICAgc2VsZi5tb3ZlVGh1bWJuYWlscyh0aHVtYlRyaWdnZXJzTGlzdCwgc2VsZi5jdXJyZW50SW5kZXgpO1xuXG5cbiAgICB0aHVtYlRyaWdnZXIuZm9yRWFjaChmdW5jdGlvbihlbCkge1xuXG4gICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdpcy1hY3RpdmUnKTtcblxuICAgICAgbGV0IHRodW1iRGF0YUF0dHIgPSArZWwuZ2V0QXR0cmlidXRlKCdkYXRhLXRodW1iJyk7XG5cbiAgICAgIC8vIGNvbnNvbGUubG9nKHRodW1iRGF0YUF0dHIpO1xuXG4gICAgICBpZiAodGh1bWJEYXRhQXR0ciA9PT0gaW5kZXgpIHtcblxuICAgICAgICBlbC5jbGFzc0xpc3QudG9nZ2xlKCdpcy1hY3RpdmUnKTtcbiAgICAgIH1cblxuXG4gICAgfSk7XG5cblxuICB9XG5cbiAgbW92ZVRodW1ibmFpbHModGh1bWJzLCBpbmRleCkge1xuXG4gICAgbGV0IHNlbGYgPSB0aGlzO1xuXG4gICAgbGV0IGxlZnQgPSBpbmRleCAqIHNlbGYudGh1bWJzSXRlbVdpZHRoICsgNTtcblxuICAgIGxldCB0b3RhbFdpZHRoID0gdGh1bWJzLm9mZnNldFdpZHRoO1xuICAgIGxldCB2aXNpYmxlV2lkdGggPSBzZWxmLnRodW1ic1dpZHRoO1xuICAgIGxldCBzdG9wUG9pbnQgPSB0b3RhbFdpZHRoIC0gdmlzaWJsZVdpZHRoO1xuXG4gICAgLy8gY29uc29sZS5sb2cobGVmdCx0b3RhbFdpZHRoLHZpc2libGVXaWR0aCxzdG9wUG9pbnQpO1xuXG4gICAgaWYgKGxlZnQgPj0gc3RvcFBvaW50KSB7XG5cbiAgICAgIGxlZnQgPSBzdG9wUG9pbnQ7XG4gICAgfVxuXG4gICAgbGV0IHBvc2l0aW9uTGVmdCA9ICdjYWxjKCAtJyArIGxlZnQgKyAncHgnICsgJyArIDE1cHgpJztcblxuICAgIHRodW1icy5zdHlsZS5sZWZ0ID0gcG9zaXRpb25MZWZ0O1xuXG4gIH1cblxuXG4gIGFkZExvYWRlcigpIHtcblxuICB9XG5cbiAgZnVsbFNjcmVlbk1vZGUoKSB7XG5cblxuXG4gIH1cblxuXG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gc3JjL2pzL2dhbGxlcnkuanMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7OztBQUNBO0FBQ0E7QUFFQTs7O0FBR0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBR0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFFQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUlBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7O0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7OztBQVFBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFHQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFFQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBR0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7O0FBR0E7OztBQUlBOzs7Ozs7QUF4cUJBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///0\n");

/***/ }),
/* 1 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\n(function (ELEMENT) {\n  ELEMENT.matches = ELEMENT.matches || ELEMENT.mozMatchesSelector || ELEMENT.msMatchesSelector || ELEMENT.oMatchesSelector || ELEMENT.webkitMatchesSelector;\n  ELEMENT.closest = ELEMENT.closest || function closest(selector) {\n    if (!this) return null;\n    if (this.matches(selector)) return this;\n    if (!this.parentElement) {\n      return null;\n    } else return this.parentElement.closest(selector);\n  };\n})(Element.prototype);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvanMvcG9seWZpbGxzLmpzPzlkYTYiXSwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKEVMRU1FTlQpIHtcclxuICBFTEVNRU5ULm1hdGNoZXMgPSBFTEVNRU5ULm1hdGNoZXMgfHwgRUxFTUVOVC5tb3pNYXRjaGVzU2VsZWN0b3IgfHwgRUxFTUVOVC5tc01hdGNoZXNTZWxlY3RvciB8fCBFTEVNRU5ULm9NYXRjaGVzU2VsZWN0b3IgfHwgRUxFTUVOVC53ZWJraXRNYXRjaGVzU2VsZWN0b3I7XHJcbiAgRUxFTUVOVC5jbG9zZXN0ID0gRUxFTUVOVC5jbG9zZXN0IHx8IGZ1bmN0aW9uIGNsb3Nlc3Qoc2VsZWN0b3IpIHtcclxuICAgIGlmICghdGhpcykgcmV0dXJuIG51bGw7XHJcbiAgICBpZiAodGhpcy5tYXRjaGVzKHNlbGVjdG9yKSkgcmV0dXJuIHRoaXM7XHJcbiAgICBpZiAoIXRoaXMucGFyZW50RWxlbWVudCkge3JldHVybiBudWxsO31cclxuICAgIGVsc2UgcmV0dXJuIHRoaXMucGFyZW50RWxlbWVudC5jbG9zZXN0KHNlbGVjdG9yKTtcclxuICB9O1xyXG59KEVsZW1lbnQucHJvdG90eXBlKSk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gc3JjL2pzL3BvbHlmaWxscy5qcyJdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///1\n");

/***/ }),
/* 2 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\n__webpack_require__(1);\n\nvar _gallery = __webpack_require__(0);\n\nvar _gallery2 = _interopRequireDefault(_gallery);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar app = {\n\n  initialize: function initialize(settings) {\n\n    var gallery = new _gallery2.default(settings);\n\n    gallery.initialize();\n  }\n\n  // getGallery: function(gallery) {\n\n  //   gallery.getData();\n\n  //   console.log('getGallery');\n  // },\n\n  // showGallery: function(galleryData) {\n\n  //   let gallery = galleryData;\n  //   console.log('showGallery');\n\n  //   gallery.showData();\n\n\n  // }\n\n};\n\napp.initialize({\n\n  galleryAmount: '10',\n  galleryItemSelector: '.js-gallery-item',\n  prevSlide: 'js-gallery-prev1',\n  nextSlide: 'js-gallery-next1',\n  container: '.js-gallery-wrap',\n  gallery: 'js-gallery',\n\n  thumbs: true\n  // loader: true,\n  // fullScreenMode: true\n\n});\n\napp.initialize({\n\n  galleryAmount: '100',\n  galleryItemSelector: '.js-gallery-item',\n  prevSlide: 'js-gallery-prev2',\n  nextSlide: 'js-gallery-next2',\n  container: '.js-gallery-wrap2',\n  gallery: 'js-gallery',\n\n  thumbs: true\n  // loader: true,\n  // fullScreenMode: true\n\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvanMvYXBwLmpzPzcxNmYiXSwic291cmNlc0NvbnRlbnQiOlsiXG5pbXBvcnQgJy4vcG9seWZpbGxzJztcblxuaW1wb3J0IEdhbGxlcnkgZnJvbSAnLi9nYWxsZXJ5JztcblxuXG5cblxuXG52YXIgYXBwID0ge1xuXG4gIGluaXRpYWxpemU6IGZ1bmN0aW9uKHNldHRpbmdzKSB7XG5cbiAgICBsZXQgZ2FsbGVyeSA9IG5ldyBHYWxsZXJ5KHNldHRpbmdzKTtcbiAgICBcbiAgICBnYWxsZXJ5LmluaXRpYWxpemUoKTtcbiAgICAgIFxuICB9LFxuXG4gIC8vIGdldEdhbGxlcnk6IGZ1bmN0aW9uKGdhbGxlcnkpIHtcbiAgICAgIFxuICAvLyAgIGdhbGxlcnkuZ2V0RGF0YSgpO1xuXG4gIC8vICAgY29uc29sZS5sb2coJ2dldEdhbGxlcnknKTtcbiAgLy8gfSxcblxuICAvLyBzaG93R2FsbGVyeTogZnVuY3Rpb24oZ2FsbGVyeURhdGEpIHtcblxuICAvLyAgIGxldCBnYWxsZXJ5ID0gZ2FsbGVyeURhdGE7XG4gIC8vICAgY29uc29sZS5sb2coJ3Nob3dHYWxsZXJ5Jyk7XG5cbiAgLy8gICBnYWxsZXJ5LnNob3dEYXRhKCk7XG5cblxuICAvLyB9XG5cbn07XG5cblxuYXBwLmluaXRpYWxpemUoe1xuXG4gICAgXG4gIGdhbGxlcnlBbW91bnQ6ICcxMCcsXG4gIGdhbGxlcnlJdGVtU2VsZWN0b3I6ICcuanMtZ2FsbGVyeS1pdGVtJyxcbiAgcHJldlNsaWRlOiAnanMtZ2FsbGVyeS1wcmV2MScsXG4gIG5leHRTbGlkZTogJ2pzLWdhbGxlcnktbmV4dDEnLFxuICBjb250YWluZXI6ICcuanMtZ2FsbGVyeS13cmFwJyxcbiAgZ2FsbGVyeTogJ2pzLWdhbGxlcnknLFxuIFxuICB0aHVtYnM6IHRydWVcbiAgLy8gbG9hZGVyOiB0cnVlLFxuICAvLyBmdWxsU2NyZWVuTW9kZTogdHJ1ZVxuXG59KTtcblxuXG5hcHAuaW5pdGlhbGl6ZSh7XG5cbiAgICBcbiAgZ2FsbGVyeUFtb3VudDogJzEwMCcsXG4gIGdhbGxlcnlJdGVtU2VsZWN0b3I6ICcuanMtZ2FsbGVyeS1pdGVtJyxcbiAgcHJldlNsaWRlOiAnanMtZ2FsbGVyeS1wcmV2MicsXG4gIG5leHRTbGlkZTogJ2pzLWdhbGxlcnktbmV4dDInLFxuICBjb250YWluZXI6ICcuanMtZ2FsbGVyeS13cmFwMicsXG4gIGdhbGxlcnk6ICdqcy1nYWxsZXJ5JyxcbiBcbiAgdGh1bWJzOiB0cnVlXG4gIC8vIGxvYWRlcjogdHJ1ZSxcbiAgLy8gZnVsbFNjcmVlbk1vZGU6IHRydWVcblxufSk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gc3JjL2pzL2FwcC5qcyJdLCJtYXBwaW5ncyI6Ijs7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBMUJBO0FBQ0E7QUE2QkE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFiQTtBQUNBO0FBZ0JBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBYkEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///2\n");

/***/ })
/******/ ]);