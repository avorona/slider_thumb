/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// identity function for calling harmony imports with the correct context
/******/ 	__webpack_require__.i = function(value) { return value; };
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "js/";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 2);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n// send request\n// initialize slider\n// inititalize thumbnails\n// add navigation\n// add loader\n// check for reusable\n// +bonus: add smooth fade in/ fade out \n// +bonus create buttons on the fly\n\n\n// При загрузке страницы:\n\n// 1.ajax-запрос на картинки   ==+!+==\n// 2.принять запрос, вырезать первые пять [0...5]  ==+!+==\n// 3. создать оболочку и список для элементов галлереи  ==+!+==\n// 4. Создать пять элементов галлереи  ==+!+==\n// 5. создать кнопки управления галлерей  ==+!+==\n// 6. создать миниатюры для этих пяти картинок  ==+!+==\n\n\n// При нажатии на кнопку даллеЖ\n\n\n// 1. вырезать из запроса следующие пять картинок [5...10]  ==+!+==\n// 2. создать следующие пять элементов галлереи  ==+!+==\n// 3. создать миниатюры для этих пяти картинок  ==+!+==\n\n// Ограничения:\n\n// --когда достигнут предел картинок, остановиться и ничего не создавать ==+!+==\n// \n\n\n// фичи:\n\n// проклацывание по миниатюрам больших фото ==+!+==\n// увеличенные фото на весь экран при нажатии на большое фото\n// когда грузяться следующие пять картинок, показать прелоадер ==+!+==\n\n\nvar Gallery = function () {\n  function Gallery(settings) {\n    _classCallCheck(this, Gallery);\n\n    this.settings = settings;\n    this.dataAmount = settings.galleryAmount;\n    this.galleryWrapper = settings.container;\n    this.galleryItemSelector = settings.galleryItemSelector;\n    this.parsedResponse = [];\n    this.data = [];\n    this.portionOfData = [];\n    this.dataSet = {\n      start: 0,\n      step: 5,\n      end: 0,\n      totalLength: 0\n    };\n\n    this.thumbnails = {\n\n      height: 100,\n      width: 0,\n      itemWidth: 114,\n      list: 0,\n      listHeight: 90,\n      url: [],\n      triggers: []\n    };\n    this.gallery = {\n      width: 0,\n      items: [],\n      total: [],\n      prevBtnSelector: settings.prevSlide || false,\n      prevBtnNode: 0,\n      nextBtnSelector: settings.nextSlide || false,\n      nextBtnNode: 0\n    };\n    this.galleryList;\n    this.currentIndex = 0;\n\n    this.initialLoad();\n  }\n\n  _createClass(Gallery, [{\n    key: 'initialLoad',\n    value: function initialLoad() {\n      var _this = this;\n\n      // 1.ajax-запрос на картинки \n      // 2.принять запрос,\n      //2.2. вырезать указанное количество картинок\n      //2.5 отобразить первые пять [0...5]\n      // 3. создать оболочку и список для элементов галлереи\n      // 4. Создать пять элементов галлереи\n      // 5. создать кнопки управления галлерей\n      // 6. создать миниатюры для этих пяти картинок\n      var self = this;\n\n      new Promise(function (resolve, reject) {\n\n        self.toggleLoader(true);\n\n        setTimeout(function () {\n          resolve();\n        }, 1000);\n      }).then(function () {\n\n        _this.fetch();\n      }).catch(function (reject) {\n\n        throw new Error('check a promise chain');\n      });\n    }\n  }, {\n    key: 'secondaryLoad',\n    value: function secondaryLoad() {\n\n      this.initiateData(true);\n    }\n  }, {\n    key: 'createCORSRequest',\n    value: function createCORSRequest(method, url) {\n\n      var xhr = new XMLHttpRequest();\n      if ('withCredentials' in xhr) {\n\n        // Check if the XMLHttpRequest object has a \"withCredentials\" property.\n        // \"withCredentials\" only exists on XMLHTTPRequest2 objects.\n        xhr.open(method, url, true);\n      } else if (typeof XDomainRequest != 'undefined') {\n\n        // Otherwise, check if XDomainRequest.\n        // XDomainRequest only exists in IE, and is IE's way of making CORS requests.\n        xhr = new XDomainRequest();\n        xhr.open(method, url);\n      } else {\n\n        // Otherwise, CORS is not supported by the browser.\n        xhr = null;\n      }\n      // console.log(xhr);\n      return xhr;\n    }\n  }, {\n    key: 'fetch',\n    value: function fetch() {\n\n      var self = this;\n\n      var url = 'images.json';\n\n      var xhr = self.createCORSRequest('GET', url);\n\n      if (!xhr) {\n        throw new Error('CORS not supported');\n      }\n\n      // Response handlers.\n      xhr.onload = function () {\n        var responseText = xhr.responseText;\n\n        self.handleResponse(responseText);\n      };\n\n      xhr.onerror = function () {\n\n        throw new Error('Woops, there was an error making the request.');\n      };\n\n      xhr.send();\n    }\n  }, {\n    key: 'handleResponse',\n    value: function handleResponse(response) {\n\n      this.parsedResponse = JSON.parse(response);\n\n      this.initiateData();\n    }\n  }, {\n    key: 'initiateData',\n    value: function initiateData(secondary) {\n      var _this2 = this;\n\n      var status = secondary || false;\n\n      var self = this;\n\n      if (status) {\n\n        new Promise(function (resolve, reject) {\n\n          setTimeout(function () {\n            self.toggleLoader(false);\n          }, 1000);\n\n          resolve();\n        }).then(function () {\n          self.sliceDataOnPortions(status);\n        }).then(function () {\n          self.showData(true);\n          // console.log('2');\n        }).then(function () {\n          self.toggleLoader(false);\n          // console.log('3');\n        }).catch(function (reject) {\n          // console.log('da');\n        });\n      } else {\n\n        // self.sliceDataOnPortions();\n        // self.showData();\n\n        new Promise(function (resolve, reject) {\n\n          self.toggleLoader(true);\n\n          // console.log('1');\n          resolve();\n        }).then(function () {\n          var items = self.parsedResponse;\n          // console.log(items);\n          var limittedArray = items.slice(0, _this2.dataAmount);\n\n          limittedArray.map(function (el) {\n\n            self.data.push(el);\n          });\n          // console.log('2');\n        }).then(function () {\n          self.sliceDataOnPortions();\n          // console.log('3');\n        }).then(function () {\n\n          self.showData();\n          // console.log('4');\n        });\n      }\n    }\n  }, {\n    key: 'sliceDataOnPortions',\n    value: function sliceDataOnPortions(secondary) {\n\n      var status = secondary || false;\n      var self = this;\n      var items = self.data;\n\n      var step = this.dataSet.step;\n      var start = this.dataSet.start;\n      var end = this.dataSet.end;\n\n      end = start + step;\n\n      self.dataSet.totalLength = end;\n\n      // console.log(self.dataSet.totalLength);\n\n      if (status) {\n        // console.log(start,items.length,step);\n\n        if (start < items.length - step) {\n\n          // console.log(items.length);\n\n          start += step;\n          end = start + step;\n\n          // console.log(start, end);\n\n          var portionArray = items.slice(start, end);\n\n          self.portionOfData.length = 0;\n\n          portionArray.map(function (el) {\n\n            self.portionOfData.push(el);\n          });\n\n          this.dataSet.start = start;\n          this.dataSet.end = end;\n        } else {\n\n          self.portionOfData.length = 0;\n        }\n      } else {\n\n        var _portionArray = items.slice(start, end);\n\n        _portionArray.map(function (el) {\n\n          self.portionOfData.push(el);\n        });\n      }\n    }\n  }, {\n    key: 'showData',\n    value: function showData(secondary) {\n\n      var status = secondary || false;\n\n      var self = this;\n\n      var galleryContainer = [].slice.call(document.querySelectorAll(this.galleryWrapper));\n\n      galleryContainer.forEach(function (el) {\n\n        self.fillGallery(el, status);\n\n        self.addThumbs(el, status);\n      });\n    }\n  }, {\n    key: 'fillGallery',\n    value: function fillGallery(galleryContainer, secondary) {\n\n      var status = secondary || false;\n      var self = this;\n      var items = self.portionOfData;\n      var container = galleryContainer;\n\n      if (!status) {\n\n        var itemsAmount = self.dataSet.totalLength;\n        var galleryMinHeight = container.offsetHeight;\n        var thumbnailsHeight = this.thumbnails.height;\n        // console.log(self.dataSet.totalLength);\n\n        var gallery = document.createElement('div');\n\n        gallery.classList.add('gallery', 'js-gallery');\n\n        var galleryHeight = galleryMinHeight - thumbnailsHeight;\n        gallery.style.minHeight = galleryHeight + 'px';\n\n        container.appendChild(gallery);\n\n        var galleryWidth = gallery.offsetWidth;\n\n        self.gallery.width = galleryWidth;\n\n        var galleryList = document.createElement('ul');\n\n        galleryList.classList.add('gallery__list', 'js-gallery-list');\n        galleryList.style.minHeight = galleryHeight + 'px';\n\n        self.galleryList = galleryList;\n\n        self.thumbnails.width = self.thumbnails.itemWidth * (self.dataSet.totalLength + 1);\n\n        console.log(self.thumbnails.itemWidth, self.dataSet.totalLength, self.thumbnails.width);\n        new Promise(function (resolve, reject) {\n\n          self.addItemsToGallery(self.galleryList, items);\n\n          resolve();\n        }).then(function () {\n          self.showFirstItems(galleryList);\n        }).then(function () {\n          gallery.appendChild(galleryList);\n        }).then(function () {\n          self.bindEvents();\n        }).then(function () {\n          self.navigation(container);\n        });\n      } else {\n\n        self.thumbnails.width = self.thumbnails.itemWidth * (self.dataSet.totalLength + 1);\n        console.log(self.thumbnails.itemWidth, self.dataSet.totalLength, self.thumbnails.width);\n\n        new Promise(function (resolve, reject) {\n\n          self.addItemsToGallery(self.galleryList, items);\n\n          resolve();\n        }).then(function () {\n          self.bindEvents();\n        });\n        // console.log(self.galleryList);\n\n      }\n\n      return true;\n    }\n  }, {\n    key: 'addItemsToGallery',\n    value: function addItemsToGallery(list, items) {\n\n      var self = this;\n\n      // console.log(list);\n\n      var galleryList = list;\n      var data = items;\n      var dataLength = data.length;\n      var galleryMaxWidth = this.gallery.width;\n\n      self.dataSet.totalLength += data.length;\n\n      // console.log(self.dataSet.totalLength);\n\n\n      for (var j = 0; j < dataLength; j++) {\n\n        var galleryItem = document.createElement('li');\n        galleryItem.classList.add('gallery__item', self.galleryItemSelector);\n\n        var galleryItemID = 'slide' + data[j].id;\n        galleryItem.setAttribute('id', galleryItemID);\n\n        galleryItem.style.maxWidth = galleryMaxWidth + 'px';\n\n        galleryItem.innerHTML = '<img src=\"' + data[j].url + '\" class=\"gallery__img\"> ';\n\n        galleryList.appendChild(galleryItem);\n      }\n\n      var slidesNodeList = list.childNodes;\n\n      // console.log(slidesNodeList);\n\n      var slides = [].slice.call(slidesNodeList);\n\n      // console.log(slides);\n\n      self.gallery.items = slides;\n\n      // console.log(self.gallery.total.length, self.dataAmount);\n\n      if (self.gallery.total.length < self.dataAmount) {\n\n        self.gallery.total = self.gallery.items.map(function (el) {\n\n          return el;\n        });\n      }\n    }\n  }, {\n    key: 'bindEvents',\n    value: function bindEvents() {\n\n      this.fullPageMode();\n    }\n  }, {\n    key: 'fullPageMode',\n    value: function fullPageMode() {\n\n      var self = this;\n      self.createPoPUp();\n    }\n  }, {\n    key: 'getImgSrc',\n    value: function getImgSrc(r) {\n      var self = this;\n\n      var popup = r;\n\n      var current = document.querySelectorAll('.' + this.galleryItemSelector);\n\n      current.forEach(function (el) {\n\n        el.addEventListener('click', function () {\n          // console.log(el);\n          var c = [].slice.call(el.children).find(function (e) {\n\n            var r = e.hasAttribute('src') ? e : false;\n\n            return r;\n          });\n\n          popup.imgSrc = c.getAttribute('src');\n          self.showFullPageImg(popup);\n          // console.log(popup);\n        });\n      });\n    }\n  }, {\n    key: 'createPoPUp',\n    value: function createPoPUp(r) {\n\n      var self = this;\n\n      var popup = {};\n\n      var modal = document.querySelectorAll('.modal');\n\n      if (modal.length === 0) {\n\n        var body = document.querySelector('body');\n\n        var container = document.createElement('div');\n        container.classList.add('modal', 'modal__fp');\n\n        var inner = document.createElement('div');\n        inner.classList.add('modal__inner');\n\n        container.appendChild(inner);\n\n        var content = document.createElement('div');\n        content.classList.add('modal__content');\n        content.innerHTML = '<span class=\"modal__closeBtn\" ></span>' + '<img class=\"modal__img\" src=\"\">';\n\n        inner.appendChild(content);\n\n        popup.wrap = container;\n        popup.content = content;\n\n        container.appendChild(content);\n\n        body.appendChild(container);\n\n        self.getImgSrc(popup);\n      };\n    }\n  }, {\n    key: 'showFullPageImg',\n    value: function showFullPageImg(con) {\n\n      var imgSrc = con.imgSrc;\n      var wrap = con.wrap;\n      var content = con.content;\n      console.log(content);\n\n      var body = document.querySelector('body');\n\n      var img = [].slice.call(content.children).find(function (el) {\n        console.log(el);\n\n        if (el.classList.contains('modal__img')) return el;\n      });\n\n      img.setAttribute('src', imgSrc);\n\n      wrap.classList.add('is-active');\n      body.classList.toggle('over-hid');\n      // wrap.appendChild(content);\n\n      var close = document.querySelectorAll('.modal__closeBtn');\n\n      close.forEach(function (el) {\n\n        el.addEventListener('click', function () {\n          console.log(el);\n          el.closest('.modal').classList.remove('is-active');\n          body.classList.remove('over-hid');\n        });\n      });\n    }\n  }, {\n    key: 'showFirstItems',\n    value: function showFirstItems(list) {\n\n      var self = this;\n\n      var slides = self.gallery.items;\n\n      var firstSlides = slides.filter(function (el) {\n\n        if (el.getAttribute('id') === 'slide1') return el;\n      });\n\n      firstSlides.forEach(function (el) {\n\n        el.classList.add('is-visible');\n      });\n    }\n  }, {\n    key: 'navigation',\n    value: function navigation(galleryContainer) {\n\n      var self = this;\n      var thisGalleryWrapper = galleryContainer;\n      var thisGalleryList = this.galleryList;\n      var prevBtn = void 0,\n          nextBtn = void 0;\n\n      var thisGalleryChildren = [].slice.call(thisGalleryWrapper.children);\n\n      // console.log(thisGalleryChildren);\n\n      // console.log(status);\n\n      if (!self.gallery.prevBtnSelector && !self.gallery.nextBtnSelector) {\n\n        thisGalleryWrapper.classList.add('add-controllers');\n\n        prevBtn = document.createElement('div');\n        prevBtn.classList.add('control-btn', 'control-btn__left', 'js-gallery-prev');\n\n        prevBtn.innerHTML = '<button class=\"icon-btn icon-btn_left\"></button>';\n\n        nextBtn = document.createElement('div');\n        nextBtn.classList.add('control-btn', 'control-btn__right', 'js-gallery-next');\n\n        nextBtn.innerHTML = '<button class=\"icon-btn icon-btn_right\"></button>';\n\n        thisGalleryWrapper.appendChild(prevBtn);\n        thisGalleryWrapper.appendChild(nextBtn);\n      } else {\n\n        nextBtn = thisGalleryChildren.filter(function (el) {\n\n          if (el.classList.contains(self.gallery.nextBtnSelector)) {\n            return el;\n          }\n        });\n\n        // console.log(nextSlideButton);\n\n\n        prevBtn = thisGalleryChildren.filter(function (el) {\n\n          if (el.classList.contains(self.gallery.prevBtnSelector)) {\n            return el;\n          }\n        });\n      }\n\n      self.gallery.prevBtnNode = prevBtn;\n      self.gallery.nextBtnNode = nextBtn;\n\n      this.nextSlide();\n\n      this.prevSlide();\n    }\n  }, {\n    key: 'nextSlide',\n    value: function nextSlide() {\n\n      var self = this;\n      var nextSlideBtn = self.gallery.nextBtnNode;\n\n      // console.log(slides,currentSlide,self.currentIndex);\n\n\n      nextSlideBtn.forEach(function (e) {\n\n        // console.log(slides,currentSlide);\n\n        e.addEventListener('click', function () {\n\n          var slides = self.gallery.items;\n\n          // console.log(self.gallery.items);\n\n\n          var currentIndex = slides.findIndex(function (el) {\n\n            if (el.classList.contains('is-visible')) {\n              return el;\n            }\n          });\n\n          self.currentIndex = currentIndex;\n\n          self.secondaryLoad();\n\n          slides[self.currentIndex].classList.toggle('is-visible');\n\n          self.currentIndex = (self.currentIndex + 1) % slides.length;\n\n          slides[self.currentIndex].classList.toggle('is-visible');\n\n          // console.log(self.currentIndex);\n          self.changeThumbnails();\n        });\n      });\n    }\n  }, {\n    key: 'prevSlide',\n    value: function prevSlide() {\n      var self = this;\n      var prevSlideBtn = self.gallery.prevBtnNode;\n\n      prevSlideBtn.forEach(function (el) {\n\n        el.addEventListener('click', function () {\n\n          var slides = self.gallery.total;\n\n          var lastSlide = slides.length - 1;\n\n          var currentIndex = slides.findIndex(function (el) {\n\n            if (el.classList.contains('is-visible')) {\n              return el;\n            }\n          });\n\n          self.currentIndex = currentIndex;\n          // console.log(slides, currentIndex); \n\n          slides[self.currentIndex].classList.toggle('is-visible');\n\n          if (self.currentIndex <= 0) {\n\n            self.currentIndex = lastSlide;\n          } else if (self.currentIndex > 0 && self.currentIndex <= lastSlide) {\n\n            self.currentIndex--;\n          }\n\n          slides[self.currentIndex].classList.toggle('is-visible');\n\n          // console.log(self.currentIndex);\n          self.changeThumbnails();\n        });\n      });\n    }\n  }, {\n    key: 'addThumbs',\n    value: function addThumbs(galleryContainer, secondary) {\n\n      var self = this;\n      var status = secondary || false;\n      var data = self.portionOfData;\n      var container = galleryContainer;\n\n      self.thumbnails.url = data.map(function (el) {\n\n        return el.thumbnailUrl;\n      });\n\n      if (!status) {\n\n        var thumbs = document.createElement('div');\n\n        thumbs.style.minHeight = self.thumbsHeight + 'px';\n        thumbs.classList.add('g-thumbnails');\n\n        var thumbsList = document.createElement('ul');\n        var stylingPadding = 10;\n        var thumbsListWidth = self.thumbnails.width;\n        // console.log(self.thumbnails.width,thumbsListWidth);\n        thumbsList.style.width = thumbsListWidth + 'px';\n\n        var thumbsListHeight = self.thumbsListHeight;\n        thumbsList.style.height = thumbsListHeight + 'px';\n\n        thumbsList.classList.add('g-thumbnails__list');\n\n        self.thumbnails.list = thumbsList;\n\n        this.addThumbsItem();\n\n        thumbs.appendChild(thumbsList);\n\n        // console.log(container);\n        container.appendChild(thumbs);\n\n        this.moveThumbnails();\n\n        this.toggleThumbs();\n      } else {\n\n        var _thumbsListWidth = self.thumbnails.width;\n        // console.log(self.thumbnails.width,thumbsListWidth);\n        self.thumbnails.list.style.width = _thumbsListWidth + 'px';\n\n        this.addThumbsItem();\n\n        this.moveThumbnails();\n\n        this.toggleThumbs();\n      }\n    }\n  }, {\n    key: 'addThumbsItem',\n    value: function addThumbsItem() {\n\n      var self = this;\n      var thumbs = self.thumbnails.url;\n      var data = self.portionOfData;\n      var thumbsList = self.thumbnails.list;\n      var thumbsItemWidth = this.thumbnails.itemWidth;\n      var thumbsHeight = self.thumbnails.listHeight;\n\n      // console.log(thumbs, data, thumbsHeight);  \n      for (var i = 0; i < data.length; i++) {\n\n        var thumbsItem = document.createElement('li');\n\n        thumbsItem.style.width = thumbsItemWidth + 'px';\n        thumbsItem.style.height = thumbsHeight + 'px';\n\n        thumbsItem.classList.add('g-thumbnails__item');\n\n        var equalizer = data[i].id - 1;\n\n        var thumbsItemWrap = document.createElement('div');\n        thumbsItemWrap.setAttribute('data-thumb', equalizer);\n        thumbsItemWrap.classList.add('g-thumbnails__item-wrap', 'js-thumb-slide');\n\n        self.thumbnails.triggers.push(thumbsItemWrap);\n\n        thumbsItemWrap.innerHTML = '<img src=\"' + thumbs[i] + '\" class=\"g-thumbnails__img\"' + ' style=\"max-width: 100%;\">';\n\n        thumbsItem.appendChild(thumbsItemWrap);\n\n        thumbsList.appendChild(thumbsItem);\n      }\n    }\n  }, {\n    key: 'toggleThumbs',\n    value: function toggleThumbs() {\n\n      var self = this;\n\n      var thumbTrigger = self.thumbnails.triggers;\n\n      // console.log(thumbTriggersList);\n\n      thumbTrigger.forEach(function (el) {\n\n        el.addEventListener('click', function (event) {\n\n          var triggerSiblingSlides = el.closest('.g-thumbnails').previousSibling.childNodes;\n\n          // console.log(triggerSiblingSlides);\n\n          var slides = [].slice.call(triggerSiblingSlides[0].childNodes);\n\n          // console.log(slides,self.currentIndex);\n\n          var indexToTrigger = +event.currentTarget.getAttribute('data-thumb');\n\n          slides[self.currentIndex].classList.toggle('is-visible');\n\n          self.currentIndex = indexToTrigger;\n          // console.log(slides,self.currentIndex);\n          self.changeThumbnails();\n\n          slides[self.currentIndex].classList.toggle('is-visible');\n        });\n      });\n    }\n  }, {\n    key: 'changeThumbnails',\n    value: function changeThumbnails() {\n\n      var self = this;\n      var index = self.currentIndex;\n      var thumbTrigger = self.thumbnails.triggers;\n\n      self.moveThumbnails();\n\n      thumbTrigger.forEach(function (el) {\n\n        el.classList.remove('is-active');\n\n        var thumbDataAttr = +el.getAttribute('data-thumb');\n\n        // console.log(thumbDataAttr);\n\n        if (thumbDataAttr === index) {\n\n          el.classList.toggle('is-active');\n        }\n      });\n    }\n  }, {\n    key: 'moveThumbnails',\n    value: function moveThumbnails() {\n\n      var self = this;\n      var index = self.currentIndex;\n      var left = index * self.thumbnails.itemWidth + 5;\n\n      var totalWidth = self.thumbnails.width;\n      var visibleWidth = 600;\n      var stopPoint = totalWidth - visibleWidth;\n\n      // console.log(left,totalWidth,visibleWidth,stopPoint);\n\n      if (left >= stopPoint) {\n\n        left = stopPoint;\n      }\n\n      var positionLeft = 'calc( -' + left + 'px' + ' + 15px)';\n\n      self.thumbnails.list.style.left = positionLeft;\n    }\n  }, {\n    key: 'toggleLoader',\n    value: function toggleLoader(initial) {\n\n      var self = this;\n\n      var container = document.querySelector(self.galleryWrapper);\n\n      // console.log(container);\n\n      var loaderWrapper = [].slice.call(container.children).find(function (el) {\n\n        if (el.classList.contains('js-loader-wrapper')) return el;\n      });\n\n      var loader = [].slice.call(loaderWrapper.children).find(function (el) {\n\n        if (el.classList.contains('loader')) return el;\n      });\n\n      // console.log(loader);\n\n      loader.classList.toggle('is-active');\n\n      return true;\n    }\n  }]);\n\n  return Gallery;\n}();\n\nexports.default = Gallery;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvanMvZ2FsbGVyeS5qcz9iY2ZjIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNlbmQgcmVxdWVzdFxuLy8gaW5pdGlhbGl6ZSBzbGlkZXJcbi8vIGluaXRpdGFsaXplIHRodW1ibmFpbHNcbi8vIGFkZCBuYXZpZ2F0aW9uXG4vLyBhZGQgbG9hZGVyXG4vLyBjaGVjayBmb3IgcmV1c2FibGVcbi8vICtib251czogYWRkIHNtb290aCBmYWRlIGluLyBmYWRlIG91dCBcbi8vICtib251cyBjcmVhdGUgYnV0dG9ucyBvbiB0aGUgZmx5XG5cblxuXG5cblxuXG4vLyDQn9GA0Lgg0LfQsNCz0YDRg9C30LrQtSDRgdGC0YDQsNC90LjRhtGLOlxuXG4vLyAxLmFqYXgt0LfQsNC/0YDQvtGBINC90LAg0LrQsNGA0YLQuNC90LrQuCAgID09KyErPT1cbi8vIDIu0L/RgNC40L3Rj9GC0Ywg0LfQsNC/0YDQvtGBLCDQstGL0YDQtdC30LDRgtGMINC/0LXRgNCy0YvQtSDQv9GP0YLRjCBbMC4uLjVdICA9PSshKz09XG4vLyAzLiDRgdC+0LfQtNCw0YLRjCDQvtCx0L7Qu9C+0YfQutGDINC4INGB0L/QuNGB0L7QuiDQtNC70Y8g0Y3Qu9C10LzQtdC90YLQvtCyINCz0LDQu9C70LXRgNC10LggID09KyErPT1cbi8vIDQuINCh0L7Qt9C00LDRgtGMINC/0Y/RgtGMINGN0LvQtdC80LXQvdGC0L7QsiDQs9Cw0LvQu9C10YDQtdC4ICA9PSshKz09XG4vLyA1LiDRgdC+0LfQtNCw0YLRjCDQutC90L7Qv9C60Lgg0YPQv9GA0LDQstC70LXQvdC40Y8g0LPQsNC70LvQtdGA0LXQuSAgPT0rISs9PVxuLy8gNi4g0YHQvtC30LTQsNGC0Ywg0LzQuNC90LjQsNGC0Y7RgNGLINC00LvRjyDRjdGC0LjRhSDQv9GP0YLQuCDQutCw0YDRgtC40L3QvtC6ICA9PSshKz09XG5cblxuXG4vLyDQn9GA0Lgg0L3QsNC20LDRgtC40Lgg0L3QsCDQutC90L7Qv9C60YMg0LTQsNC70LvQtdCWXG5cblxuLy8gMS4g0LLRi9GA0LXQt9Cw0YLRjCDQuNC3INC30LDQv9GA0L7RgdCwINGB0LvQtdC00YPRjtGJ0LjQtSDQv9GP0YLRjCDQutCw0YDRgtC40L3QvtC6IFs1Li4uMTBdICA9PSshKz09XG4vLyAyLiDRgdC+0LfQtNCw0YLRjCDRgdC70LXQtNGD0Y7RidC40LUg0L/Rj9GC0Ywg0Y3Qu9C10LzQtdC90YLQvtCyINCz0LDQu9C70LXRgNC10LggID09KyErPT1cbi8vIDMuINGB0L7Qt9C00LDRgtGMINC80LjQvdC40LDRgtGO0YDRiyDQtNC70Y8g0Y3RgtC40YUg0L/Rj9GC0Lgg0LrQsNGA0YLQuNC90L7QuiAgPT0rISs9PVxuXG4vLyDQntCz0YDQsNC90LjRh9C10L3QuNGPOlxuXG4vLyAtLdC60L7Qs9C00LAg0LTQvtGB0YLQuNCz0L3Rg9GCINC/0YDQtdC00LXQuyDQutCw0YDRgtC40L3QvtC6LCDQvtGB0YLQsNC90L7QstC40YLRjNGB0Y8g0Lgg0L3QuNGH0LXQs9C+INC90LUg0YHQvtC30LTQsNCy0LDRgtGMID09KyErPT1cbi8vIFxuXG5cbi8vINGE0LjRh9C4OlxuXG4vLyDQv9GA0L7QutC70LDRhtGL0LLQsNC90LjQtSDQv9C+INC80LjQvdC40LDRgtGO0YDQsNC8INCx0L7Qu9GM0YjQuNGFINGE0L7RgtC+ID09KyErPT1cbi8vINGD0LLQtdC70LjRh9C10L3QvdGL0LUg0YTQvtGC0L4g0L3QsCDQstC10YHRjCDRjdC60YDQsNC9INC/0YDQuCDQvdCw0LbQsNGC0LjQuCDQvdCwINCx0L7Qu9GM0YjQvtC1INGE0L7RgtC+XG4vLyDQutC+0LPQtNCwINCz0YDRg9C30Y/RgtGM0YHRjyDRgdC70LXQtNGD0Y7RidC40LUg0L/Rj9GC0Ywg0LrQsNGA0YLQuNC90L7Quiwg0L/QvtC60LDQt9Cw0YLRjCDQv9GA0LXQu9C+0LDQtNC10YAgPT0rISs9PVxuXG5cblxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHYWxsZXJ5IHtcblxuICBjb25zdHJ1Y3RvcihzZXR0aW5ncykge1xuXG4gICAgdGhpcy5zZXR0aW5ncz1zZXR0aW5ncztcbiAgICB0aGlzLmRhdGFBbW91bnQ9c2V0dGluZ3MuZ2FsbGVyeUFtb3VudDtcbiAgICB0aGlzLmdhbGxlcnlXcmFwcGVyPXNldHRpbmdzLmNvbnRhaW5lcjtcbiAgICB0aGlzLmdhbGxlcnlJdGVtU2VsZWN0b3IgPSBzZXR0aW5ncy5nYWxsZXJ5SXRlbVNlbGVjdG9yO1xuICAgIHRoaXMucGFyc2VkUmVzcG9uc2U9W107XG4gICAgdGhpcy5kYXRhPVtdO1xuICAgIHRoaXMucG9ydGlvbk9mRGF0YT1bXTtcbiAgICB0aGlzLmRhdGFTZXQ9IHtcbiAgICAgIHN0YXJ0OjAsXG4gICAgICBzdGVwOjUsXG4gICAgICBlbmQ6IDAsXG4gICAgICB0b3RhbExlbmd0aDowXG4gICAgfTtcbiAgICBcbiAgICB0aGlzLnRodW1ibmFpbHMgPSB7XG5cbiAgICAgIGhlaWdodDogMTAwLFxuICAgICAgd2lkdGg6IDAsXG4gICAgICBpdGVtV2lkdGg6IDExNCxcbiAgICAgIGxpc3Q6MCxcbiAgICAgIGxpc3RIZWlnaHQ6IDkwLFxuICAgICAgdXJsOltdLFxuICAgICAgdHJpZ2dlcnM6IFtdXG4gICAgfTtcbiAgICB0aGlzLmdhbGxlcnk9IHtcbiAgICAgIHdpZHRoOiAwLFxuICAgICAgaXRlbXM6IFtdLFxuICAgICAgdG90YWw6W10sXG4gICAgICBwcmV2QnRuU2VsZWN0b3I6IHNldHRpbmdzLnByZXZTbGlkZSB8fCBmYWxzZSxcbiAgICAgIHByZXZCdG5Ob2RlOiAwLFxuICAgICAgbmV4dEJ0blNlbGVjdG9yOiBzZXR0aW5ncy5uZXh0U2xpZGUgfHwgZmFsc2UsXG4gICAgICBuZXh0QnRuTm9kZTogMFxuICAgIH07XG4gICAgdGhpcy5nYWxsZXJ5TGlzdDtcbiAgICB0aGlzLmN1cnJlbnRJbmRleD0wO1xuICAgIFxuICAgIFxuICAgIFxuXG4gICAgdGhpcy5pbml0aWFsTG9hZCgpO1xuXG4gIH1cblxuICBpbml0aWFsTG9hZCgpIHtcblxuICAgIC8vIDEuYWpheC3Qt9Cw0L/RgNC+0YEg0L3QsCDQutCw0YDRgtC40L3QutC4IFxuICAgIC8vIDIu0L/RgNC40L3Rj9GC0Ywg0LfQsNC/0YDQvtGBLFxuICAgIC8vMi4yLiDQstGL0YDQtdC30LDRgtGMINGD0LrQsNC30LDQvdC90L7QtSDQutC+0LvQuNGH0LXRgdGC0LLQviDQutCw0YDRgtC40L3QvtC6XG4gICAgLy8yLjUg0L7RgtC+0LHRgNCw0LfQuNGC0Ywg0L/QtdGA0LLRi9C1INC/0Y/RgtGMIFswLi4uNV1cbiAgICAvLyAzLiDRgdC+0LfQtNCw0YLRjCDQvtCx0L7Qu9C+0YfQutGDINC4INGB0L/QuNGB0L7QuiDQtNC70Y8g0Y3Qu9C10LzQtdC90YLQvtCyINCz0LDQu9C70LXRgNC10LhcbiAgICAvLyA0LiDQodC+0LfQtNCw0YLRjCDQv9GP0YLRjCDRjdC70LXQvNC10L3RgtC+0LIg0LPQsNC70LvQtdGA0LXQuFxuICAgIC8vIDUuINGB0L7Qt9C00LDRgtGMINC60L3QvtC/0LrQuCDRg9C/0YDQsNCy0LvQtdC90LjRjyDQs9Cw0LvQu9C10YDQtdC5XG4gICAgLy8gNi4g0YHQvtC30LTQsNGC0Ywg0LzQuNC90LjQsNGC0Y7RgNGLINC00LvRjyDRjdGC0LjRhSDQv9GP0YLQuCDQutCw0YDRgtC40L3QvtC6XG4gICAgbGV0IHNlbGY9dGhpcztcblxuXG4gICAgbmV3IFByb21pc2UoKHJlc29sdmUscmVqZWN0KSA9PiB7XG5cbiAgICAgIHNlbGYudG9nZ2xlTG9hZGVyKHRydWUpO1xuXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgfSwgMTAwMCk7XG4gICAgICBcbiAgICB9KVxuICAgICAgLnRoZW4oKCkgPT4ge1xuXG4gICAgICAgIHRoaXMuZmV0Y2goKTtcblxuICAgXG4gICAgICB9KVxuICAgICAgLmNhdGNoKChyZWplY3QpID0+IHtcblxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IgKCdjaGVjayBhIHByb21pc2UgY2hhaW4nKTtcbiAgICAgIH0pO1xuXG5cbiAgfVxuXG4gIHNlY29uZGFyeUxvYWQoKSB7XG5cbiAgICB0aGlzLmluaXRpYXRlRGF0YSh0cnVlKTtcblxuICB9XG5cbiAgY3JlYXRlQ09SU1JlcXVlc3QobWV0aG9kLCB1cmwpIHtcbiAgICBcbiAgICBsZXQgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgaWYgKCd3aXRoQ3JlZGVudGlhbHMnIGluIHhocikge1xuICAgIFxuICAgICAgLy8gQ2hlY2sgaWYgdGhlIFhNTEh0dHBSZXF1ZXN0IG9iamVjdCBoYXMgYSBcIndpdGhDcmVkZW50aWFsc1wiIHByb3BlcnR5LlxuICAgICAgLy8gXCJ3aXRoQ3JlZGVudGlhbHNcIiBvbmx5IGV4aXN0cyBvbiBYTUxIVFRQUmVxdWVzdDIgb2JqZWN0cy5cbiAgICAgIHhoci5vcGVuKG1ldGhvZCwgdXJsLCB0cnVlKTtcbiAgICBcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBYRG9tYWluUmVxdWVzdCAhPSAndW5kZWZpbmVkJykge1xuICAgIFxuICAgICAgLy8gT3RoZXJ3aXNlLCBjaGVjayBpZiBYRG9tYWluUmVxdWVzdC5cbiAgICAgIC8vIFhEb21haW5SZXF1ZXN0IG9ubHkgZXhpc3RzIGluIElFLCBhbmQgaXMgSUUncyB3YXkgb2YgbWFraW5nIENPUlMgcmVxdWVzdHMuXG4gICAgICB4aHIgPSBuZXcgWERvbWFpblJlcXVlc3QoKTtcbiAgICAgIHhoci5vcGVuKG1ldGhvZCwgdXJsKTtcbiAgICBcbiAgICB9IGVsc2Uge1xuICAgIFxuICAgICAgLy8gT3RoZXJ3aXNlLCBDT1JTIGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhlIGJyb3dzZXIuXG4gICAgICB4aHIgPSBudWxsO1xuICAgIFxuICAgIH1cbiAgICAvLyBjb25zb2xlLmxvZyh4aHIpO1xuICAgIHJldHVybiB4aHI7XG4gICAgXG4gICAgXG4gIH1cblxuICBmZXRjaCgpIHtcblxuICAgIGxldCBzZWxmID0gdGhpcztcbiAgICBcbiAgICBsZXQgdXJsID0gJ2ltYWdlcy5qc29uJztcbiAgICBcbiAgICBsZXQgeGhyID0gc2VsZi5jcmVhdGVDT1JTUmVxdWVzdCgnR0VUJywgdXJsKTtcbiAgICBcbiAgICBpZiAoIXhocikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdDT1JTIG5vdCBzdXBwb3J0ZWQnKTtcbiAgICB9XG4gICAgXG4gICAgLy8gUmVzcG9uc2UgaGFuZGxlcnMuXG4gICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgbGV0IHJlc3BvbnNlVGV4dCA9IHhoci5yZXNwb25zZVRleHQ7XG4gICAgXG4gICAgICBzZWxmLmhhbmRsZVJlc3BvbnNlKHJlc3BvbnNlVGV4dCk7XG4gICAgICAgICAgICAgICAgXG4gICAgfTtcbiAgICBcbiAgICB4aHIub25lcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgIFxuICAgICAgdGhyb3cgbmV3IEVycm9yICgnV29vcHMsIHRoZXJlIHdhcyBhbiBlcnJvciBtYWtpbmcgdGhlIHJlcXVlc3QuJyk7XG4gICAgfTtcbiAgICBcbiAgICB4aHIuc2VuZCgpO1xuICAgIFxuICB9XG4gICAgXG4gIGhhbmRsZVJlc3BvbnNlKHJlc3BvbnNlKSB7XG4gICAgXG4gICAgXG4gICAgdGhpcy5wYXJzZWRSZXNwb25zZSA9IEpTT04ucGFyc2UocmVzcG9uc2UpO1xuICAgIFxuICAgIHRoaXMuaW5pdGlhdGVEYXRhKCk7XG5cblxuICB9XG4gICAgXG4gXG5cbiAgaW5pdGlhdGVEYXRhKHNlY29uZGFyeSkge1xuICAgIFxuICAgIGxldCBzdGF0dXM9IHNlY29uZGFyeSB8fCBmYWxzZTtcblxuICAgIGxldCBzZWxmID0gdGhpcztcbiAgICBcbiAgICBpZiAoc3RhdHVzKSB7XG4gICAgXG4gICAgICBuZXcgUHJvbWlzZSgocmVzb2x2ZSxyZWplY3QpID0+IHtcbiAgIFxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICBzZWxmLnRvZ2dsZUxvYWRlcihmYWxzZSk7XG4gICAgICAgIH0sIDEwMDApO1xuICAgICAgIFxuICAgICAgICBcbiAgICAgICAgcmVzb2x2ZSgpO1xuXG4gICAgICB9KSBcbiAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIHNlbGYuc2xpY2VEYXRhT25Qb3J0aW9ucyhzdGF0dXMpO1xuICAgICAgICB9KVxuICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgc2VsZi5zaG93RGF0YSh0cnVlKTtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZygnMicpO1xuXG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICBzZWxmLnRvZ2dsZUxvYWRlcihmYWxzZSk7XG4gICAgICAgICAgLy8gY29uc29sZS5sb2coJzMnKTtcblxuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKHJlamVjdCkgPT4ge1xuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdkYScpO1xuICAgICAgICB9KTtcblxuXG4gICAgXG4gICAgfSBlbHNlIHtcbiAgICAgICBcbiAgICAgIC8vIHNlbGYuc2xpY2VEYXRhT25Qb3J0aW9ucygpO1xuICAgICAgLy8gc2VsZi5zaG93RGF0YSgpO1xuXG4gICAgICBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cbiAgICAgICAgc2VsZi50b2dnbGVMb2FkZXIodHJ1ZSk7XG4gICAgICAgICAgIFxuICAgICAgICAvLyBjb25zb2xlLmxvZygnMScpO1xuICAgICAgICByZXNvbHZlKCk7XG4gICAgICB9KVxuICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgbGV0IGl0ZW1zID0gc2VsZi5wYXJzZWRSZXNwb25zZTtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhpdGVtcyk7XG4gICAgICAgICAgbGV0IGxpbWl0dGVkQXJyYXkgPSBpdGVtcy5zbGljZSgwLCB0aGlzLmRhdGFBbW91bnQpO1xuXG4gICAgICAgICAgbGltaXR0ZWRBcnJheS5tYXAoZnVuY3Rpb24oZWwpIHtcblxuICAgICAgICAgICAgc2VsZi5kYXRhLnB1c2goZWwpO1xuXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgLy8gY29uc29sZS5sb2coJzInKTtcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIHNlbGYuc2xpY2VEYXRhT25Qb3J0aW9ucygpO1xuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCczJyk7XG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKCgpID0+IHtcblxuICAgICAgICAgIHNlbGYuc2hvd0RhdGEoKTtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZygnNCcpO1xuXG4gICAgICAgIH0pO1xuXG4gICAgICAgXG5cbiAgICB9XG4gXG4gXG4gIH1cbiAgXG4gIHNsaWNlRGF0YU9uUG9ydGlvbnMoc2Vjb25kYXJ5KSB7XG5cblxuICAgIGxldCBzdGF0dXM9c2Vjb25kYXJ5IHx8IGZhbHNlO1xuICAgIGxldCBzZWxmID0gdGhpcztcbiAgICBsZXQgaXRlbXMgPSBzZWxmLmRhdGE7XG5cbiAgICBsZXQgc3RlcCA9IHRoaXMuZGF0YVNldC5zdGVwO1xuICAgIGxldCBzdGFydD10aGlzLmRhdGFTZXQuc3RhcnQ7XG4gICAgbGV0IGVuZD10aGlzLmRhdGFTZXQuZW5kO1xuXG4gICAgZW5kPXN0YXJ0K3N0ZXA7XG4gICAgXG4gICAgc2VsZi5kYXRhU2V0LnRvdGFsTGVuZ3RoPWVuZDtcbiAgIFxuICAgIC8vIGNvbnNvbGUubG9nKHNlbGYuZGF0YVNldC50b3RhbExlbmd0aCk7XG5cbiAgICBpZiAoc3RhdHVzKSB7XG4gICAgICAvLyBjb25zb2xlLmxvZyhzdGFydCxpdGVtcy5sZW5ndGgsc3RlcCk7XG5cbiAgICAgIGlmIChzdGFydCA8IGl0ZW1zLmxlbmd0aCAtIHN0ZXApIHtcblxuICAgICAgICAvLyBjb25zb2xlLmxvZyhpdGVtcy5sZW5ndGgpO1xuXG4gICAgICAgIHN0YXJ0Kz0gc3RlcDtcbiAgICAgICAgZW5kID0gc3RhcnQgKyBzdGVwO1xuXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHN0YXJ0LCBlbmQpO1xuXG4gICAgICAgIGxldCBwb3J0aW9uQXJyYXkgPSBpdGVtcy5zbGljZShzdGFydCwgZW5kKTtcblxuICAgICAgICBzZWxmLnBvcnRpb25PZkRhdGEubGVuZ3RoPTA7XG5cbiAgICAgICAgcG9ydGlvbkFycmF5Lm1hcChmdW5jdGlvbihlbCkgeyAgXG5cbiAgICAgICAgICBzZWxmLnBvcnRpb25PZkRhdGEucHVzaChlbCk7XG5cbiAgICAgICAgfSk7XG4gICAgICBcbiAgICAgICAgdGhpcy5kYXRhU2V0LnN0YXJ0PXN0YXJ0O1xuICAgICAgICB0aGlzLmRhdGFTZXQuZW5kPWVuZDtcblxuXG4gICAgICB9IGVsc2Uge1xuXG4gICAgICAgIHNlbGYucG9ydGlvbk9mRGF0YS5sZW5ndGggPSAwO1xuXG5cbiAgICAgIH1cblxuICAgIH0gZWxzZSB7XG5cbiBcblxuICAgICAgbGV0IHBvcnRpb25BcnJheSA9IGl0ZW1zLnNsaWNlKHN0YXJ0LCBlbmQpO1xuXG5cbiAgICAgIHBvcnRpb25BcnJheS5tYXAoZnVuY3Rpb24oZWwpIHtcblxuICAgICAgICBzZWxmLnBvcnRpb25PZkRhdGEucHVzaChlbCk7XG5cbiAgICAgIH0pO1xuICAgICAgXG5cblxuXG4gICAgfVxuXG5cbiAgfVxuXG4gIHNob3dEYXRhKHNlY29uZGFyeSkge1xuXG5cbiAgICBsZXQgc3RhdHVzID0gc2Vjb25kYXJ5IHx8IGZhbHNlO1xuXG5cbiAgICBsZXQgc2VsZiA9IHRoaXM7XG5cblxuXG4gICAgbGV0IGdhbGxlcnlDb250YWluZXIgPSBbXS5zbGljZS5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5nYWxsZXJ5V3JhcHBlcikpO1xuXG4gICAgZ2FsbGVyeUNvbnRhaW5lci5mb3JFYWNoKGZ1bmN0aW9uKGVsKSB7XG5cblxuICAgICAgc2VsZi5maWxsR2FsbGVyeShlbCwgc3RhdHVzKTtcblxuXG4gICAgICBzZWxmLmFkZFRodW1icyhlbCwgc3RhdHVzKTtcblxuICAgIH0pO1xuXG4gIH1cblxuXG4gIGZpbGxHYWxsZXJ5KGdhbGxlcnlDb250YWluZXIsIHNlY29uZGFyeSkge1xuICAgICAgXG4gICAgbGV0IHN0YXR1cz1zZWNvbmRhcnkgfHwgZmFsc2U7XG4gICAgbGV0IHNlbGY9dGhpcztcbiAgICBsZXQgaXRlbXMgPSBzZWxmLnBvcnRpb25PZkRhdGE7XG4gICAgbGV0IGNvbnRhaW5lciA9IGdhbGxlcnlDb250YWluZXI7XG4gICAgICAgXG4gICAgICBcbiAgICBpZiAoIXN0YXR1cykge1xuICAgICAgICAgICBcbiAgICAgIGxldCBpdGVtc0Ftb3VudCA9IHNlbGYuZGF0YVNldC50b3RhbExlbmd0aDsgICBcbiAgICAgIGxldCBnYWxsZXJ5TWluSGVpZ2h0ID0gY29udGFpbmVyLm9mZnNldEhlaWdodDtcbiAgICAgIGxldCB0aHVtYm5haWxzSGVpZ2h0PXRoaXMudGh1bWJuYWlscy5oZWlnaHQ7XG4gICAgICAvLyBjb25zb2xlLmxvZyhzZWxmLmRhdGFTZXQudG90YWxMZW5ndGgpO1xuICAgICAgXG4gICAgICBsZXQgZ2FsbGVyeSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgXG4gICAgICBnYWxsZXJ5LmNsYXNzTGlzdC5hZGQoJ2dhbGxlcnknLCAnanMtZ2FsbGVyeScpO1xuXG4gICAgXG4gICAgICBsZXQgZ2FsbGVyeUhlaWdodD0gZ2FsbGVyeU1pbkhlaWdodCAtIHRodW1ibmFpbHNIZWlnaHQ7XG4gICAgICBnYWxsZXJ5LnN0eWxlLm1pbkhlaWdodCA9IChnYWxsZXJ5SGVpZ2h0KSArICdweCc7XG4gICAgXG4gICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoZ2FsbGVyeSk7XG4gICAgICBcblxuXG4gICAgICBsZXQgZ2FsbGVyeVdpZHRoPWdhbGxlcnkub2Zmc2V0V2lkdGg7XG4gICAgXG4gICAgICBzZWxmLmdhbGxlcnkud2lkdGggPSBnYWxsZXJ5V2lkdGg7XG4gIFxuICAgICAgbGV0IGdhbGxlcnlMaXN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKTtcbiAgICAgIFxuICAgICAgZ2FsbGVyeUxpc3QuY2xhc3NMaXN0LmFkZCgnZ2FsbGVyeV9fbGlzdCcsICdqcy1nYWxsZXJ5LWxpc3QnKTtcbiAgICAgIGdhbGxlcnlMaXN0LnN0eWxlLm1pbkhlaWdodCA9IChnYWxsZXJ5SGVpZ2h0KSArICdweCc7XG4gICAgICBcbiAgICAgIHNlbGYuZ2FsbGVyeUxpc3Q9Z2FsbGVyeUxpc3Q7XG4gICAgICBcbiAgICAgIFxuXG4gICAgICBzZWxmLnRodW1ibmFpbHMud2lkdGggPSBzZWxmLnRodW1ibmFpbHMuaXRlbVdpZHRoICogKHNlbGYuZGF0YVNldC50b3RhbExlbmd0aCArIDEpO1xuXG4gICAgICBjb25zb2xlLmxvZyhzZWxmLnRodW1ibmFpbHMuaXRlbVdpZHRoLCBzZWxmLmRhdGFTZXQudG90YWxMZW5ndGgsIHNlbGYudGh1bWJuYWlscy53aWR0aCk7XG4gICAgICBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cbiAgICAgICAgc2VsZi5hZGRJdGVtc1RvR2FsbGVyeShzZWxmLmdhbGxlcnlMaXN0LCBpdGVtcyk7XG5cbiAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgfSlcbiAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIHNlbGYuc2hvd0ZpcnN0SXRlbXMoZ2FsbGVyeUxpc3QpO1xuICAgICAgICB9KVxuICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgZ2FsbGVyeS5hcHBlbmRDaGlsZChnYWxsZXJ5TGlzdCk7XG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICBzZWxmLmJpbmRFdmVudHMoKTtcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIHNlbGYubmF2aWdhdGlvbihjb250YWluZXIpO1xuICAgICAgICB9KTtcbiAgICBcbiAgICB9IGVsc2Uge1xuXG4gICAgICBzZWxmLnRodW1ibmFpbHMud2lkdGggPSBzZWxmLnRodW1ibmFpbHMuaXRlbVdpZHRoICogKHNlbGYuZGF0YVNldC50b3RhbExlbmd0aCArIDEpO1xuICAgICAgY29uc29sZS5sb2coc2VsZi50aHVtYm5haWxzLml0ZW1XaWR0aCwgc2VsZi5kYXRhU2V0LnRvdGFsTGVuZ3RoLCBzZWxmLnRodW1ibmFpbHMud2lkdGgpO1xuXG4gICAgICBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cbiAgICAgICAgc2VsZi5hZGRJdGVtc1RvR2FsbGVyeShzZWxmLmdhbGxlcnlMaXN0LCBpdGVtcyk7XG5cbiAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgfSlcbiAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIHNlbGYuYmluZEV2ZW50cygpO1xuXG4gICAgICAgIH0pO1xuICAgICAgLy8gY29uc29sZS5sb2coc2VsZi5nYWxsZXJ5TGlzdCk7XG4gICAgICBcbiAgXG4gICAgICBcbiAgICB9XG4gICAgICBcbiAgICByZXR1cm4gdHJ1ZTtcblxuICB9XG5cblxuXG4gIFxuICBhZGRJdGVtc1RvR2FsbGVyeShsaXN0LCBpdGVtcykge1xuICAgIFxuICAgIGxldCBzZWxmPXRoaXM7XG5cbiAgICAvLyBjb25zb2xlLmxvZyhsaXN0KTtcbiAgICBcbiAgICBsZXQgZ2FsbGVyeUxpc3QgPSBsaXN0O1xuICAgIGxldCBkYXRhID0gaXRlbXM7XG4gICAgbGV0IGRhdGFMZW5ndGggPSBkYXRhLmxlbmd0aDtcbiAgICBsZXQgZ2FsbGVyeU1heFdpZHRoID0gdGhpcy5nYWxsZXJ5LndpZHRoO1xuICAgXG4gICAgc2VsZi5kYXRhU2V0LnRvdGFsTGVuZ3RoKz1kYXRhLmxlbmd0aDtcbiAgICBcbiAgICAvLyBjb25zb2xlLmxvZyhzZWxmLmRhdGFTZXQudG90YWxMZW5ndGgpO1xuICAgIFxuXG4gICAgZm9yIChsZXQgaiA9IDA7IGogPCBkYXRhTGVuZ3RoOyBqKyspIHtcbiAgICBcbiAgICAgIGxldCBnYWxsZXJ5SXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gICAgICBnYWxsZXJ5SXRlbS5jbGFzc0xpc3QuYWRkKCdnYWxsZXJ5X19pdGVtJywgc2VsZi5nYWxsZXJ5SXRlbVNlbGVjdG9yKTtcbiAgICBcbiAgICAgIGxldCBnYWxsZXJ5SXRlbUlEID0gJ3NsaWRlJyArIGRhdGFbal0uaWQ7XG4gICAgICBnYWxsZXJ5SXRlbS5zZXRBdHRyaWJ1dGUoJ2lkJywgZ2FsbGVyeUl0ZW1JRCk7XG4gICAgXG4gICAgICBnYWxsZXJ5SXRlbS5zdHlsZS5tYXhXaWR0aCA9IGdhbGxlcnlNYXhXaWR0aCArICdweCc7XG4gICAgXG4gICAgICBnYWxsZXJ5SXRlbS5pbm5lckhUTUwgPSAnPGltZyBzcmM9XCInICsgZGF0YVtqXS51cmwgKyAnXCIgY2xhc3M9XCJnYWxsZXJ5X19pbWdcIj4gJztcbiAgICBcbiAgICAgIGdhbGxlcnlMaXN0LmFwcGVuZENoaWxkKGdhbGxlcnlJdGVtKTtcbiAgICBcbiAgICB9XG5cbiAgICBsZXQgc2xpZGVzTm9kZUxpc3QgPSBsaXN0LmNoaWxkTm9kZXM7XG4gICAgXG4gICAgLy8gY29uc29sZS5sb2coc2xpZGVzTm9kZUxpc3QpO1xuICAgIFxuICAgIGxldCBzbGlkZXMgPSBbXS5zbGljZS5jYWxsKHNsaWRlc05vZGVMaXN0KTtcbiAgICBcbiAgICAvLyBjb25zb2xlLmxvZyhzbGlkZXMpO1xuICAgIFxuICAgIHNlbGYuZ2FsbGVyeS5pdGVtcz1zbGlkZXM7XG5cbiAgICAvLyBjb25zb2xlLmxvZyhzZWxmLmdhbGxlcnkudG90YWwubGVuZ3RoLCBzZWxmLmRhdGFBbW91bnQpO1xuXG4gICAgaWYgKHNlbGYuZ2FsbGVyeS50b3RhbC5sZW5ndGggPCBzZWxmLmRhdGFBbW91bnQpIHtcblxuICAgICAgc2VsZi5nYWxsZXJ5LnRvdGFsID0gc2VsZi5nYWxsZXJ5Lml0ZW1zLm1hcChlbCA9PiB7XG5cbiAgICAgICAgcmV0dXJuIGVsO1xuXG4gICAgICB9KTtcbiAgICAgXG4gICAgfVxuXG5cblxuXG4gIH1cblxuICBiaW5kRXZlbnRzKCkge1xuXG4gICAgdGhpcy5mdWxsUGFnZU1vZGUoKTtcblxuICB9XG5cblxuICBmdWxsUGFnZU1vZGUoKSB7XG5cbiAgICBsZXQgc2VsZj10aGlzO1xuICAgIHNlbGYuY3JlYXRlUG9QVXAoKTtcblxuICB9XG5cblxuICBnZXRJbWdTcmMocikge1xuICAgIGxldCBzZWxmPXRoaXM7XG5cblxuICAgIGxldCBwb3B1cD1yO1xuXG4gICAgbGV0IGN1cnJlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuJyArIHRoaXMuZ2FsbGVyeUl0ZW1TZWxlY3Rvcik7XG4gIFxuICAgIGN1cnJlbnQuZm9yRWFjaChmdW5jdGlvbihlbCkge1xuXG4gICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhlbCk7XG4gICAgICAgIGxldCBjID0gW10uc2xpY2UuY2FsbChlbC5jaGlsZHJlbikuZmluZChmdW5jdGlvbihlKSB7XG5cbiAgICAgICAgICBsZXQgciA9IGUuaGFzQXR0cmlidXRlKCdzcmMnKSA/IGUgOiBmYWxzZTtcblxuICAgICAgICAgIHJldHVybiByO1xuICAgICAgICAgIFxuXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHBvcHVwLmltZ1NyYyA9IGMuZ2V0QXR0cmlidXRlKCdzcmMnKTtcbiAgICAgICAgc2VsZi5zaG93RnVsbFBhZ2VJbWcocG9wdXApO1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhwb3B1cCk7XG4gICAgICB9KTtcblxuXG4gICAgfSk7XG4gICAgXG4gICAgXG5cbiAgfVxuXG5cbiAgY3JlYXRlUG9QVXAocikge1xuXG4gICAgbGV0IHNlbGY9dGhpcztcblxuICAgIGxldCBwb3B1cD17fTtcblxuICAgIGxldCBtb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tb2RhbCcpO1xuXG4gICAgaWYgKG1vZGFsLmxlbmd0aCA9PT0gMCkge1xuXG4gICAgICBsZXQgYm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKTtcblxuICAgICAgbGV0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ21vZGFsJywgJ21vZGFsX19mcCcpO1xuXG4gICAgICBsZXQgaW5uZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIGlubmVyLmNsYXNzTGlzdC5hZGQoJ21vZGFsX19pbm5lcicpO1xuXG4gICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoaW5uZXIpO1xuXG4gICAgICBsZXQgY29udGVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgY29udGVudC5jbGFzc0xpc3QuYWRkKCdtb2RhbF9fY29udGVudCcpO1xuICAgICAgY29udGVudC5pbm5lckhUTUwgPSAnPHNwYW4gY2xhc3M9XCJtb2RhbF9fY2xvc2VCdG5cIiA+PC9zcGFuPicrXG4gICAgICAgJzxpbWcgY2xhc3M9XCJtb2RhbF9faW1nXCIgc3JjPVwiXCI+JztcblxuICAgICAgXG5cbiAgICAgIGlubmVyLmFwcGVuZENoaWxkKGNvbnRlbnQpO1xuXG4gICAgICBwb3B1cC53cmFwID0gY29udGFpbmVyO1xuICAgICAgcG9wdXAuY29udGVudCA9IGNvbnRlbnQ7XG5cblxuICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGNvbnRlbnQpO1xuXG4gICAgIFxuICAgICAgYm9keS5hcHBlbmRDaGlsZChjb250YWluZXIpO1xuXG4gICAgICBzZWxmLmdldEltZ1NyYyhwb3B1cCk7XG5cblxuICAgIH07XG5cblxuICB9XG5cbiAgc2hvd0Z1bGxQYWdlSW1nKGNvbikge1xuXG4gXG4gICAgbGV0IGltZ1NyYz1jb24uaW1nU3JjO1xuICAgIGxldCB3cmFwPWNvbi53cmFwO1xuICAgIGxldCBjb250ZW50PWNvbi5jb250ZW50O1xuICAgIGNvbnNvbGUubG9nKGNvbnRlbnQpO1xuXG4gICAgbGV0IGJvZHk9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpO1xuXG4gICAgbGV0IGltZyA9IFtdLnNsaWNlLmNhbGwoY29udGVudC5jaGlsZHJlbikuZmluZChmdW5jdGlvbihlbCkge1xuICAgICAgY29uc29sZS5sb2coZWwpO1xuXG4gICAgICBpZiAoIGVsLmNsYXNzTGlzdC5jb250YWlucygnbW9kYWxfX2ltZycpKSByZXR1cm4gZWw7XG4gICAgfSk7XG4gICBcbiAgICBpbWcuc2V0QXR0cmlidXRlKCdzcmMnLCBpbWdTcmMpO1xuXG4gICAgd3JhcC5jbGFzc0xpc3QuYWRkKCdpcy1hY3RpdmUnKTtcbiAgICBib2R5LmNsYXNzTGlzdC50b2dnbGUoJ292ZXItaGlkJyk7XG4gICAgLy8gd3JhcC5hcHBlbmRDaGlsZChjb250ZW50KTtcblxuICAgIGxldCBjbG9zZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tb2RhbF9fY2xvc2VCdG4nKTtcblxuICAgIGNsb3NlLmZvckVhY2goZnVuY3Rpb24oZWwpIHtcbiAgICAgIFxuICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgICAgY29uc29sZS5sb2coZWwpO1xuICAgICAgICBlbC5jbG9zZXN0KCcubW9kYWwnKS5jbGFzc0xpc3QucmVtb3ZlKCdpcy1hY3RpdmUnKTtcbiAgICAgICAgYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdvdmVyLWhpZCcpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cblxuICB9XG5cblxuXG4gIHNob3dGaXJzdEl0ZW1zKGxpc3QpIHtcblxuICAgIGxldCBzZWxmPXRoaXM7XG5cbiAgICBsZXQgc2xpZGVzPXNlbGYuZ2FsbGVyeS5pdGVtcztcblxuICAgIGxldCBmaXJzdFNsaWRlcyA9IHNsaWRlcy5maWx0ZXIoZnVuY3Rpb24oZWwpIHtcblxuICAgICAgaWYgKGVsLmdldEF0dHJpYnV0ZSgnaWQnKSA9PT0gJ3NsaWRlMScpIHJldHVybiBlbDtcbiAgICAgIFxuXG4gICAgfSk7XG5cbiAgICBmaXJzdFNsaWRlcy5mb3JFYWNoKGZ1bmN0aW9uKGVsKSB7XG5cbiAgICAgIGVsLmNsYXNzTGlzdC5hZGQoJ2lzLXZpc2libGUnKTtcblxuICAgIH0pO1xuXG4gIH1cbiBcblxuICBuYXZpZ2F0aW9uKGdhbGxlcnlDb250YWluZXIpIHtcblxuICAgIGxldCBzZWxmID0gdGhpcztcbiAgICBsZXQgdGhpc0dhbGxlcnlXcmFwcGVyID0gZ2FsbGVyeUNvbnRhaW5lcjtcbiAgICBsZXQgdGhpc0dhbGxlcnlMaXN0ID0gdGhpcy5nYWxsZXJ5TGlzdDtcbiAgICBsZXQgcHJldkJ0biwgbmV4dEJ0bjsgXG4gICAgXG4gICAgbGV0IHRoaXNHYWxsZXJ5Q2hpbGRyZW4gPSBbXS5zbGljZS5jYWxsKHRoaXNHYWxsZXJ5V3JhcHBlci5jaGlsZHJlbik7XG4gICAgXG4gICAgLy8gY29uc29sZS5sb2codGhpc0dhbGxlcnlDaGlsZHJlbik7XG4gICAgXG4gICAgLy8gY29uc29sZS5sb2coc3RhdHVzKTtcbiAgICBcbiAgICBpZiAoKCFzZWxmLmdhbGxlcnkucHJldkJ0blNlbGVjdG9yKSAmJiAoIXNlbGYuZ2FsbGVyeS5uZXh0QnRuU2VsZWN0b3IpKSB7XG4gICAgXG4gICAgICB0aGlzR2FsbGVyeVdyYXBwZXIuY2xhc3NMaXN0LmFkZCgnYWRkLWNvbnRyb2xsZXJzJyk7XG4gICAgXG4gICAgICBwcmV2QnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICBwcmV2QnRuLmNsYXNzTGlzdC5hZGQoJ2NvbnRyb2wtYnRuJywgJ2NvbnRyb2wtYnRuX19sZWZ0JywgJ2pzLWdhbGxlcnktcHJldicpO1xuICAgIFxuICAgICAgcHJldkJ0bi5pbm5lckhUTUwgPSAnPGJ1dHRvbiBjbGFzcz1cImljb24tYnRuIGljb24tYnRuX2xlZnRcIj48L2J1dHRvbj4nO1xuICAgIFxuICAgIFxuICAgICAgbmV4dEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgbmV4dEJ0bi5jbGFzc0xpc3QuYWRkKCdjb250cm9sLWJ0bicsICdjb250cm9sLWJ0bl9fcmlnaHQnLCAnanMtZ2FsbGVyeS1uZXh0Jyk7XG4gICAgXG4gICAgICBuZXh0QnRuLmlubmVySFRNTCA9ICc8YnV0dG9uIGNsYXNzPVwiaWNvbi1idG4gaWNvbi1idG5fcmlnaHRcIj48L2J1dHRvbj4nO1xuICAgIFxuICAgIFxuICAgICAgdGhpc0dhbGxlcnlXcmFwcGVyLmFwcGVuZENoaWxkKHByZXZCdG4pO1xuICAgICAgdGhpc0dhbGxlcnlXcmFwcGVyLmFwcGVuZENoaWxkKG5leHRCdG4pO1xuXG4gICAgIFxuICAgIFxuICAgIH0gZWxzZSB7XG4gICAgXG4gICAgICBuZXh0QnRuID0gdGhpc0dhbGxlcnlDaGlsZHJlbi5maWx0ZXIoZnVuY3Rpb24oZWwpIHtcbiAgICBcbiAgICAgICAgaWYgKGVsLmNsYXNzTGlzdC5jb250YWlucyhzZWxmLmdhbGxlcnkubmV4dEJ0blNlbGVjdG9yKSkgeyByZXR1cm4gZWw7IH1cbiAgICBcbiAgICAgIH0pO1xuICAgIFxuICAgIFxuICAgICAgLy8gY29uc29sZS5sb2cobmV4dFNsaWRlQnV0dG9uKTtcbiAgICBcbiAgICBcbiAgICAgIHByZXZCdG4gPSB0aGlzR2FsbGVyeUNoaWxkcmVuLmZpbHRlcihmdW5jdGlvbihlbCkge1xuICAgIFxuICAgICAgICBpZiAoZWwuY2xhc3NMaXN0LmNvbnRhaW5zKHNlbGYuZ2FsbGVyeS5wcmV2QnRuU2VsZWN0b3IpKSB7IHJldHVybiBlbDsgfVxuICAgIFxuICAgICAgfSk7XG4gICAgXG4gICAgXG4gICAgfVxuICAgIFxuXG4gICAgc2VsZi5nYWxsZXJ5LnByZXZCdG5Ob2RlPXByZXZCdG47XG4gICAgc2VsZi5nYWxsZXJ5Lm5leHRCdG5Ob2RlPW5leHRCdG47XG4gICAgXG5cbiAgICB0aGlzLm5leHRTbGlkZSgpO1xuICAgIFxuICAgIHRoaXMucHJldlNsaWRlKCk7XG4gXG4gICAgXG4gIH1cblxuXG4gIG5leHRTbGlkZSgpIHtcblxuICAgIGxldCBzZWxmID0gdGhpcztcbiAgICBsZXQgbmV4dFNsaWRlQnRuID0gc2VsZi5nYWxsZXJ5Lm5leHRCdG5Ob2RlO1xuICAgXG5cbiAgICAvLyBjb25zb2xlLmxvZyhzbGlkZXMsY3VycmVudFNsaWRlLHNlbGYuY3VycmVudEluZGV4KTtcblxuXG4gICAgbmV4dFNsaWRlQnRuLmZvckVhY2goZnVuY3Rpb24oZSkge1xuXG4gICAgICAvLyBjb25zb2xlLmxvZyhzbGlkZXMsY3VycmVudFNsaWRlKTtcblxuICAgICAgZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuIFxuICAgICAgICBsZXQgc2xpZGVzID0gc2VsZi5nYWxsZXJ5Lml0ZW1zO1xuICAgICAgICAgIFxuICAgICAgICAvLyBjb25zb2xlLmxvZyhzZWxmLmdhbGxlcnkuaXRlbXMpO1xuICAgICAgICAgIFxuICAgICAgICAgICAgIFxuICAgICAgICBsZXQgY3VycmVudEluZGV4ID0gc2xpZGVzLmZpbmRJbmRleChmdW5jdGlvbihlbCkge1xuICAgICAgICAgIFxuICAgICAgICAgIGlmIChlbC5jbGFzc0xpc3QuY29udGFpbnMoJ2lzLXZpc2libGUnKSkgeyByZXR1cm4gZWw7IH1cbiAgICAgICAgICBcbiAgICAgICAgfSk7XG4gICAgICAgICAgXG4gICAgICAgIHNlbGYuY3VycmVudEluZGV4ID0gY3VycmVudEluZGV4O1xuXG4gICAgICAgIHNlbGYuc2Vjb25kYXJ5TG9hZCgpO1xuXG4gICAgICAgIHNsaWRlc1tzZWxmLmN1cnJlbnRJbmRleF0uY2xhc3NMaXN0LnRvZ2dsZSgnaXMtdmlzaWJsZScpO1xuXG4gICAgICAgIHNlbGYuY3VycmVudEluZGV4ID0gKHNlbGYuY3VycmVudEluZGV4ICsgMSkgJSBzbGlkZXMubGVuZ3RoO1xuXG4gICAgICAgIHNsaWRlc1tzZWxmLmN1cnJlbnRJbmRleF0uY2xhc3NMaXN0LnRvZ2dsZSgnaXMtdmlzaWJsZScpO1xuXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHNlbGYuY3VycmVudEluZGV4KTtcbiAgICAgICAgc2VsZi5jaGFuZ2VUaHVtYm5haWxzKCk7XG4gICAgICBcbiAgICAgIH0pO1xuXG5cbiAgICB9KTtcbiAgfVxuXG4gIHByZXZTbGlkZSgpIHtcbiAgICBsZXQgc2VsZiA9IHRoaXM7XG4gICAgbGV0IHByZXZTbGlkZUJ0biA9IHNlbGYuZ2FsbGVyeS5wcmV2QnRuTm9kZTtcblxuXG4gICAgcHJldlNsaWRlQnRuLmZvckVhY2goZnVuY3Rpb24oZWwpIHtcblxuICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgXG4gICAgICAgIGxldCBzbGlkZXMgPSBzZWxmLmdhbGxlcnkudG90YWw7XG5cbiAgICAgICAgbGV0IGxhc3RTbGlkZSA9IHNsaWRlcy5sZW5ndGggLSAxO1xuXG4gICAgICAgIGxldCBjdXJyZW50SW5kZXggPSBzbGlkZXMuZmluZEluZGV4KGZ1bmN0aW9uKGVsKSB7XG5cbiAgICAgICAgICBpZiAoZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdpcy12aXNpYmxlJykpIHsgcmV0dXJuIGVsOyB9XG5cbiAgICAgICAgfSk7XG5cbiAgICAgICAgc2VsZi5jdXJyZW50SW5kZXggPSBjdXJyZW50SW5kZXg7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHNsaWRlcywgY3VycmVudEluZGV4KTsgXG5cbiAgICAgICAgc2xpZGVzW3NlbGYuY3VycmVudEluZGV4XS5jbGFzc0xpc3QudG9nZ2xlKCdpcy12aXNpYmxlJyk7XG5cbiAgICAgICAgaWYgKHNlbGYuY3VycmVudEluZGV4IDw9IDApIHtcblxuICAgICAgICAgIHNlbGYuY3VycmVudEluZGV4ID0gbGFzdFNsaWRlO1xuXG4gICAgICAgIH0gZWxzZSBpZiAoKHNlbGYuY3VycmVudEluZGV4ID4gMCkgJiYgKHNlbGYuY3VycmVudEluZGV4IDw9IGxhc3RTbGlkZSkpIHtcblxuICAgICAgICAgIHNlbGYuY3VycmVudEluZGV4LS07XG4gICAgICAgIH1cblxuICAgICAgICBzbGlkZXNbc2VsZi5jdXJyZW50SW5kZXhdLmNsYXNzTGlzdC50b2dnbGUoJ2lzLXZpc2libGUnKTtcblxuICAgICAgICAvLyBjb25zb2xlLmxvZyhzZWxmLmN1cnJlbnRJbmRleCk7XG4gICAgICAgIHNlbGYuY2hhbmdlVGh1bWJuYWlscygpO1xuICAgICAgfSk7XG5cbiAgICB9KTtcblxuICAgIFxuICB9XG5cblxuICBhZGRUaHVtYnMoZ2FsbGVyeUNvbnRhaW5lciwgc2Vjb25kYXJ5KSB7XG4gICAgXG4gICAgbGV0IHNlbGYgPSB0aGlzO1xuICAgIGxldCBzdGF0dXM9c2Vjb25kYXJ5IHx8IGZhbHNlO1xuICAgIGxldCBkYXRhID0gc2VsZi5wb3J0aW9uT2ZEYXRhO1xuICAgIGxldCBjb250YWluZXIgPSBnYWxsZXJ5Q29udGFpbmVyO1xuICAgICBcbiAgICBzZWxmLnRodW1ibmFpbHMudXJsID0gZGF0YS5tYXAoZnVuY3Rpb24oZWwpIHtcbiAgICBcbiAgICAgIHJldHVybiBlbC50aHVtYm5haWxVcmw7XG4gICAgXG4gICAgfSk7XG4gICAgXG4gICAgXG5cbiAgICBpZiAoIXN0YXR1cykge1xuICAgIFxuICAgICAgbGV0IHRodW1icyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgIFxuICAgICAgdGh1bWJzLnN0eWxlLm1pbkhlaWdodCA9IHNlbGYudGh1bWJzSGVpZ2h0ICsgJ3B4JztcbiAgICAgIHRodW1icy5jbGFzc0xpc3QuYWRkKCdnLXRodW1ibmFpbHMnKTtcbiAgICAgICAgICBcbiAgICAgICAgICBcbiAgICAgIGxldCB0aHVtYnNMaXN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKTtcbiAgICAgIGxldCBzdHlsaW5nUGFkZGluZz0xMDtcbiAgICAgIGxldCB0aHVtYnNMaXN0V2lkdGggPSAoc2VsZi50aHVtYm5haWxzLndpZHRoKTtcbiAgICAgIC8vIGNvbnNvbGUubG9nKHNlbGYudGh1bWJuYWlscy53aWR0aCx0aHVtYnNMaXN0V2lkdGgpO1xuICAgICAgdGh1bWJzTGlzdC5zdHlsZS53aWR0aCA9IHRodW1ic0xpc3RXaWR0aCArICdweCc7XG4gICAgICAgICAgXG4gICAgICBsZXQgdGh1bWJzTGlzdEhlaWdodCA9ICBzZWxmLnRodW1ic0xpc3RIZWlnaHQ7XG4gICAgICB0aHVtYnNMaXN0LnN0eWxlLmhlaWdodCA9IHRodW1ic0xpc3RIZWlnaHQgKyAncHgnO1xuICAgICAgICAgIFxuICAgICAgdGh1bWJzTGlzdC5jbGFzc0xpc3QuYWRkKCdnLXRodW1ibmFpbHNfX2xpc3QnKTtcbiAgICAgICAgICBcbiAgICAgIHNlbGYudGh1bWJuYWlscy5saXN0PXRodW1ic0xpc3Q7XG4gICAgICAgICAgXG4gICAgICB0aGlzLmFkZFRodW1ic0l0ZW0oICk7XG4gICAgXG4gICAgICB0aHVtYnMuYXBwZW5kQ2hpbGQodGh1bWJzTGlzdCk7XG4gICAgICAgIFxuICAgICAgLy8gY29uc29sZS5sb2coY29udGFpbmVyKTtcbiAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aHVtYnMpO1xuICAgIFxuICAgIFxuICAgICAgdGhpcy5tb3ZlVGh1bWJuYWlscygpO1xuICAgICAgICAgIFxuICAgICAgdGhpcy50b2dnbGVUaHVtYnMoKTtcbiAgICAgICBcbiAgICBcbiAgICB9IGVsc2Uge1xuXG4gICAgICBsZXQgdGh1bWJzTGlzdFdpZHRoID0gKHNlbGYudGh1bWJuYWlscy53aWR0aCk7XG4gICAgICAvLyBjb25zb2xlLmxvZyhzZWxmLnRodW1ibmFpbHMud2lkdGgsdGh1bWJzTGlzdFdpZHRoKTtcbiAgICAgIHNlbGYudGh1bWJuYWlscy5saXN0LnN0eWxlLndpZHRoID0gdGh1bWJzTGlzdFdpZHRoICsgJ3B4JztcbiAgICBcbiAgICAgIHRoaXMuYWRkVGh1bWJzSXRlbSgpO1xuICAgICAgICAgIFxuICAgICAgdGhpcy5tb3ZlVGh1bWJuYWlscygpO1xuICAgICAgICAgIFxuICAgICAgdGhpcy50b2dnbGVUaHVtYnMoKTtcbiAgICBcbiAgICB9XG5cblxuICAgICAgIFxuICB9XG4gICAgXG5cbiAgYWRkVGh1bWJzSXRlbSgpIHtcbiAgICBcbiAgICBsZXQgc2VsZj10aGlzO1xuICAgIGxldCB0aHVtYnM9c2VsZi50aHVtYm5haWxzLnVybDtcbiAgICBsZXQgZGF0YT1zZWxmLnBvcnRpb25PZkRhdGE7XG4gICAgbGV0IHRodW1ic0xpc3Q9c2VsZi50aHVtYm5haWxzLmxpc3Q7XG4gICAgbGV0IHRodW1ic0l0ZW1XaWR0aD10aGlzLnRodW1ibmFpbHMuaXRlbVdpZHRoO1xuICAgIGxldCB0aHVtYnNIZWlnaHQ9c2VsZi50aHVtYm5haWxzLmxpc3RIZWlnaHQ7XG5cbiAgICAvLyBjb25zb2xlLmxvZyh0aHVtYnMsIGRhdGEsIHRodW1ic0hlaWdodCk7ICBcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBcbiAgICAgIGxldCB0aHVtYnNJdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgICAgICAgICBcbiAgICAgIHRodW1ic0l0ZW0uc3R5bGUud2lkdGggPSB0aHVtYnNJdGVtV2lkdGggKyAncHgnO1xuICAgICAgdGh1bWJzSXRlbS5zdHlsZS5oZWlnaHQgPSB0aHVtYnNIZWlnaHQgKyAncHgnO1xuICAgICAgICAgICAgXG4gICAgICB0aHVtYnNJdGVtLmNsYXNzTGlzdC5hZGQoJ2ctdGh1bWJuYWlsc19faXRlbScpO1xuICAgICAgICAgIFxuICAgICAgbGV0IGVxdWFsaXplcj1kYXRhW2ldLmlkLTE7XG5cbiAgICAgIGxldCB0aHVtYnNJdGVtV3JhcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgdGh1bWJzSXRlbVdyYXAuc2V0QXR0cmlidXRlKCdkYXRhLXRodW1iJywgZXF1YWxpemVyKTtcbiAgICAgIHRodW1ic0l0ZW1XcmFwLmNsYXNzTGlzdC5hZGQoJ2ctdGh1bWJuYWlsc19faXRlbS13cmFwJywgJ2pzLXRodW1iLXNsaWRlJyk7XG4gICAgICAgICAgXG4gICAgICBzZWxmLnRodW1ibmFpbHMudHJpZ2dlcnMucHVzaCh0aHVtYnNJdGVtV3JhcCk7XG4gICAgICAgICAgXG4gICAgICB0aHVtYnNJdGVtV3JhcC5pbm5lckhUTUwgPSAnPGltZyBzcmM9XCInICsgdGh1bWJzW2ldICsgJ1wiIGNsYXNzPVwiZy10aHVtYm5haWxzX19pbWdcIicgK1xuICAgICAgICAgICAgICAgICAgJyBzdHlsZT1cIm1heC13aWR0aDogMTAwJTtcIj4nO1xuICAgICAgICAgIFxuICAgICAgdGh1bWJzSXRlbS5hcHBlbmRDaGlsZCh0aHVtYnNJdGVtV3JhcCk7XG4gICAgICAgICAgXG4gICAgICB0aHVtYnNMaXN0LmFwcGVuZENoaWxkKHRodW1ic0l0ZW0pO1xuICAgICAgICAgIFxuICAgIH1cbiAgICBcbiAgfVxuXG4gIHRvZ2dsZVRodW1icygpIHtcbiAgICAgIFxuICAgIGxldCBzZWxmID0gdGhpcztcbiAgICBcbiAgICBsZXQgdGh1bWJUcmlnZ2VyID0gc2VsZi50aHVtYm5haWxzLnRyaWdnZXJzO1xuICAgIFxuICAgIC8vIGNvbnNvbGUubG9nKHRodW1iVHJpZ2dlcnNMaXN0KTtcbiAgICBcbiAgICB0aHVtYlRyaWdnZXIuZm9yRWFjaChmdW5jdGlvbihlbCkge1xuICAgIFxuICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgIFxuICAgICAgICBsZXQgdHJpZ2dlclNpYmxpbmdTbGlkZXMgPSBlbC5jbG9zZXN0KCcuZy10aHVtYm5haWxzJykucHJldmlvdXNTaWJsaW5nLmNoaWxkTm9kZXM7XG4gICAgXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHRyaWdnZXJTaWJsaW5nU2xpZGVzKTtcbiAgICBcbiAgICAgICAgbGV0IHNsaWRlcyA9IFtdLnNsaWNlLmNhbGwodHJpZ2dlclNpYmxpbmdTbGlkZXNbMF0uY2hpbGROb2Rlcyk7XG4gICAgXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHNsaWRlcyxzZWxmLmN1cnJlbnRJbmRleCk7XG5cbiAgICAgICAgbGV0IGluZGV4VG9UcmlnZ2VyID0gK2V2ZW50LmN1cnJlbnRUYXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXRodW1iJyk7XG4gICAgXG4gICAgICAgIHNsaWRlc1tzZWxmLmN1cnJlbnRJbmRleF0uY2xhc3NMaXN0LnRvZ2dsZSgnaXMtdmlzaWJsZScpO1xuICAgIFxuICAgICAgICBzZWxmLmN1cnJlbnRJbmRleCA9IGluZGV4VG9UcmlnZ2VyOyAgIFxuICAgICAgICAvLyBjb25zb2xlLmxvZyhzbGlkZXMsc2VsZi5jdXJyZW50SW5kZXgpO1xuICAgICAgICBzZWxmLmNoYW5nZVRodW1ibmFpbHMoKTtcbiAgICBcbiAgICAgICAgc2xpZGVzW3NlbGYuY3VycmVudEluZGV4XS5jbGFzc0xpc3QudG9nZ2xlKCdpcy12aXNpYmxlJyk7XG4gICAgICBcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIFxuICB9XG5cblxuICBcbiAgY2hhbmdlVGh1bWJuYWlscygpIHtcbiAgICBcbiAgICBsZXQgc2VsZiA9IHRoaXM7XG4gICAgbGV0IGluZGV4PXNlbGYuY3VycmVudEluZGV4O1xuICAgIGxldCB0aHVtYlRyaWdnZXIgPSBzZWxmLnRodW1ibmFpbHMudHJpZ2dlcnM7XG4gICAgXG4gICAgc2VsZi5tb3ZlVGh1bWJuYWlscygpO1xuICAgICBcbiAgICB0aHVtYlRyaWdnZXIuZm9yRWFjaChmdW5jdGlvbihlbCkge1xuICAgIFxuICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZSgnaXMtYWN0aXZlJyk7XG4gICAgXG4gICAgICBsZXQgdGh1bWJEYXRhQXR0ciA9ICtlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdGh1bWInKTtcbiAgICBcbiAgICAgIC8vIGNvbnNvbGUubG9nKHRodW1iRGF0YUF0dHIpO1xuICAgIFxuICAgICAgaWYgKHRodW1iRGF0YUF0dHIgPT09IGluZGV4KSB7XG4gICAgXG4gICAgICAgIGVsLmNsYXNzTGlzdC50b2dnbGUoJ2lzLWFjdGl2ZScpO1xuICAgICAgfVxuICAgIFxuICAgIFxuICAgIH0pO1xuICAgIFxuICAgIFxuICB9XG5cblxuICBtb3ZlVGh1bWJuYWlscygpIHtcbiAgICBcbiAgICBsZXQgc2VsZiA9IHRoaXM7XG4gICAgbGV0IGluZGV4PXNlbGYuY3VycmVudEluZGV4O1xuICAgIGxldCBsZWZ0ID0gaW5kZXggKiBzZWxmLnRodW1ibmFpbHMuaXRlbVdpZHRoICsgNTtcbiAgICBcbiAgICBsZXQgdG90YWxXaWR0aCA9IHNlbGYudGh1bWJuYWlscy53aWR0aDtcbiAgICBsZXQgdmlzaWJsZVdpZHRoID0gNjAwO1xuICAgIGxldCBzdG9wUG9pbnQgPSB0b3RhbFdpZHRoIC0gdmlzaWJsZVdpZHRoO1xuICAgIFxuICAgIC8vIGNvbnNvbGUubG9nKGxlZnQsdG90YWxXaWR0aCx2aXNpYmxlV2lkdGgsc3RvcFBvaW50KTtcbiAgICBcbiAgICBpZiAobGVmdCA+PSBzdG9wUG9pbnQpIHtcbiAgICBcbiAgICAgIGxlZnQgPSBzdG9wUG9pbnQ7XG4gICAgfVxuICAgIFxuICAgIGxldCBwb3NpdGlvbkxlZnQgPSAnY2FsYyggLScgKyBsZWZ0ICsgJ3B4JyArICcgKyAxNXB4KSc7XG4gICAgXG4gICAgc2VsZi50aHVtYm5haWxzLmxpc3Quc3R5bGUubGVmdCA9IHBvc2l0aW9uTGVmdDtcbiAgICBcbiAgfVxuXG5cbiAgXG5cbiAgdG9nZ2xlTG9hZGVyKGluaXRpYWwpIHtcblxuICAgIGxldCBzZWxmPXRoaXM7XG5cbiAgICBsZXQgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxmLmdhbGxlcnlXcmFwcGVyKTtcblxuICAgIC8vIGNvbnNvbGUubG9nKGNvbnRhaW5lcik7XG5cbiAgICBsZXQgbG9hZGVyV3JhcHBlciA9IFtdLnNsaWNlLmNhbGwoY29udGFpbmVyLmNoaWxkcmVuKS5maW5kKGZ1bmN0aW9uKGVsKSB7XG4gICAgICAgXG4gICAgICBpZiAoZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdqcy1sb2FkZXItd3JhcHBlcicpKSByZXR1cm4gZWw7XG5cbiAgICB9KTtcblxuICAgIGxldCBsb2FkZXI9W10uc2xpY2UuY2FsbChsb2FkZXJXcmFwcGVyLmNoaWxkcmVuKS5maW5kKGZ1bmN0aW9uKGVsKSB7XG5cbiAgICAgIGlmKGVsLmNsYXNzTGlzdC5jb250YWlucygnbG9hZGVyJykpIHJldHVybiBlbDtcblxuICAgIH0pO1xuXG4gICAgICAvLyBjb25zb2xlLmxvZyhsb2FkZXIpO1xuXG4gICAgbG9hZGVyLmNsYXNzTGlzdC50b2dnbGUoJ2lzLWFjdGl2ZScpO1xuXG5cblxuICAgIHJldHVybiB0cnVlO1xuICAgIFxuXG4gICAgXG5cbiAgfVxuXG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gc3JjL2pzL2dhbGxlcnkuanMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVJBO0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVBBO0FBU0E7QUFDQTtBQUNBO0FBSUE7QUFFQTtBQUNBOzs7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFHQTs7O0FBRUE7QUFDQTtBQUNBO0FBRUE7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUdBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBR0E7OztBQUlBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFJQTtBQUdBOzs7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFLQTtBQUdBOzs7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUVBOzs7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBS0E7OztBQUVBO0FBQ0E7QUFDQTtBQUVBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBSUE7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFHQTs7O0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFFQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFHQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUdBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFJQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUdBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7OztBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFLQTs7Ozs7O0FBLy9CQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///0\n");

/***/ }),
/* 1 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\n(function (ELEMENT) {\n  ELEMENT.matches = ELEMENT.matches || ELEMENT.mozMatchesSelector || ELEMENT.msMatchesSelector || ELEMENT.oMatchesSelector || ELEMENT.webkitMatchesSelector;\n  ELEMENT.closest = ELEMENT.closest || function closest(selector) {\n    if (!this) return null;\n    if (this.matches(selector)) return this;\n    if (!this.parentElement) {\n      return null;\n    } else return this.parentElement.closest(selector);\n  };\n})(Element.prototype);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvanMvcG9seWZpbGxzLmpzPzlkYTYiXSwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKEVMRU1FTlQpIHtcclxuICBFTEVNRU5ULm1hdGNoZXMgPSBFTEVNRU5ULm1hdGNoZXMgfHwgRUxFTUVOVC5tb3pNYXRjaGVzU2VsZWN0b3IgfHwgRUxFTUVOVC5tc01hdGNoZXNTZWxlY3RvciB8fCBFTEVNRU5ULm9NYXRjaGVzU2VsZWN0b3IgfHwgRUxFTUVOVC53ZWJraXRNYXRjaGVzU2VsZWN0b3I7XHJcbiAgRUxFTUVOVC5jbG9zZXN0ID0gRUxFTUVOVC5jbG9zZXN0IHx8IGZ1bmN0aW9uIGNsb3Nlc3Qoc2VsZWN0b3IpIHtcclxuICAgIGlmICghdGhpcykgcmV0dXJuIG51bGw7XHJcbiAgICBpZiAodGhpcy5tYXRjaGVzKHNlbGVjdG9yKSkgcmV0dXJuIHRoaXM7XHJcbiAgICBpZiAoIXRoaXMucGFyZW50RWxlbWVudCkge3JldHVybiBudWxsO31cclxuICAgIGVsc2UgcmV0dXJuIHRoaXMucGFyZW50RWxlbWVudC5jbG9zZXN0KHNlbGVjdG9yKTtcclxuICB9O1xyXG59KEVsZW1lbnQucHJvdG90eXBlKSk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gc3JjL2pzL3BvbHlmaWxscy5qcyJdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///1\n");

/***/ }),
/* 2 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\n__webpack_require__(1);\n\nvar _gallery = __webpack_require__(0);\n\nvar _gallery2 = _interopRequireDefault(_gallery);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar app = {\n\n  initialize: function initialize(settings) {\n\n    var gallery = new _gallery2.default(settings);\n  }\n\n};\n\napp.initialize({\n\n  galleryAmount: '10',\n  galleryItemSelector: 'js-gallery-item',\n  prevSlide: 'js-gallery-prev1',\n  nextSlide: 'js-gallery-next1',\n  container: '.js-gallery-wrap',\n  gallery: 'js-gallery',\n\n  thumbs: true\n  // loader: true,\n  // fullScreenMode: true\n\n});\n\napp.initialize({\n\n  galleryAmount: '100',\n  galleryItemSelector: 'js-gallery-item',\n  prevSlide: 'js-gallery-prev2',\n  nextSlide: 'js-gallery-next2',\n  container: '.js-gallery-wrap2',\n  gallery: 'js-gallery',\n\n  thumbs: true\n  // loader: true,\n  // fullScreenMode: true\n\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvanMvYXBwLmpzPzcxNmYiXSwic291cmNlc0NvbnRlbnQiOlsiXG5pbXBvcnQgJy4vcG9seWZpbGxzJztcblxuaW1wb3J0IEdhbGxlcnkgZnJvbSAnLi9nYWxsZXJ5JztcblxuXG5cblxuXG52YXIgYXBwID0ge1xuXG4gIGluaXRpYWxpemU6IGZ1bmN0aW9uKHNldHRpbmdzKSB7XG5cbiAgICBsZXQgZ2FsbGVyeSA9IG5ldyBHYWxsZXJ5KHNldHRpbmdzKTtcbiAgICBcbiAgICAgIFxuICB9LFxuXG5cbn07XG5cblxuYXBwLmluaXRpYWxpemUoe1xuXG4gICAgXG4gIGdhbGxlcnlBbW91bnQ6ICcxMCcsXG4gIGdhbGxlcnlJdGVtU2VsZWN0b3I6ICdqcy1nYWxsZXJ5LWl0ZW0nLFxuICBwcmV2U2xpZGU6ICdqcy1nYWxsZXJ5LXByZXYxJyxcbiAgbmV4dFNsaWRlOiAnanMtZ2FsbGVyeS1uZXh0MScsXG4gIGNvbnRhaW5lcjogJy5qcy1nYWxsZXJ5LXdyYXAnLFxuICBnYWxsZXJ5OiAnanMtZ2FsbGVyeScsXG4gXG4gIHRodW1iczogdHJ1ZVxuICAvLyBsb2FkZXI6IHRydWUsXG4gIC8vIGZ1bGxTY3JlZW5Nb2RlOiB0cnVlXG5cbn0pO1xuXG5cbmFwcC5pbml0aWFsaXplKHtcblxuICAgIFxuICBnYWxsZXJ5QW1vdW50OiAnMTAwJyxcbiAgZ2FsbGVyeUl0ZW1TZWxlY3RvcjogJ2pzLWdhbGxlcnktaXRlbScsXG4gIHByZXZTbGlkZTogJ2pzLWdhbGxlcnktcHJldjInLFxuICBuZXh0U2xpZGU6ICdqcy1nYWxsZXJ5LW5leHQyJyxcbiAgY29udGFpbmVyOiAnLmpzLWdhbGxlcnktd3JhcDInLFxuICBnYWxsZXJ5OiAnanMtZ2FsbGVyeScsXG4gXG4gIHRodW1iczogdHJ1ZVxuICAvLyBsb2FkZXI6IHRydWUsXG4gIC8vIGZ1bGxTY3JlZW5Nb2RlOiB0cnVlXG5cbn0pO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHNyYy9qcy9hcHAuanMiXSwibWFwcGluZ3MiOiI7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFSQTtBQUNBO0FBWUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFiQTtBQUNBO0FBZ0JBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBYkEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///2\n");

/***/ })
/******/ ]);