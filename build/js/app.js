/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// identity function for calling harmony imports with the correct context
/******/ 	__webpack_require__.i = function(value) { return value; };
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "js/";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 2);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\n(function (ELEMENT) {\n  ELEMENT.matches = ELEMENT.matches || ELEMENT.mozMatchesSelector || ELEMENT.msMatchesSelector || ELEMENT.oMatchesSelector || ELEMENT.webkitMatchesSelector;\n  ELEMENT.closest = ELEMENT.closest || function closest(selector) {\n    if (!this) return null;\n    if (this.matches(selector)) return this;\n    if (!this.parentElement) {\n      return null;\n    } else return this.parentElement.closest(selector);\n  };\n})(Element.prototype);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvanMvcG9seWZpbGxzLmpzPzlkYTYiXSwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKEVMRU1FTlQpIHtcclxuICBFTEVNRU5ULm1hdGNoZXMgPSBFTEVNRU5ULm1hdGNoZXMgfHwgRUxFTUVOVC5tb3pNYXRjaGVzU2VsZWN0b3IgfHwgRUxFTUVOVC5tc01hdGNoZXNTZWxlY3RvciB8fCBFTEVNRU5ULm9NYXRjaGVzU2VsZWN0b3IgfHwgRUxFTUVOVC53ZWJraXRNYXRjaGVzU2VsZWN0b3I7XHJcbiAgRUxFTUVOVC5jbG9zZXN0ID0gRUxFTUVOVC5jbG9zZXN0IHx8IGZ1bmN0aW9uIGNsb3Nlc3Qoc2VsZWN0b3IpIHtcclxuICAgIGlmICghdGhpcykgcmV0dXJuIG51bGw7XHJcbiAgICBpZiAodGhpcy5tYXRjaGVzKHNlbGVjdG9yKSkgcmV0dXJuIHRoaXM7XHJcbiAgICBpZiAoIXRoaXMucGFyZW50RWxlbWVudCkge3JldHVybiBudWxsO31cclxuICAgIGVsc2UgcmV0dXJuIHRoaXMucGFyZW50RWxlbWVudC5jbG9zZXN0KHNlbGVjdG9yKTtcclxuICB9O1xyXG59KEVsZW1lbnQucHJvdG90eXBlKSk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gc3JjL2pzL3BvbHlmaWxscy5qcyJdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///0\n");

/***/ }),
/* 1 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\n// send request\n// initialize slider\n// inititalize thumbnails\n// add navigation\n// add loader\n// check for reusable\n// +bonus: add smooth fade in/ fade out \n// +bonus create buttons on the fly\n\n\ndocument.addEventListener('DOMContentLoaded', function (event) {\n\n  var app = {\n\n    initialize: function initialize(settings) {\n\n      var gallery = new Gallery(settings);\n\n      gallery.initialize();\n    }\n\n    // getGallery: function(gallery) {\n\n    //   gallery.getData();\n\n    //   console.log('getGallery');\n    // },\n\n    // showGallery: function(galleryData) {\n\n    //   let gallery = galleryData;\n    //   console.log('showGallery');\n\n    //   gallery.showData();\n\n\n    // }\n\n  };\n\n  app.initialize({\n\n    galleryAmount: '10',\n    galleryItemSelector: '.js-gallery-item',\n    prevSlide: 'js-gallery-prev',\n    nextSlide: 'js-gallery-next',\n    container: '.js-gallery-wrap',\n    gallery: 'js-gallery',\n\n    thumbs: true\n    // loader: true,\n    // fullScreenMode: true\n\n  });\n\n  app.initialize({\n\n    galleryAmount: '100',\n    galleryItemSelector: '.js-gallery-item',\n    prevSlide: 'js-gallery-prev',\n    nextSlide: 'js-gallery-next',\n    container: '.js-gallery-wrap2',\n    gallery: 'js-gallery',\n\n    thumbs: true\n    // loader: true,\n    // fullScreenMode: true\n\n  });\n});\n\nfunction Gallery(settings) {\n\n  this.settings = settings;\n  this.id = 0;\n  this.dataAmount = settings.galleryAmount;\n  this.data = [];\n  this.galleryWrapper = settings.container;\n  this.gallery = settings.gallery;\n  this.galleryItemToSlide = settings.galleryItemSelector;\n  this.prevSlideBtn = 'js-gallery-prev' || settings.prevSlide;\n  this.nextSlideBtn = 'js-gallery-next' || settings.nextSlide;\n  this.currentSlide = 0 || settings.initialSlide;\n  this.currentIndex = 0;\n  this.thumbsHeight = 100;\n  this.thumbsItemWidth = 1.15 * this.thumbsHeight;\n  this.thumbsWidth = 0;\n  this.thumbsListWidth = 0;\n  this.thumbTriggers = [];\n  this.thumbsListPosition = 0;\n}\n\nGallery.prototype.initialize = function () {\n\n  this.getData(0);\n};\n\nGallery.prototype.createCORSRequest = function (method, url) {\n\n  var xhr = new XMLHttpRequest();\n  if ('withCredentials' in xhr) {\n\n    // Check if the XMLHttpRequest object has a \"withCredentials\" property.\n    // \"withCredentials\" only exists on XMLHTTPRequest2 objects.\n    xhr.open(method, url, true);\n  } else if (typeof XDomainRequest != 'undefined') {\n\n    // Otherwise, check if XDomainRequest.\n    // XDomainRequest only exists in IE, and is IE's way of making CORS requests.\n    xhr = new XDomainRequest();\n    xhr.open(method, url);\n  } else {\n\n    // Otherwise, CORS is not supported by the browser.\n    xhr = null;\n  }\n  // console.log(xhr);\n  return xhr;\n};\n\nGallery.prototype.getData = function () {\n\n  var self = this;\n\n  var url = 'images.json';\n\n  var xhr = self.createCORSRequest('GET', url);\n\n  if (!xhr) {\n    throw new Error('CORS not supported');\n  }\n\n  // Response handlers.\n  xhr.onload = function () {\n    var responseText = xhr.responseText;\n\n    self.handleResponse(responseText);\n    // console.log(parsedJSON);\n\n  };\n\n  xhr.onerror = function () {\n\n    console.log('Woops, there was an error making the request.');\n  };\n\n  xhr.send();\n};\n\nGallery.prototype.handleResponse = function (response) {\n\n  var self = this;\n\n  self.initiateData(response);\n\n  self.showData();\n};\n\nGallery.prototype.showData = function () {\n  var self = this;\n\n  var galleryItems = self.data;\n\n  var galleryContainer = [].slice.call(document.querySelectorAll(this.galleryWrapper));\n\n  galleryContainer.forEach(function (el) {\n\n    self.fillGallery(el, galleryItems);\n\n    self.addThumbs(el, galleryItems);\n  });\n};\n\n/* method: User::initiateData()\n * parses data from JSON representation \n */\n\nGallery.prototype.initiateData = function (imagesString) {\n\n  var self = this;\n\n  var items = JSON.parse(imagesString);\n\n  var limittedArray = items.slice(0, this.dataAmount);\n\n  // console.log(limittedArray);\n\n\n  limittedArray.map(function (el) {\n\n    self.data.push(el);\n  });\n\n  // console.log(self.data);\n};\n\nGallery.prototype.fillGallery = function (el, data) {\n\n  var galleryId = this.id;\n  galleryId++;\n\n  var items = data;\n  var itemsAmount = items.length;\n\n  var galleryContainer = el;\n  var galleryMinHeight = el.offsetHeight;\n\n  // console.log(el,galleryMinHeight);\n\n  var gallery = document.createElement('div');\n\n  gallery.classList.add('gallery', 'js-gallery');\n  gallery.style.minHeight = galleryMinHeight - this.thumbsHeight + 'px';\n\n  galleryContainer.appendChild(gallery);\n\n  this.thumbsWidth = gallery.offsetWidth;\n\n  var galleryMaxWidth = this.thumbsWidth;\n\n  var galleryList = document.createElement('ul');\n\n  galleryList.classList.add('gallery__list', 'js-gallery-list');\n  galleryList.style.minHeight = galleryMinHeight - this.thumbsHeight + 'px';\n\n  for (var j = 0; j < itemsAmount; j++) {\n\n    var galleryItem = document.createElement('li');\n    galleryItem.classList.add('gallery__item', 'js-gallery-item');\n\n    var galleryItemID = 'slide' + items[j].id;\n    galleryItem.setAttribute('id', galleryItemID);\n\n    galleryItem.style.maxWidth = galleryMaxWidth + 'px';\n\n    galleryItem.innerHTML = '<img src=\"' + items[j].url + '\" class=\"gallery__img\"> ';\n\n    galleryList.appendChild(galleryItem);\n  }\n\n  this.thumbsListWidth = this.thumbsItemWidth * (itemsAmount + 1);\n\n  // console.log(galleryList);\n\n\n  gallery.appendChild(galleryList);\n\n  // if (!this.prevSlide) {\n\n  //   let prevSlideBtn=document.createElement('button');\n  //       prevSlideBtn.classList.add(this.prevSlide)\n  // }\n\n\n  this.navigation(galleryContainer, galleryList);\n};\n\nGallery.prototype.navigation = function (galleryContainer, galleryList) {\n\n  var self = this;\n\n  var thisGalleryWrapper = galleryContainer;\n  var thisGalleryList = galleryList;\n  // console.log(thisGalleryWrapper);\n\n  var thisGalleryChildren = [].slice.call(thisGalleryWrapper.children);\n\n  // console.log(thisGalleryChildren);\n\n\n  var nextSlideButton = thisGalleryChildren.filter(function (el) {\n\n    if (el.classList.contains(self.nextSlideBtn)) {\n      return el;\n    }\n  });\n\n  // console.log(nextSlideButton);\n\n\n  var prevSlideButton = thisGalleryChildren.filter(function (el) {\n\n    if (el.classList.contains(self.prevSlideBtn)) {\n      return el;\n    }\n  });\n\n  // console.log(prevSlideButton);\n\n  var gallery = thisGalleryChildren.filter(function (el) {\n\n    if (el.classList.contains(self.gallery)) {\n      return el;\n    }\n  });\n\n  var slidesNodeList = thisGalleryList.childNodes;\n  // console.log(thisGalleryList);\n\n  var slides = [].slice.call(slidesNodeList);\n\n  var firstSlides = slides.filter(function (el) {\n\n    if (el.getAttribute('id') === 'slide1') return el;\n  });\n\n  // console.log(firstSlides);\n\n  firstSlides.forEach(function (el) {\n\n    el.classList.add('is-visible');\n  });\n\n  this.nextSlide(slides, nextSlideButton);\n\n  this.prevSlide(slides, prevSlideButton);\n};\n\nGallery.prototype.nextSlide = function (allSlides, nextBtn) {\n\n  var nextSlideBtn = nextBtn;\n  var slides = allSlides;\n  var self = this;\n  // let self.currentIndex= self.self.currentIndexndex;\n  // let currentSlide=self.currentSlide;\n\n  var currentSlide = slides.filter(function (el) {\n\n    if (el.classList.contains('is-visible')) {\n      return el;\n    }\n  });\n\n  currentSlide.forEach(function (element, index, array) {\n\n    self.currentIndex = slides.indexOf(array[index]);\n\n    // console.log(slides,currentSlide,self.currentIndex);\n\n\n    nextSlideBtn.forEach(function (e) {\n\n      // console.log(slides,currentSlide);\n\n      e.addEventListener('click', function (event) {\n\n        slides[self.currentIndex].classList.toggle('is-visible');\n\n        self.currentIndex = (self.currentIndex + 1) % slides.length;\n\n        slides[self.currentIndex].classList.toggle('is-visible');\n\n        console.log(self.currentIndex);\n        self.changeThumbnails();\n      });\n    });\n  });\n};\n\nGallery.prototype.prevSlide = function (allSlides, prevBtn) {\n\n  var self = this;\n  var slides = allSlides;\n  // let self.currentIndex= self.self.currentIndexndex;\n  var lastSlide = slides.length - 1;\n\n  var prevSlideBtn = prevBtn;\n\n  var currentSlider = slides.filter(function (el) {\n\n    if (el.classList.contains('is-visible')) {\n      return el;\n    }\n  });\n\n  currentSlider.forEach(function (element, index, array) {\n\n    self.currentIndex = slides.indexOf(array[index]);\n\n    prevSlideBtn.forEach(function (el) {\n\n      el.addEventListener('click', function (event) {\n\n        // console.log(slides);\n\n\n        slides[self.currentIndex].classList.toggle('is-visible');\n\n        if (self.currentIndex <= 0) {\n\n          self.currentIndex = lastSlide;\n        } else if (self.currentIndex > 0 && self.currentIndex <= lastSlide) {\n\n          self.currentIndex--;\n        }\n\n        slides[self.currentIndex].classList.toggle('is-visible');\n\n        console.log(self.currentIndex);\n        self.changeThumbnails();\n      });\n    });\n  });\n};\n\nGallery.prototype.addThumbs = function (galleryContainer, galleryItems) {\n\n  var self = this;\n  // let thumbsUrl = [];\n  var data = galleryItems;\n  var container = galleryContainer;\n\n  // console.log(data);\n\n\n  var thumbsUrl = data.map(function (el) {\n\n    return el.thumbnailUrl;\n  });\n\n  var thumbsHTML = document.createElement('div');\n\n  thumbsHTML.style.minHeight = self.thumbsHeight + 'px';\n  thumbsHTML.classList.add('g-thumbnails');\n\n  var thumbsHTMLList = document.createElement('ul');\n  var thumbsHTMLListWidth = this.thumbsListWidth;\n  thumbsHTMLList.style.width = thumbsHTMLListWidth + 'px';\n\n  var thumbsHTMLListHeight = self.thumbsHeight - 10;\n  thumbsHTMLList.style.height = thumbsHTMLListHeight + 'px';\n\n  thumbsHTMLList.classList.add('g-thumbnails__list');\n\n  this.thumbsListPosition = self.currentIndex * self.thumbsItemWidth + 5;\n\n  for (var i = 0; i < thumbsUrl.length; i++) {\n\n    var thumbsHTMLItem = document.createElement('li');\n\n    var thumbsHTMLItemWidth = this.thumbsItemWidth;\n    thumbsHTMLItem.style.width = thumbsHTMLItemWidth + 'px';\n    thumbsHTMLItem.style.height = thumbsHTMLListHeight + 'px';\n    var thumbsHTMLItemPosition = self.currentIndex * thumbsHTMLItemWidth;\n\n    thumbsHTMLItem.classList.add('g-thumbnails__item');\n\n    var thumbsHTMLItemWrap = document.createElement('div');\n    thumbsHTMLItemWrap.setAttribute('data-thumb', i);\n    thumbsHTMLItemWrap.classList.add('g-thumbnails__item-wrap', 'js-thumb-slide');\n\n    self.thumbTriggers.push(thumbsHTMLItemWrap);\n\n    thumbsHTMLItemWrap.innerHTML = '<img src=\"' + thumbsUrl[i] + '\" class=\"g-thumbnails__img\"' + ' style=\"max-width: 100%;\">';\n\n    thumbsHTMLItem.appendChild(thumbsHTMLItemWrap);\n\n    thumbsHTMLList.appendChild(thumbsHTMLItem);\n  }\n\n  // console.log(self.thumbTriggers);\n\n\n  thumbsHTML.appendChild(thumbsHTMLList);\n\n  // console.log(container);\n  container.appendChild(thumbsHTML);\n\n  this.moveThumbnails(thumbsHTMLList, self.currentIndex);\n\n  this.toggleThumbs();\n};\n\nGallery.prototype.toggleThumbs = function () {\n\n  var self = this;\n\n  var thumbTrigger = self.thumbTriggers;\n\n  // let thumbTriggersList= thumbTrigger[0].closest('.g-thumbnails__list');\n\n  // console.log(thumbTriggersList);\n\n  thumbTrigger.forEach(function (el) {\n\n    el.addEventListener('click', function (event) {\n\n      var triggerSiblingSlides = el.closest('.g-thumbnails').previousSibling.childNodes;\n\n      // console.log(triggerSiblingSlides);\n\n      var slides = triggerSiblingSlides[0].childNodes;\n\n      var indexToTrigger = +event.currentTarget.getAttribute('data-thumb');\n\n      slides[self.currentIndex].classList.toggle('is-visible');\n\n      self.currentIndex = indexToTrigger;\n\n      self.changeThumbnails();\n\n      // el.classList.toggle('is-active');\n\n\n      slides[self.currentIndex].classList.toggle('is-visible');\n\n      // console.log(self.currentIndex);\n    });\n  });\n};\n\nGallery.prototype.changeThumbnails = function (thumbs) {\n\n  var self = this;\n\n  var thumbTrigger = self.thumbTriggers;\n  var index = self.currentIndex;\n\n  var thumbTriggersList = thumbTrigger[0].closest('.g-thumbnails__list');\n\n  self.moveThumbnails(thumbTriggersList, self.currentIndex);\n\n  thumbTrigger.forEach(function (el) {\n\n    el.classList.remove('is-active');\n\n    var thumbDataAttr = +el.getAttribute('data-thumb');\n\n    // console.log(thumbDataAttr);\n\n    if (thumbDataAttr === index) {\n\n      el.classList.toggle('is-active');\n    }\n  });\n};\n\nGallery.prototype.moveThumbnails = function (thumbs, index) {\n\n  var self = this;\n\n  var left = index * self.thumbsItemWidth + 5;\n\n  var totalWidth = thumbs.offsetWidth;\n  var visibleWidth = self.thumbsWidth;\n  var stopPoint = totalWidth - visibleWidth;\n\n  // console.log(left,totalWidth,visibleWidth,stopPoint);\n\n  if (left >= stopPoint) {\n\n    left = stopPoint;\n  }\n\n  var positionLeft = 'calc( -' + left + 'px' + ' + 15px)';\n\n  thumbs.style.left = positionLeft;\n};\n\nGallery.prototype.addLoader = function () {};\n\nGallery.prototype.fullScreenMode = function () {};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvanMvc2xpZGVyLmpzP2QxYzIiXSwic291cmNlc0NvbnRlbnQiOlsiXG5cblxuXG4vLyBzZW5kIHJlcXVlc3Rcbi8vIGluaXRpYWxpemUgc2xpZGVyXG4vLyBpbml0aXRhbGl6ZSB0aHVtYm5haWxzXG4vLyBhZGQgbmF2aWdhdGlvblxuLy8gYWRkIGxvYWRlclxuLy8gY2hlY2sgZm9yIHJldXNhYmxlXG4vLyArYm9udXM6IGFkZCBzbW9vdGggZmFkZSBpbi8gZmFkZSBvdXQgXG4vLyArYm9udXMgY3JlYXRlIGJ1dHRvbnMgb24gdGhlIGZseVxuXG5cblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKGV2ZW50KSB7XG5cblxuICB2YXIgYXBwID0ge1xuXG4gICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oc2V0dGluZ3MpIHtcblxuICAgICAgbGV0IGdhbGxlcnkgPSBuZXcgR2FsbGVyeShzZXR0aW5ncyk7XG4gICAgXG4gICAgICBnYWxsZXJ5LmluaXRpYWxpemUoKTtcbiAgICAgIFxuICAgIH0sXG5cbiAgICAvLyBnZXRHYWxsZXJ5OiBmdW5jdGlvbihnYWxsZXJ5KSB7XG4gICAgICBcbiAgICAvLyAgIGdhbGxlcnkuZ2V0RGF0YSgpO1xuXG4gICAgLy8gICBjb25zb2xlLmxvZygnZ2V0R2FsbGVyeScpO1xuICAgIC8vIH0sXG5cbiAgICAvLyBzaG93R2FsbGVyeTogZnVuY3Rpb24oZ2FsbGVyeURhdGEpIHtcblxuICAgIC8vICAgbGV0IGdhbGxlcnkgPSBnYWxsZXJ5RGF0YTtcbiAgICAvLyAgIGNvbnNvbGUubG9nKCdzaG93R2FsbGVyeScpO1xuXG4gICAgLy8gICBnYWxsZXJ5LnNob3dEYXRhKCk7XG5cblxuICAgIC8vIH1cblxuICB9O1xuXG5cbiAgYXBwLmluaXRpYWxpemUoe1xuXG4gICAgXG4gICAgZ2FsbGVyeUFtb3VudDogJzEwJyxcbiAgICBnYWxsZXJ5SXRlbVNlbGVjdG9yOiAnLmpzLWdhbGxlcnktaXRlbScsXG4gICAgcHJldlNsaWRlOiAnanMtZ2FsbGVyeS1wcmV2JyxcbiAgICBuZXh0U2xpZGU6ICdqcy1nYWxsZXJ5LW5leHQnLFxuICAgIGNvbnRhaW5lcjogJy5qcy1nYWxsZXJ5LXdyYXAnLFxuICAgIGdhbGxlcnk6ICdqcy1nYWxsZXJ5JyxcbiBcbiAgICB0aHVtYnM6IHRydWVcbiAgICAvLyBsb2FkZXI6IHRydWUsXG4gICAgLy8gZnVsbFNjcmVlbk1vZGU6IHRydWVcblxuICB9KTtcblxuXG4gIGFwcC5pbml0aWFsaXplKHtcblxuICAgIFxuICAgIGdhbGxlcnlBbW91bnQ6ICcxMDAnLFxuICAgIGdhbGxlcnlJdGVtU2VsZWN0b3I6ICcuanMtZ2FsbGVyeS1pdGVtJyxcbiAgICBwcmV2U2xpZGU6ICdqcy1nYWxsZXJ5LXByZXYnLFxuICAgIG5leHRTbGlkZTogJ2pzLWdhbGxlcnktbmV4dCcsXG4gICAgY29udGFpbmVyOiAnLmpzLWdhbGxlcnktd3JhcDInLFxuICAgIGdhbGxlcnk6ICdqcy1nYWxsZXJ5JyxcbiBcbiAgICB0aHVtYnM6IHRydWVcbiAgICAvLyBsb2FkZXI6IHRydWUsXG4gICAgLy8gZnVsbFNjcmVlbk1vZGU6IHRydWVcblxuICB9KTtcblxuXG59KTsgXG5cblxuXG5mdW5jdGlvbiBHYWxsZXJ5KHNldHRpbmdzKSB7XG5cbiAgdGhpcy5zZXR0aW5ncz1zZXR0aW5ncztcbiAgdGhpcy5pZD0wO1xuICB0aGlzLmRhdGFBbW91bnQ9c2V0dGluZ3MuZ2FsbGVyeUFtb3VudDtcbiAgdGhpcy5kYXRhPVtdO1xuICB0aGlzLmdhbGxlcnlXcmFwcGVyPXNldHRpbmdzLmNvbnRhaW5lcjtcbiAgdGhpcy5nYWxsZXJ5PXNldHRpbmdzLmdhbGxlcnk7XG4gIHRoaXMuZ2FsbGVyeUl0ZW1Ub1NsaWRlPXNldHRpbmdzLmdhbGxlcnlJdGVtU2VsZWN0b3I7XG4gIHRoaXMucHJldlNsaWRlQnRuPSAnanMtZ2FsbGVyeS1wcmV2JyB8fCBzZXR0aW5ncy5wcmV2U2xpZGU7XG4gIHRoaXMubmV4dFNsaWRlQnRuPSAnanMtZ2FsbGVyeS1uZXh0JyB8fCBzZXR0aW5ncy5uZXh0U2xpZGU7XG4gIHRoaXMuY3VycmVudFNsaWRlPTAgfHwgc2V0dGluZ3MuaW5pdGlhbFNsaWRlO1xuICB0aGlzLmN1cnJlbnRJbmRleD0wO1xuICB0aGlzLnRodW1ic0hlaWdodD0xMDA7XG4gIHRoaXMudGh1bWJzSXRlbVdpZHRoPTEuMTUqdGhpcy50aHVtYnNIZWlnaHQ7XG4gIHRoaXMudGh1bWJzV2lkdGg9MDtcbiAgdGhpcy50aHVtYnNMaXN0V2lkdGg9MDtcbiAgdGhpcy50aHVtYlRyaWdnZXJzPVtdO1xuICB0aGlzLnRodW1ic0xpc3RQb3NpdGlvbj0wO1xuXG5cbn1cblxuXG5cblxuXG5HYWxsZXJ5LnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24oKSB7XG4gIFxuICB0aGlzLmdldERhdGEoMCk7XG5cbn07XG5cblxuR2FsbGVyeS5wcm90b3R5cGUuY3JlYXRlQ09SU1JlcXVlc3QgPSBmdW5jdGlvbihtZXRob2QsdXJsKSB7XG5cblxuICBsZXQgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gIGlmICgnd2l0aENyZWRlbnRpYWxzJyBpbiB4aHIpIHtcblxuICAgIC8vIENoZWNrIGlmIHRoZSBYTUxIdHRwUmVxdWVzdCBvYmplY3QgaGFzIGEgXCJ3aXRoQ3JlZGVudGlhbHNcIiBwcm9wZXJ0eS5cbiAgICAvLyBcIndpdGhDcmVkZW50aWFsc1wiIG9ubHkgZXhpc3RzIG9uIFhNTEhUVFBSZXF1ZXN0MiBvYmplY3RzLlxuICAgIHhoci5vcGVuKG1ldGhvZCwgdXJsLCB0cnVlKTtcblxuICB9IGVsc2UgaWYgKHR5cGVvZiBYRG9tYWluUmVxdWVzdCAhPSAndW5kZWZpbmVkJykge1xuXG4gICAgLy8gT3RoZXJ3aXNlLCBjaGVjayBpZiBYRG9tYWluUmVxdWVzdC5cbiAgICAvLyBYRG9tYWluUmVxdWVzdCBvbmx5IGV4aXN0cyBpbiBJRSwgYW5kIGlzIElFJ3Mgd2F5IG9mIG1ha2luZyBDT1JTIHJlcXVlc3RzLlxuICAgIHhociA9IG5ldyBYRG9tYWluUmVxdWVzdCgpO1xuICAgIHhoci5vcGVuKG1ldGhvZCwgdXJsKTtcblxuICB9IGVsc2Uge1xuXG4gICAgLy8gT3RoZXJ3aXNlLCBDT1JTIGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhlIGJyb3dzZXIuXG4gICAgeGhyID0gbnVsbDtcblxuICB9XG4gIC8vIGNvbnNvbGUubG9nKHhocik7XG4gIHJldHVybiB4aHI7XG5cbn07XG5cblxuR2FsbGVyeS5wcm90b3R5cGUuZ2V0RGF0YSA9IGZ1bmN0aW9uKCkge1xuXG4gIGxldCBzZWxmPXRoaXM7XG5cbiAgbGV0IHVybD0naW1hZ2VzLmpzb24nO1xuXG4gIGxldCB4aHIgPSBzZWxmLmNyZWF0ZUNPUlNSZXF1ZXN0KCdHRVQnLCB1cmwpO1xuXG4gIGlmICgheGhyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdDT1JTIG5vdCBzdXBwb3J0ZWQnKTtcbiAgfVxuXG4gIC8vIFJlc3BvbnNlIGhhbmRsZXJzLlxuICB4aHIub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgbGV0IHJlc3BvbnNlVGV4dCA9IHhoci5yZXNwb25zZVRleHQ7XG5cbiAgICBzZWxmLmhhbmRsZVJlc3BvbnNlKHJlc3BvbnNlVGV4dCk7XG4gICAgLy8gY29uc29sZS5sb2cocGFyc2VkSlNPTik7XG4gICAgXG4gIFxuICB9O1xuXG4gIHhoci5vbmVycm9yID0gZnVuY3Rpb24oKSB7XG5cbiAgICBjb25zb2xlLmxvZygnV29vcHMsIHRoZXJlIHdhcyBhbiBlcnJvciBtYWtpbmcgdGhlIHJlcXVlc3QuJyk7XG4gIH07XG5cbiAgeGhyLnNlbmQoKTtcblxufTtcblxuXG5HYWxsZXJ5LnByb3RvdHlwZS5oYW5kbGVSZXNwb25zZSA9IGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG5cbiAgbGV0IHNlbGY9IHRoaXM7XG5cbiAgc2VsZi5pbml0aWF0ZURhdGEocmVzcG9uc2UpO1xuXG4gIHNlbGYuc2hvd0RhdGEoKTtcbiAgIFxuXG59O1xuXG5cblxuR2FsbGVyeS5wcm90b3R5cGUuc2hvd0RhdGEgPSBmdW5jdGlvbigpIHtcbiAgbGV0IHNlbGY9dGhpcztcblxuICBsZXQgZ2FsbGVyeUl0ZW1zPXNlbGYuZGF0YTtcbiAgXG4gIGxldCBnYWxsZXJ5Q29udGFpbmVyPVtdLnNsaWNlLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLmdhbGxlcnlXcmFwcGVyKSk7XG5cblxuICBnYWxsZXJ5Q29udGFpbmVyLmZvckVhY2goZnVuY3Rpb24oZWwpIHtcblxuICAgIFxuICAgIHNlbGYuZmlsbEdhbGxlcnkoZWwsZ2FsbGVyeUl0ZW1zKTtcblxuICAgIHNlbGYuYWRkVGh1bWJzKGVsLGdhbGxlcnlJdGVtcyk7XG5cblxuICB9KTtcblxuXG59O1xuXG5cblxuLyogbWV0aG9kOiBVc2VyOjppbml0aWF0ZURhdGEoKVxuICogcGFyc2VzIGRhdGEgZnJvbSBKU09OIHJlcHJlc2VudGF0aW9uIFxuICovXG5cblxuR2FsbGVyeS5wcm90b3R5cGUuaW5pdGlhdGVEYXRhID0gZnVuY3Rpb24oaW1hZ2VzU3RyaW5nKSB7XG4gXG4gIGxldCBzZWxmPXRoaXM7XG5cbiAgbGV0IGl0ZW1zID0gSlNPTi5wYXJzZShpbWFnZXNTdHJpbmcpO1xuXG5cblxuICBsZXQgbGltaXR0ZWRBcnJheSA9IGl0ZW1zLnNsaWNlKDAsdGhpcy5kYXRhQW1vdW50KTtcblxuICAvLyBjb25zb2xlLmxvZyhsaW1pdHRlZEFycmF5KTtcblxuXG4gIGxpbWl0dGVkQXJyYXkubWFwKGZ1bmN0aW9uKGVsKSB7XG5cbiAgICBzZWxmLmRhdGEucHVzaChlbCk7XG5cbiAgfSk7XG5cbiAgLy8gY29uc29sZS5sb2coc2VsZi5kYXRhKTtcblxufTtcblxuXG5cblxuR2FsbGVyeS5wcm90b3R5cGUuZmlsbEdhbGxlcnkgPSBmdW5jdGlvbihlbCxkYXRhKSB7XG5cbiAgbGV0IGdhbGxlcnlJZD10aGlzLmlkO1xuICBnYWxsZXJ5SWQrKztcblxuICBsZXQgaXRlbXM9ZGF0YTtcbiAgbGV0IGl0ZW1zQW1vdW50PWl0ZW1zLmxlbmd0aDtcblxuICBsZXQgZ2FsbGVyeUNvbnRhaW5lcj1lbDtcbiAgbGV0IGdhbGxlcnlNaW5IZWlnaHQ9ZWwub2Zmc2V0SGVpZ2h0O1xuXG4gIC8vIGNvbnNvbGUubG9nKGVsLGdhbGxlcnlNaW5IZWlnaHQpO1xuXG4gIGxldCBnYWxsZXJ5PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBcbiAgZ2FsbGVyeS5jbGFzc0xpc3QuYWRkKCdnYWxsZXJ5JywgJ2pzLWdhbGxlcnknKTtcbiAgZ2FsbGVyeS5zdHlsZS5taW5IZWlnaHQ9KGdhbGxlcnlNaW5IZWlnaHQgLSB0aGlzLnRodW1ic0hlaWdodCkrJ3B4JztcblxuXG5cbiAgZ2FsbGVyeUNvbnRhaW5lci5hcHBlbmRDaGlsZChnYWxsZXJ5KTtcblxuXG4gIHRoaXMudGh1bWJzV2lkdGg9Z2FsbGVyeS5vZmZzZXRXaWR0aDtcbiAgXG4gIGxldCBnYWxsZXJ5TWF4V2lkdGg9dGhpcy50aHVtYnNXaWR0aDtcbiBcblxuICBsZXQgZ2FsbGVyeUxpc3Q9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKTtcblxuICBnYWxsZXJ5TGlzdC5jbGFzc0xpc3QuYWRkKCdnYWxsZXJ5X19saXN0JywgJ2pzLWdhbGxlcnktbGlzdCcpO1xuICBnYWxsZXJ5TGlzdC5zdHlsZS5taW5IZWlnaHQ9KGdhbGxlcnlNaW5IZWlnaHQtIHRoaXMudGh1bWJzSGVpZ2h0KSsncHgnO1xuXG4gIGZvciAobGV0IGo9MDsgajxpdGVtc0Ftb3VudDtqKyspIHtcblxuICAgXG5cbiAgICBsZXQgZ2FsbGVyeUl0ZW09ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgICBnYWxsZXJ5SXRlbS5jbGFzc0xpc3QuYWRkKCdnYWxsZXJ5X19pdGVtJywgJ2pzLWdhbGxlcnktaXRlbScpO1xuXG4gICAgbGV0IGdhbGxlcnlJdGVtSUQ9J3NsaWRlJytpdGVtc1tqXS5pZDtcbiAgICBnYWxsZXJ5SXRlbS5zZXRBdHRyaWJ1dGUoJ2lkJywgZ2FsbGVyeUl0ZW1JRCk7XG5cbiAgICBnYWxsZXJ5SXRlbS5zdHlsZS5tYXhXaWR0aD1nYWxsZXJ5TWF4V2lkdGgrJ3B4JztcblxuICAgIGdhbGxlcnlJdGVtLmlubmVySFRNTD0nPGltZyBzcmM9XCInK2l0ZW1zW2pdLnVybCsnXCIgY2xhc3M9XCJnYWxsZXJ5X19pbWdcIj4gJztcbiAgICBcbiAgICBnYWxsZXJ5TGlzdC5hcHBlbmRDaGlsZChnYWxsZXJ5SXRlbSk7XG5cbiAgfVxuXG5cbiAgdGhpcy50aHVtYnNMaXN0V2lkdGg9dGhpcy50aHVtYnNJdGVtV2lkdGgqKGl0ZW1zQW1vdW50KzEpO1xuXG4gXG4gIC8vIGNvbnNvbGUubG9nKGdhbGxlcnlMaXN0KTtcblxuXG5cbiAgZ2FsbGVyeS5hcHBlbmRDaGlsZChnYWxsZXJ5TGlzdCk7XG5cblxuICAvLyBpZiAoIXRoaXMucHJldlNsaWRlKSB7XG5cbiAgLy8gICBsZXQgcHJldlNsaWRlQnRuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAvLyAgICAgICBwcmV2U2xpZGVCdG4uY2xhc3NMaXN0LmFkZCh0aGlzLnByZXZTbGlkZSlcbiAgLy8gfVxuXG5cblxuICBcblxuICB0aGlzLm5hdmlnYXRpb24oZ2FsbGVyeUNvbnRhaW5lcixnYWxsZXJ5TGlzdCk7XG4gXG59O1xuXG5cblxuR2FsbGVyeS5wcm90b3R5cGUubmF2aWdhdGlvbiA9IGZ1bmN0aW9uKGdhbGxlcnlDb250YWluZXIsZ2FsbGVyeUxpc3QpIHtcblxuICBsZXQgc2VsZj10aGlzO1xuXG5cbiAgbGV0IHRoaXNHYWxsZXJ5V3JhcHBlcj1nYWxsZXJ5Q29udGFpbmVyO1xuICBsZXQgdGhpc0dhbGxlcnlMaXN0PWdhbGxlcnlMaXN0O1xuICAvLyBjb25zb2xlLmxvZyh0aGlzR2FsbGVyeVdyYXBwZXIpO1xuXG4gIGxldCB0aGlzR2FsbGVyeUNoaWxkcmVuPVtdLnNsaWNlLmNhbGwodGhpc0dhbGxlcnlXcmFwcGVyLmNoaWxkcmVuKTtcblxuICAvLyBjb25zb2xlLmxvZyh0aGlzR2FsbGVyeUNoaWxkcmVuKTtcblxuXG5cbiAgXG4gIGxldCBuZXh0U2xpZGVCdXR0b249IHRoaXNHYWxsZXJ5Q2hpbGRyZW4uZmlsdGVyKGZ1bmN0aW9uKGVsKSB7XG5cbiAgICBpZihlbC5jbGFzc0xpc3QuY29udGFpbnMoc2VsZi5uZXh0U2xpZGVCdG4pKSB7IHJldHVybiBlbDsgfVxuXG4gIH0pO1xuXG5cbiAgLy8gY29uc29sZS5sb2cobmV4dFNsaWRlQnV0dG9uKTtcblxuXG4gIGxldCBwcmV2U2xpZGVCdXR0b249IHRoaXNHYWxsZXJ5Q2hpbGRyZW4uZmlsdGVyKGZ1bmN0aW9uKGVsKSB7XG5cbiAgICBpZihlbC5jbGFzc0xpc3QuY29udGFpbnMoc2VsZi5wcmV2U2xpZGVCdG4pKSB7IHJldHVybiBlbDsgfVxuXG4gIH0pO1xuXG4gIC8vIGNvbnNvbGUubG9nKHByZXZTbGlkZUJ1dHRvbik7XG5cbiAgbGV0IGdhbGxlcnkgPSB0aGlzR2FsbGVyeUNoaWxkcmVuLmZpbHRlcihmdW5jdGlvbihlbCkge1xuXG4gICAgaWYoZWwuY2xhc3NMaXN0LmNvbnRhaW5zKHNlbGYuZ2FsbGVyeSkpIHtyZXR1cm4gZWw7fVxuXG4gIH0pO1xuXG4gIGxldCBzbGlkZXNOb2RlTGlzdD10aGlzR2FsbGVyeUxpc3QuY2hpbGROb2RlcztcbiAgLy8gY29uc29sZS5sb2codGhpc0dhbGxlcnlMaXN0KTtcblxuICBsZXQgc2xpZGVzID0gW10uc2xpY2UuY2FsbChzbGlkZXNOb2RlTGlzdCk7XG5cblxuICBsZXQgZmlyc3RTbGlkZXM9IHNsaWRlcy5maWx0ZXIoZnVuY3Rpb24oZWwpIHtcblxuICAgIGlmKGVsLmdldEF0dHJpYnV0ZSgnaWQnKT09PSdzbGlkZTEnKSByZXR1cm4gZWw7XG5cbiAgfSk7XG5cblxuICAvLyBjb25zb2xlLmxvZyhmaXJzdFNsaWRlcyk7XG5cbiAgZmlyc3RTbGlkZXMuZm9yRWFjaChmdW5jdGlvbihlbCkge1xuXG4gICAgZWwuY2xhc3NMaXN0LmFkZCgnaXMtdmlzaWJsZScpO1xuXG4gIH0pO1xuIFxuXG5cbiAgdGhpcy5uZXh0U2xpZGUoc2xpZGVzLG5leHRTbGlkZUJ1dHRvbik7XG5cbiAgdGhpcy5wcmV2U2xpZGUoc2xpZGVzLHByZXZTbGlkZUJ1dHRvbik7XG5cbiBcblxuXG59O1xuXG5cblxuR2FsbGVyeS5wcm90b3R5cGUubmV4dFNsaWRlID0gZnVuY3Rpb24oYWxsU2xpZGVzLG5leHRCdG4pIHtcblxuICBsZXQgbmV4dFNsaWRlQnRuPW5leHRCdG47XG4gIGxldCBzbGlkZXM9YWxsU2xpZGVzO1xuICBsZXQgc2VsZj10aGlzOyBcbiAgLy8gbGV0IHNlbGYuY3VycmVudEluZGV4PSBzZWxmLnNlbGYuY3VycmVudEluZGV4bmRleDtcbiAgLy8gbGV0IGN1cnJlbnRTbGlkZT1zZWxmLmN1cnJlbnRTbGlkZTtcblxuICBsZXQgY3VycmVudFNsaWRlPXNsaWRlcy5maWx0ZXIoZnVuY3Rpb24oZWwpIHtcblxuICAgIGlmKGVsLmNsYXNzTGlzdC5jb250YWlucygnaXMtdmlzaWJsZScpKSB7IHJldHVybiBlbDt9XG5cbiAgfSk7XG5cbiAgY3VycmVudFNsaWRlLmZvckVhY2goZnVuY3Rpb24oZWxlbWVudCwgaW5kZXgsIGFycmF5KSB7XG5cblxuICAgIHNlbGYuY3VycmVudEluZGV4PXNsaWRlcy5pbmRleE9mKGFycmF5W2luZGV4XSk7XG5cbiAgICAvLyBjb25zb2xlLmxvZyhzbGlkZXMsY3VycmVudFNsaWRlLHNlbGYuY3VycmVudEluZGV4KTtcblxuXG4gICAgbmV4dFNsaWRlQnRuLmZvckVhY2goZnVuY3Rpb24oZSkge1xuXG4gICAgLy8gY29uc29sZS5sb2coc2xpZGVzLGN1cnJlbnRTbGlkZSk7XG5cbiAgICAgIGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuXG4gICAgICAgIHNsaWRlc1tzZWxmLmN1cnJlbnRJbmRleF0uY2xhc3NMaXN0LnRvZ2dsZSgnaXMtdmlzaWJsZScpO1xuXG4gICAgICAgIHNlbGYuY3VycmVudEluZGV4ID0gKHNlbGYuY3VycmVudEluZGV4KzEpJXNsaWRlcy5sZW5ndGg7XG5cbiAgICAgICAgc2xpZGVzW3NlbGYuY3VycmVudEluZGV4XS5jbGFzc0xpc3QudG9nZ2xlKCdpcy12aXNpYmxlJyk7XG5cbiAgICAgICAgY29uc29sZS5sb2coc2VsZi5jdXJyZW50SW5kZXgpO1xuICAgICAgICBzZWxmLmNoYW5nZVRodW1ibmFpbHMoKTtcbiAgICAgIH0pO1xuXG5cblxuICAgIH0pO1xuXG5cbiAgfSk7XG5cbiBcblxufTtcblxuXG5HYWxsZXJ5LnByb3RvdHlwZS5wcmV2U2xpZGUgPSBmdW5jdGlvbihhbGxTbGlkZXMsIHByZXZCdG4pIHtcblxuXG4gIGxldCBzZWxmPXRoaXM7XG4gIGxldCBzbGlkZXM9YWxsU2xpZGVzO1xuICAvLyBsZXQgc2VsZi5jdXJyZW50SW5kZXg9IHNlbGYuc2VsZi5jdXJyZW50SW5kZXhuZGV4O1xuICBsZXQgbGFzdFNsaWRlPXNsaWRlcy5sZW5ndGgtMTtcblxuICBsZXQgcHJldlNsaWRlQnRuPXByZXZCdG47XG5cblxuICBsZXQgY3VycmVudFNsaWRlcj1zbGlkZXMuZmlsdGVyKGZ1bmN0aW9uKGVsKSB7XG5cbiAgICBpZihlbC5jbGFzc0xpc3QuY29udGFpbnMoJ2lzLXZpc2libGUnKSkgeyByZXR1cm4gZWw7fVxuXG4gIH0pO1xuXG5cblxuICBjdXJyZW50U2xpZGVyLmZvckVhY2goZnVuY3Rpb24oZWxlbWVudCwgaW5kZXgsIGFycmF5KSB7XG5cblxuICAgIHNlbGYuY3VycmVudEluZGV4PXNsaWRlcy5pbmRleE9mKGFycmF5W2luZGV4XSk7XG5cbiAgXG4gICAgcHJldlNsaWRlQnRuLmZvckVhY2goZnVuY3Rpb24oZWwpIHtcblxuXG4gICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG5cbiAgICAgICAgXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHNsaWRlcyk7XG5cblxuICAgICAgICBzbGlkZXNbc2VsZi5jdXJyZW50SW5kZXhdLmNsYXNzTGlzdC50b2dnbGUoJ2lzLXZpc2libGUnKTtcblxuICAgICAgICBpZiAoc2VsZi5jdXJyZW50SW5kZXggPD0gMCkge1xuXG4gICAgICAgIFxuICAgICAgICAgIHNlbGYuY3VycmVudEluZGV4ID0gbGFzdFNsaWRlO1xuXG5cbiAgICAgICAgfSBlbHNlIGlmICgoc2VsZi5jdXJyZW50SW5kZXggPiAwKSAmJiAoc2VsZi5jdXJyZW50SW5kZXggPD0gbGFzdFNsaWRlKSkge1xuXG4gICAgICAgICBcbiAgICAgICAgICBzZWxmLmN1cnJlbnRJbmRleC0tO1xuXG4gICAgICAgIH0gXG4gICAgICBcbiAgICAgICAgc2xpZGVzW3NlbGYuY3VycmVudEluZGV4XS5jbGFzc0xpc3QudG9nZ2xlKCdpcy12aXNpYmxlJyk7XG5cblxuICAgICAgICBjb25zb2xlLmxvZyhzZWxmLmN1cnJlbnRJbmRleCk7XG4gICAgICAgIHNlbGYuY2hhbmdlVGh1bWJuYWlscygpO1xuICAgICAgfSk7XG5cbiAgICB9KTtcblxuICB9KTtcbiAgXG59O1xuXG4gXG5cblxuXG5cblxuR2FsbGVyeS5wcm90b3R5cGUuYWRkVGh1bWJzID0gZnVuY3Rpb24oZ2FsbGVyeUNvbnRhaW5lciwgZ2FsbGVyeUl0ZW1zKSB7XG5cbiAgbGV0IHNlbGY9dGhpcztcbiAgLy8gbGV0IHRodW1ic1VybCA9IFtdO1xuICBsZXQgZGF0YT0gZ2FsbGVyeUl0ZW1zO1xuICBsZXQgY29udGFpbmVyPWdhbGxlcnlDb250YWluZXI7XG5cbiAgLy8gY29uc29sZS5sb2coZGF0YSk7XG5cblxuICBsZXQgdGh1bWJzVXJsID0gZGF0YS5tYXAoZnVuY3Rpb24oZWwpIHtcblxuICAgIHJldHVybiBlbC50aHVtYm5haWxVcmw7XG5cbiAgfSk7XG5cblxuICBsZXQgdGh1bWJzSFRNTD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICB0aHVtYnNIVE1MLnN0eWxlLm1pbkhlaWdodD1zZWxmLnRodW1ic0hlaWdodCsncHgnO1xuICB0aHVtYnNIVE1MLmNsYXNzTGlzdC5hZGQoJ2ctdGh1bWJuYWlscycpO1xuXG4gXG5cbiAgbGV0IHRodW1ic0hUTUxMaXN0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJyk7XG4gIGxldCB0aHVtYnNIVE1MTGlzdFdpZHRoPSh0aGlzLnRodW1ic0xpc3RXaWR0aCk7XG4gIHRodW1ic0hUTUxMaXN0LnN0eWxlLndpZHRoPXRodW1ic0hUTUxMaXN0V2lkdGgrJ3B4JztcblxuICBsZXQgdGh1bWJzSFRNTExpc3RIZWlnaHQ9KHNlbGYudGh1bWJzSGVpZ2h0LTEwKTtcbiAgdGh1bWJzSFRNTExpc3Quc3R5bGUuaGVpZ2h0PXRodW1ic0hUTUxMaXN0SGVpZ2h0KydweCc7XG4gXG4gIHRodW1ic0hUTUxMaXN0LmNsYXNzTGlzdC5hZGQoJ2ctdGh1bWJuYWlsc19fbGlzdCcpO1xuXG5cbiAgdGhpcy50aHVtYnNMaXN0UG9zaXRpb249c2VsZi5jdXJyZW50SW5kZXgqc2VsZi50aHVtYnNJdGVtV2lkdGgrNTtcblxuICBmb3IgKGxldCBpPTA7IGkgPCB0aHVtYnNVcmwubGVuZ3RoOyBpKysgKSB7XG5cbiAgICBsZXQgdGh1bWJzSFRNTEl0ZW09ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcblxuICAgIGxldCB0aHVtYnNIVE1MSXRlbVdpZHRoPSh0aGlzLnRodW1ic0l0ZW1XaWR0aCk7XG4gICAgdGh1bWJzSFRNTEl0ZW0uc3R5bGUud2lkdGg9dGh1bWJzSFRNTEl0ZW1XaWR0aCsncHgnO1xuICAgIHRodW1ic0hUTUxJdGVtLnN0eWxlLmhlaWdodD10aHVtYnNIVE1MTGlzdEhlaWdodCsncHgnO1xuICAgIGxldCB0aHVtYnNIVE1MSXRlbVBvc2l0aW9uPXNlbGYuY3VycmVudEluZGV4KnRodW1ic0hUTUxJdGVtV2lkdGg7XG5cbiAgICB0aHVtYnNIVE1MSXRlbS5jbGFzc0xpc3QuYWRkKCdnLXRodW1ibmFpbHNfX2l0ZW0nKTtcblxuXG4gICAgbGV0IHRodW1ic0hUTUxJdGVtV3JhcD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0aHVtYnNIVE1MSXRlbVdyYXAuc2V0QXR0cmlidXRlKCdkYXRhLXRodW1iJywgaSk7XG4gICAgdGh1bWJzSFRNTEl0ZW1XcmFwLmNsYXNzTGlzdC5hZGQoJ2ctdGh1bWJuYWlsc19faXRlbS13cmFwJywnanMtdGh1bWItc2xpZGUnKTtcblxuXG4gICAgXG4gICAgc2VsZi50aHVtYlRyaWdnZXJzLnB1c2godGh1bWJzSFRNTEl0ZW1XcmFwKTtcblxuICAgIHRodW1ic0hUTUxJdGVtV3JhcC5pbm5lckhUTUw9JzxpbWcgc3JjPVwiJyt0aHVtYnNVcmxbaV0rJ1wiIGNsYXNzPVwiZy10aHVtYm5haWxzX19pbWdcIicrXG4gICAgICAnIHN0eWxlPVwibWF4LXdpZHRoOiAxMDAlO1wiPic7XG5cblxuICAgIHRodW1ic0hUTUxJdGVtLmFwcGVuZENoaWxkKHRodW1ic0hUTUxJdGVtV3JhcCk7XG5cbiAgICB0aHVtYnNIVE1MTGlzdC5hcHBlbmRDaGlsZCh0aHVtYnNIVE1MSXRlbSk7XG5cblxuXG5cbiAgfVxuXG4gIC8vIGNvbnNvbGUubG9nKHNlbGYudGh1bWJUcmlnZ2Vycyk7XG5cblxuICB0aHVtYnNIVE1MLmFwcGVuZENoaWxkKHRodW1ic0hUTUxMaXN0KTtcblxuICAvLyBjb25zb2xlLmxvZyhjb250YWluZXIpO1xuICBjb250YWluZXIuYXBwZW5kQ2hpbGQodGh1bWJzSFRNTCk7XG5cbiAgdGhpcy5tb3ZlVGh1bWJuYWlscyh0aHVtYnNIVE1MTGlzdCxzZWxmLmN1cnJlbnRJbmRleCk7XG5cbiAgdGhpcy50b2dnbGVUaHVtYnMoKTtcblxufTtcblxuXG5cbkdhbGxlcnkucHJvdG90eXBlLnRvZ2dsZVRodW1icyA9IGZ1bmN0aW9uKCkge1xuXG5cbiAgbGV0IHNlbGY9dGhpcztcbiAgXG4gIGxldCB0aHVtYlRyaWdnZXI9c2VsZi50aHVtYlRyaWdnZXJzO1xuXG4gIC8vIGxldCB0aHVtYlRyaWdnZXJzTGlzdD0gdGh1bWJUcmlnZ2VyWzBdLmNsb3Nlc3QoJy5nLXRodW1ibmFpbHNfX2xpc3QnKTtcblxuICAvLyBjb25zb2xlLmxvZyh0aHVtYlRyaWdnZXJzTGlzdCk7XG5cbiAgdGh1bWJUcmlnZ2VyLmZvckVhY2goZnVuY3Rpb24oZWwpIHtcblxuXG4gICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuXG5cbiAgICAgIGxldCB0cmlnZ2VyU2libGluZ1NsaWRlcyA9IGVsLmNsb3Nlc3QoJy5nLXRodW1ibmFpbHMnKS5wcmV2aW91c1NpYmxpbmcuY2hpbGROb2RlcztcblxuICAgICAgLy8gY29uc29sZS5sb2codHJpZ2dlclNpYmxpbmdTbGlkZXMpO1xuXG4gICAgICBsZXQgc2xpZGVzID0gdHJpZ2dlclNpYmxpbmdTbGlkZXNbMF0uY2hpbGROb2RlcztcblxuICAgICAgbGV0IGluZGV4VG9UcmlnZ2VyPSArZXZlbnQuY3VycmVudFRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdGh1bWInKTtcblxuICAgICAgc2xpZGVzW3NlbGYuY3VycmVudEluZGV4XS5jbGFzc0xpc3QudG9nZ2xlKCdpcy12aXNpYmxlJyk7XG5cbiAgICAgIHNlbGYuY3VycmVudEluZGV4PWluZGV4VG9UcmlnZ2VyO1xuXG5cbiAgICAgIHNlbGYuY2hhbmdlVGh1bWJuYWlscygpO1xuXG4gICAgICAvLyBlbC5jbGFzc0xpc3QudG9nZ2xlKCdpcy1hY3RpdmUnKTtcblxuICAgICBcblxuXG5cblxuICAgICAgc2xpZGVzW3NlbGYuY3VycmVudEluZGV4XS5jbGFzc0xpc3QudG9nZ2xlKCdpcy12aXNpYmxlJyk7XG5cblxuICAgICAgLy8gY29uc29sZS5sb2coc2VsZi5jdXJyZW50SW5kZXgpO1xuICAgIH0pO1xuICB9KTtcblxuXG5cbn07XG5cblxuR2FsbGVyeS5wcm90b3R5cGUuY2hhbmdlVGh1bWJuYWlscyA9IGZ1bmN0aW9uKHRodW1icykge1xuXG4gIGxldCBzZWxmPXRoaXM7XG4gXG4gIGxldCB0aHVtYlRyaWdnZXI9c2VsZi50aHVtYlRyaWdnZXJzO1xuICBsZXQgaW5kZXg9IHNlbGYuY3VycmVudEluZGV4O1xuXG4gIGxldCB0aHVtYlRyaWdnZXJzTGlzdD0gdGh1bWJUcmlnZ2VyWzBdLmNsb3Nlc3QoJy5nLXRodW1ibmFpbHNfX2xpc3QnKTtcblxuICBzZWxmLm1vdmVUaHVtYm5haWxzKHRodW1iVHJpZ2dlcnNMaXN0LHNlbGYuY3VycmVudEluZGV4KTtcblxuXG4gIHRodW1iVHJpZ2dlci5mb3JFYWNoKGZ1bmN0aW9uKGVsKSB7XG5cbiAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdpcy1hY3RpdmUnKTtcblxuICAgIGxldCB0aHVtYkRhdGFBdHRyPStlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdGh1bWInKTtcblxuXG4gICAgLy8gY29uc29sZS5sb2codGh1bWJEYXRhQXR0cik7XG4gICAgXG4gICAgaWYgKHRodW1iRGF0YUF0dHI9PT1pbmRleCkge1xuXG4gICAgICBlbC5jbGFzc0xpc3QudG9nZ2xlKCdpcy1hY3RpdmUnKTtcbiAgICB9XG5cblxuICB9KTtcblxuXG5cblxuXG5cbn07XG5cblxuR2FsbGVyeS5wcm90b3R5cGUubW92ZVRodW1ibmFpbHMgPSBmdW5jdGlvbih0aHVtYnMsaW5kZXgpIHtcbiAgXG4gIGxldCBzZWxmPXRoaXM7XG5cbiAgbGV0IGxlZnQ9aW5kZXgqc2VsZi50aHVtYnNJdGVtV2lkdGgrNTsgXG5cbiAgbGV0IHRvdGFsV2lkdGg9dGh1bWJzLm9mZnNldFdpZHRoO1xuICBsZXQgdmlzaWJsZVdpZHRoPXNlbGYudGh1bWJzV2lkdGg7XG4gIGxldCBzdG9wUG9pbnQ9dG90YWxXaWR0aCAtIHZpc2libGVXaWR0aDtcblxuICAvLyBjb25zb2xlLmxvZyhsZWZ0LHRvdGFsV2lkdGgsdmlzaWJsZVdpZHRoLHN0b3BQb2ludCk7XG5cbiAgaWYgKGxlZnQgPj0gc3RvcFBvaW50KSB7XG5cbiAgICBsZWZ0PSBzdG9wUG9pbnQ7XG4gIH0gXG5cbiAgbGV0IHBvc2l0aW9uTGVmdD0nY2FsYyggLScrbGVmdCsncHgnKycgKyAxNXB4KSc7XG5cbiAgdGh1bWJzLnN0eWxlLmxlZnQ9cG9zaXRpb25MZWZ0O1xuXG59O1xuXG5cblxuXG5HYWxsZXJ5LnByb3RvdHlwZS5hZGRMb2FkZXIgPSBmdW5jdGlvbigpIHtcbiAgXG5cblxuXG5cbn07XG5cblxuXG5cblxuR2FsbGVyeS5wcm90b3R5cGUuZnVsbFNjcmVlbk1vZGUgPSBmdW5jdGlvbigpIHtcbiAgXG5cblxuICBcbn07XG5cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBzcmMvanMvc2xpZGVyLmpzIl0sIm1hcHBpbmdzIjoiOztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUExQkE7QUFDQTtBQTZCQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWJBO0FBQ0E7QUFnQkE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFiQTtBQWlCQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFHQTtBQUNBO0FBR0E7Ozs7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBR0E7QUFJQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUdBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQU9BO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUlBO0FBQ0E7QUFXQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///1\n");

/***/ }),
/* 2 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\n__webpack_require__(0);\n\n__webpack_require__(1);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvanMvYXBwLmpzPzcxNmYiXSwic291cmNlc0NvbnRlbnQiOlsiXG5pbXBvcnQgJy4vcG9seWZpbGxzJztcbmltcG9ydCAnLi9zbGlkZXInO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHNyYy9qcy9hcHAuanMiXSwibWFwcGluZ3MiOiI7O0FBQ0E7QUFDQTtBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///2\n");

/***/ })
/******/ ]);